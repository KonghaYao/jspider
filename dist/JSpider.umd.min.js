/**
 * Apache License
 * Version 2.0, January 2004
 * http://www.apache.org/licenses/
 *
 * TERMS AND CONDITIONS FOR USE, REPRODUCTION, AND DISTRIBUTION
 *
 * 1. Definitions.
 *
 * "License" shall mean the terms and conditions for use, reproduction,
 * and distribution as defined by Sections 1 through 9 of this document.
 *
 * "Licensor" shall mean the copyright owner or entity authorized by
 * the copyright owner that is granting the License.
 *
 * "Legal Entity" shall mean the union of the acting entity and all
 * other entities that control, are controlled by, or are under common
 * control with that entity. For the purposes of this definition,
 * "control" means (i) the power, direct or indirect, to cause the
 * direction or management of such entity, whether by contract or
 * otherwise, or (ii) ownership of fifty percent (50%) or more of the
 * outstanding shares, or (iii) beneficial ownership of such entity.
 *
 * "You" (or "Your") shall mean an individual or Legal Entity
 * exercising permissions granted by this License.
 *
 * "Source" form shall mean the preferred form for making modifications,
 * including but not limited to software source code, documentation
 * source, and configuration files.
 *
 * "Object" form shall mean any form resulting from mechanical
 * transformation or translation of a Source form, including but
 * not limited to compiled object code, generated documentation,
 * and conversions to other media types.
 *
 * "Work" shall mean the work of authorship, whether in Source or
 * Object form, made available under the License, as indicated by a
 * copyright notice that is included in or attached to the work
 * (an example is provided in the Appendix below).
 *
 * "Derivative Works" shall mean any work, whether in Source or Object
 * form, that is based on (or derived from) the Work and for which the
 * editorial revisions, annotations, elaborations, or other modifications
 * represent, as a whole, an original work of authorship. For the purposes
 * of this License, Derivative Works shall not include works that remain
 * separable from, or merely link (or bind by name) to the interfaces of,
 * the Work and Derivative Works thereof.
 *
 * "Contribution" shall mean any work of authorship, including
 * the original version of the Work and any modifications or additions
 * to that Work or Derivative Works thereof, that is intentionally
 * submitted to Licensor for inclusion in the Work by the copyright owner
 * or by an individual or Legal Entity authorized to submit on behalf of
 * the copyright owner. For the purposes of this definition, "submitted"
 * means any form of electronic, verbal, or written communication sent
 * to the Licensor or its representatives, including but not limited to
 * communication on electronic mailing lists, source code control systems,
 * and issue tracking systems that are managed by, or on behalf of, the
 * Licensor for the purpose of discussing and improving the Work, but
 * excluding communication that is conspicuously marked or otherwise
 * designated in writing by the copyright owner as "Not a Contribution."
 *
 * "Contributor" shall mean Licensor and any individual or Legal Entity
 * on behalf of whom a Contribution has been received by Licensor and
 * subsequently incorporated within the Work.
 *
 * 2. Grant of Copyright License. Subject to the terms and conditions of
 * this License, each Contributor hereby grants to You a perpetual,
 * worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 * copyright license to reproduce, prepare Derivative Works of,
 * publicly display, publicly perform, sublicense, and distribute the
 * Work and such Derivative Works in Source or Object form.
 *
 * 3. Grant of Patent License. Subject to the terms and conditions of
 * this License, each Contributor hereby grants to You a perpetual,
 * worldwide, non-exclusive, no-charge, royalty-free, irrevocable
 * (except as stated in this section) patent license to make, have made,
 * use, offer to sell, sell, import, and otherwise transfer the Work,
 * where such license applies only to those patent claims licensable
 * by such Contributor that are necessarily infringed by their
 * Contribution(s) alone or by combination of their Contribution(s)
 * with the Work to which such Contribution(s) was submitted. If You
 * institute patent litigation against any entity (including a
 * cross-claim or counterclaim in a lawsuit) alleging that the Work
 * or a Contribution incorporated within the Work constitutes direct
 * or contributory patent infringement, then any patent licenses
 * granted to You under this License for that Work shall terminate
 * as of the date such litigation is filed.
 *
 * 4. Redistribution. You may reproduce and distribute copies of the
 * Work or Derivative Works thereof in any medium, with or without
 * modifications, and in Source or Object form, provided that You
 * meet the following conditions:
 *
 * (a) You must give any other recipients of the Work or
 * Derivative Works a copy of this License; and
 *
 * (b) You must cause any modified files to carry prominent notices
 * stating that You changed the files; and
 *
 * (c) You must retain, in the Source form of any Derivative Works
 * that You distribute, all copyright, patent, trademark, and
 * attribution notices from the Source form of the Work,
 * excluding those notices that do not pertain to any part of
 * the Derivative Works; and
 *
 * (d) If the Work includes a "NOTICE" text file as part of its
 * distribution, then any Derivative Works that You distribute must
 * include a readable copy of the attribution notices contained
 * within such NOTICE file, excluding those notices that do not
 * pertain to any part of the Derivative Works, in at least one
 * of the following places: within a NOTICE text file distributed
 * as part of the Derivative Works; within the Source form or
 * documentation, if provided along with the Derivative Works; or,
 * within a display generated by the Derivative Works, if and
 * wherever such third-party notices normally appear. The contents
 * of the NOTICE file are for informational purposes only and
 * do not modify the License. You may add Your own attribution
 * notices within Derivative Works that You distribute, alongside
 * or as an addendum to the NOTICE text from the Work, provided
 * that such additional attribution notices cannot be construed
 * as modifying the License.
 *
 * You may add Your own copyright statement to Your modifications and
 * may provide additional or different license terms and conditions
 * for use, reproduction, or distribution of Your modifications, or
 * for any such Derivative Works as a whole, provided Your use,
 * reproduction, and distribution of the Work otherwise complies with
 * the conditions stated in this License.
 *
 * 5. Submission of Contributions. Unless You explicitly state otherwise,
 * any Contribution intentionally submitted for inclusion in the Work
 * by You to the Licensor shall be under the terms and conditions of
 * this License, without any additional terms or conditions.
 * Notwithstanding the above, nothing herein shall supersede or modify
 * the terms of any separate license agreement you may have executed
 * with Licensor regarding such Contributions.
 *
 * 6. Trademarks. This License does not grant permission to use the trade
 * names, trademarks, service marks, or product names of the Licensor,
 * except as required for reasonable and customary use in describing the
 * origin of the Work and reproducing the content of the NOTICE file.
 *
 * 7. Disclaimer of Warranty. Unless required by applicable law or
 * agreed to in writing, Licensor provides the Work (and each
 * Contributor provides its Contributions) on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or
 * implied, including, without limitation, any warranties or conditions
 * of TITLE, NON-INFRINGEMENT, MERCHANTABILITY, or FITNESS FOR A
 * PARTICULAR PURPOSE. You are solely responsible for determining the
 * appropriateness of using or redistributing the Work and assume any
 * risks associated with Your exercise of permissions under this License.
 *
 * 8. Limitation of Liability. In no event and under no legal theory,
 * whether in tort (including negligence), contract, or otherwise,
 * unless required by applicable law (such as deliberate and grossly
 * negligent acts) or agreed to in writing, shall any Contributor be
 * liable to You for damages, including any direct, indirect, special,
 * incidental, or consequential damages of any character arising as a
 * result of this License or out of the use or inability to use the
 * Work (including but not limited to damages for loss of goodwill,
 * work stoppage, computer failure or malfunction, or any and all
 * other commercial damages or losses), even if such Contributor
 * has been advised of the possibility of such damages.
 *
 * 9. Accepting Warranty or Additional Liability. While redistributing
 * the Work or Derivative Works thereof, You may choose to offer,
 * and charge a fee for, acceptance of support, warranty, indemnity,
 * or other liability obligations and/or rights consistent with this
 * License. However, in accepting such obligations, You may act only
 * on Your own behalf and on Your sole responsibility, not on behalf
 * of any other Contributor, and only if You agree to indemnify,
 * defend, and hold each Contributor harmless for any liability
 * incurred by, or claims asserted against, such Contributor by reason
 * of your accepting any such warranty or additional liability.
 *
 * END OF TERMS AND CONDITIONS
 *
 * APPENDIX: How to apply the Apache License to your work.
 *
 * To apply the Apache License to your work, attach the following
 * boilerplate notice, with the fields enclosed by brackets "[]"
 * replaced with your own identifying information. (Don't include
 * the brackets!)  The text should be enclosed in the appropriate
 * comment syntax for the file format. We also recommend that a
 * file or class name and description of purpose be included on the
 * same "printed page" as the copyright notice for easier
 * identification within third-party archives.
 *
 * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).JSpider=t()}(this,(function(){"use strict";function e(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw new Error("number"==typeof e?"[MobX] minified error nr: "+e+(n.length?" "+n.map(String).join(","):"")+". Find the full error at: https://github.com/mobxjs/mobx/blob/main/packages/mobx/src/errors.ts":"[MobX] "+e)}var t={};function n(){return"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:t}var r=Object.assign,i=Object.getOwnPropertyDescriptor,o=Object.defineProperty,a=Object.prototype,s=[];Object.freeze(s);var u={};Object.freeze(u);var c="undefined"!=typeof Proxy,l=Object.toString();function f(){c||e("Proxy not available")}function p(e){var t=!1;return function(){if(!t)return t=!0,e.apply(this,arguments)}}var h=function(){};function b(e){return"function"==typeof e}function d(e){switch(typeof e){case"string":case"symbol":case"number":return!0}return!1}function v(e){return null!==e&&"object"==typeof e}function y(e){var t;if(!v(e))return!1;var n=Object.getPrototypeOf(e);return null==n||(null==(t=n.constructor)?void 0:t.toString())===l}function g(e){var t=null==e?void 0:e.constructor;return!!t&&("GeneratorFunction"===t.name||"GeneratorFunction"===t.displayName)}function m(e,t,n){o(e,t,{enumerable:!1,writable:!0,configurable:!0,value:n})}function _(e,t,n){o(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}function w(e,t){var n="isMobX"+e;return t.prototype[n]=!0,function(e){return v(e)&&!0===e[n]}}function O(e){return e instanceof Map}function j(e){return e instanceof Set}var P=void 0!==Object.getOwnPropertySymbols;var S="undefined"!=typeof Reflect&&Reflect.ownKeys?Reflect.ownKeys:P?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:Object.getOwnPropertyNames;function A(e){return null===e?null:"object"==typeof e?""+e:e}function x(e,t){return a.hasOwnProperty.call(e,t)}var E=Object.getOwnPropertyDescriptors||function(e){var t={};return S(e).forEach((function(n){t[n]=i(e,n)})),t};function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function I(e,t,n){return t&&T(e.prototype,t),n&&T(e,n),e}function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function k(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}function D(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function N(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function V(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return N(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?N(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0;return function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}return(n=e[Symbol.iterator]()).next.bind(n)}var R=Symbol("mobx-stored-annotations");function U(e){return Object.assign((function(t,n){M(t,n,e)}),e)}function M(e,t,n){x(e,R)||m(e,R,C({},e[R])),function(e){return e.annotationType_===K}(n)||(e[R][t]=n)}var F=Symbol("mobx administration"),z=function(){function e(e){void 0===e&&(e="Atom"),this.name_=void 0,this.isPendingUnobservation_=!1,this.isBeingObserved_=!1,this.observers_=new Set,this.diffValue_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Fe.NOT_TRACKING_,this.onBOL=void 0,this.onBUOL=void 0,this.name_=e}var t=e.prototype;return t.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},t.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},t.reportObserved=function(){return ut(this)},t.reportChanged=function(){at(),ct(this),st()},t.toString=function(){return this.name_},e}(),L=w("Atom",z);function $(e,t,n){void 0===t&&(t=h),void 0===n&&(n=h);var r,i=new z(e);return t!==h&&Ct(Tt,i,t,r),n!==h&&It(i,n),i}var H={identity:function(e,t){return e===t},structural:function(e,t){return Yn(e,t)},default:function(e,t){return Object.is(e,t)},shallow:function(e,t){return Yn(e,t,1)}};function B(e,t,n){return Lt(e)?e:Array.isArray(e)?Oe.array(e,{name:n}):y(e)?Oe.object(e,void 0,{name:n}):O(e)?Oe.map(e,{name:n}):j(e)?Oe.set(e,{name:n}):"function"!=typeof e||St(e)||Mt(e)?e:g(e)?Rt(e):jt(n,e)}function G(e){return e}var K="override";function q(e,t){return{annotationType_:e,options_:t,make_:W,extend_:Y}}function W(e,t,n,r){var i;if(null==(i=this.options_)?void 0:i.bound)return null===this.extend_(e,t,n,!1)?0:1;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if(St(n.value))return 1;var a=Q(e,this,t,n,!1);return o(r,t,a),2}function Y(e,t,n,r){var i=Q(e,this,t,n);return e.defineProperty_(t,i,r)}function Q(e,t,n,r,i){var o,a,s,u,c,l;void 0===i&&(i=nt.safeDescriptors),l=r,t.annotationType_,l.value;var f,p=r.value;(null==(o=t.options_)?void 0:o.bound)&&(p=p.bind(null!=(f=e.proxy_)?f:e.target_));return{value:ke(null!=(a=null==(s=t.options_)?void 0:s.name)?a:n.toString(),p,null!=(u=null==(c=t.options_)?void 0:c.autoAction)&&u),configurable:!i||e.isPlainObject_,enumerable:!1,writable:!i}}function X(e,t){return{annotationType_:e,options_:t,make_:Z,extend_:J}}function Z(e,t,n,r){var i;if(r===e.target_)return null===this.extend_(e,t,n,!1)?0:2;if((null==(i=this.options_)?void 0:i.bound)&&!Mt(e.target_[t])&&null===this.extend_(e,t,n,!1))return 0;if(Mt(n.value))return 1;var a=ee(e,this,t,n,!1,!1);return o(r,t,a),2}function J(e,t,n,r){var i,o=ee(e,this,t,n,null==(i=this.options_)?void 0:i.bound);return e.defineProperty_(t,o,r)}function ee(e,t,n,r,i,o){var a;void 0===o&&(o=nt.safeDescriptors),a=r,t.annotationType_,a.value;var s,u=r.value;i&&(u=u.bind(null!=(s=e.proxy_)?s:e.target_));return{value:Rt(u),configurable:!o||e.isPlainObject_,enumerable:!1,writable:!o}}function te(e,t){return{annotationType_:e,options_:t,make_:ne,extend_:re}}function ne(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function re(e,t,n,r){var i;return i=n,this.annotationType_,i.get,e.defineComputedProperty_(t,C({},this.options_,{get:n.get,set:n.set}),r)}function ie(e,t){return{annotationType_:e,options_:t,make_:oe,extend_:ae}}function oe(e,t,n){return null===this.extend_(e,t,n,!1)?0:1}function ae(e,t,n,r){var i,o;return this.annotationType_,e.defineObservableProperty_(t,n.value,null!=(i=null==(o=this.options_)?void 0:o.enhancer)?i:B,r)}var se=ue();function ue(e){return{annotationType_:"true",options_:e,make_:ce,extend_:le}}function ce(e,t,n,r){var i,a,s,u;if(n.get)return Ae.make_(e,t,n,r);if(n.set){var c=ke(t.toString(),n.set);return r===e.target_?null===e.defineProperty_(t,{configurable:!nt.safeDescriptors||e.isPlainObject_,set:c})?0:2:(o(r,t,{configurable:!0,set:c}),2)}if(r!==e.target_&&"function"==typeof n.value)return g(n.value)?((null==(u=this.options_)?void 0:u.autoBind)?Rt.bound:Rt).make_(e,t,n,r):((null==(s=this.options_)?void 0:s.autoBind)?jt.bound:jt).make_(e,t,n,r);var l,f=!1===(null==(i=this.options_)?void 0:i.deep)?Oe.ref:Oe;"function"==typeof n.value&&(null==(a=this.options_)?void 0:a.autoBind)&&(n.value=n.value.bind(null!=(l=e.proxy_)?l:e.target_));return f.make_(e,t,n,r)}function le(e,t,n,r){var i,o,a;if(n.get)return Ae.extend_(e,t,n,r);if(n.set)return e.defineProperty_(t,{configurable:!nt.safeDescriptors||e.isPlainObject_,set:ke(t.toString(),n.set)},r);"function"==typeof n.value&&(null==(i=this.options_)?void 0:i.autoBind)&&(n.value=n.value.bind(null!=(a=e.proxy_)?a:e.target_));return(!1===(null==(o=this.options_)?void 0:o.deep)?Oe.ref:Oe).extend_(e,t,n,r)}var fe={deep:!0,name:void 0,defaultDecorator:void 0,proxy:!0};function pe(e){return e||fe}Object.freeze(fe);var he=ie("observable"),be=ie("observable.ref",{enhancer:G}),de=ie("observable.shallow",{enhancer:function(e,t,n){return null==e||Vn(e)||gn(e)||Sn(e)||En(e)?e:Array.isArray(e)?Oe.array(e,{name:n,deep:!1}):y(e)?Oe.object(e,void 0,{name:n,deep:!1}):O(e)?Oe.map(e,{name:n,deep:!1}):j(e)?Oe.set(e,{name:n,deep:!1}):void 0}}),ve=ie("observable.struct",{enhancer:function(e,t){return Yn(e,t)?t:e}}),ye=U(he);function ge(e){return!0===e.deep?B:!1===e.deep?G:(t=e.defaultDecorator)&&null!=(n=null==(r=t.options_)?void 0:r.enhancer)?n:B;var t,n,r}function me(e,t,n){if(!d(t))return Lt(e)?e:y(e)?Oe.object(e,t,n):Array.isArray(e)?Oe.array(e,t):O(e)?Oe.map(e,t):j(e)?Oe.set(e,t):"object"==typeof e&&null!==e?e:Oe.box(e,t);M(e,t,he)}Object.assign(me,ye);var _e,we,Oe=r(me,{box:function(e,t){var n=pe(t);return new Ue(e,ge(n),n.name,!0,n.equals)},array:function(e,t){var n=pe(t);return(!1===nt.useProxies||!1===n.proxy?Bn:cn)(e,ge(n),n.name)},map:function(e,t){var n=pe(t);return new Pn(e,ge(n),n.name)},set:function(e,t){var n=pe(t);return new xn(e,ge(n),n.name)},object:function(e,t,n){return function(e,t,n,r){var i=E(t),o=kn(e,r)[F];at();try{S(i).forEach((function(e){o.extend_(e,i[e],!n||(!(e in n)||n[e]))}))}finally{st()}return e}(!1===nt.useProxies||!1===(null==n?void 0:n.proxy)?kn({},n):function(e,t){var n,r;return f(),e=kn(e,t),null!=(r=(n=e[F]).proxy_)?r:n.proxy_=new Proxy(e,Qt)}({},n),e,t)},ref:U(be),shallow:U(de),deep:ye,struct:U(ve)}),je="computed",Pe=te(je),Se=te("computed.struct",{equals:H.structural}),Ae=function(e,t){if(d(t))return M(e,t,Pe);if(y(e))return U(te(je,e));var n=y(t)?t:{};return n.get=e,n.name||(n.name=e.name||""),new Le(n)};Object.assign(Ae,Pe),Ae.struct=U(Se);var xe,Ee=0,Te=1,Ie=null!=(_e=null==(we=i((function(){}),"name"))?void 0:we.configurable)&&_e,Ce={value:"action",configurable:!0,writable:!1,enumerable:!1};function ke(e,t,n,r){function i(){return De(e,n,t,r||this,arguments)}return void 0===n&&(n=!1),i.isMobxAction=!0,Ie&&(Ce.value=e,Object.defineProperty(i,"name",Ce)),i}function De(t,n,r,i,o){var a=function(e,t,n,r){var i=!1,o=0,a=nt.trackingDerivation,s=!t||!a;at();var u=nt.allowStateChanges;s&&(Ye(),u=Ne(!0));var c=Xe(!0),l={runAsAction_:s,prevDerivation_:a,prevAllowStateChanges_:u,prevAllowStateReads_:c,notifySpy_:i,startTime_:o,actionId_:Te++,parentActionId_:Ee};return Ee=l.actionId_,l}(0,n);try{return r.apply(i,o)}catch(e){throw a.error_=e,e}finally{!function(t){Ee!==t.actionId_&&e(30);Ee=t.parentActionId_,void 0!==t.error_&&(nt.suppressReactionErrors=!0);Ve(t.prevAllowStateChanges_),Ze(t.prevAllowStateReads_),st(),t.runAsAction_&&Qe(t.prevDerivation_);nt.suppressReactionErrors=!1}(a)}}function Ne(e){var t=nt.allowStateChanges;return nt.allowStateChanges=e,t}function Ve(e){nt.allowStateChanges=e}xe=Symbol.toPrimitive;var Re,Ue=function(e){function t(t,n,r,i,o){var a;return void 0===r&&(r="ObservableValue"),void 0===o&&(o=H.default),(a=e.call(this,r)||this).enhancer=void 0,a.name_=void 0,a.equals=void 0,a.hasUnreportedChange_=!1,a.interceptors_=void 0,a.changeListeners_=void 0,a.value_=void 0,a.dehancer=void 0,a.enhancer=n,a.name_=r,a.equals=o,a.value_=n(t,void 0,r),a}k(t,e);var n=t.prototype;return n.dehanceValue=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.set=function(e){this.value_,(e=this.prepareNewValue_(e))!==nt.UNCHANGED&&this.setNewValue_(e)},n.prepareNewValue_=function(e){if(Xt(this)){var t=Jt(this,{object:this,type:an,newValue:e});if(!t)return nt.UNCHANGED;e=t.newValue}return e=this.enhancer(e,this.value_,this.name_),this.equals(this.value_,e)?nt.UNCHANGED:e},n.setNewValue_=function(e){var t=this.value_;this.value_=e,this.reportChanged(),en(this)&&nn(this,{type:an,object:this,newValue:e,oldValue:t})},n.get=function(){return this.reportObserved(),this.dehanceValue(this.value_)},n.intercept_=function(e){return Zt(this,e)},n.observe_=function(e,t){return t&&e({observableKind:"value",debugObjectName:this.name_,object:this,type:an,newValue:this.value_,oldValue:void 0}),tn(this,e)},n.raw=function(){return this.value_},n.toJSON=function(){return this.get()},n.toString=function(){return this.name_+"["+this.value_+"]"},n.valueOf=function(){return A(this.get())},n[xe]=function(){return this.valueOf()},t}(z),Me=w("ObservableValue",Ue);Re=Symbol.toPrimitive;var Fe,ze,Le=function(){function t(t){this.dependenciesState_=Fe.NOT_TRACKING_,this.observing_=[],this.newObserving_=null,this.isBeingObserved_=!1,this.isPendingUnobservation_=!1,this.observers_=new Set,this.diffValue_=0,this.runId_=0,this.lastAccessedBy_=0,this.lowestObserverState_=Fe.UP_TO_DATE_,this.unboundDepsCount_=0,this.value_=new He(null),this.name_=void 0,this.triggeredBy_=void 0,this.isComputing_=!1,this.isRunningSetter_=!1,this.derivation=void 0,this.setter_=void 0,this.isTracing_=ze.NONE,this.scope_=void 0,this.equals_=void 0,this.requiresReaction_=void 0,this.keepAlive_=void 0,this.onBOL=void 0,this.onBUOL=void 0,t.get||e(31),this.derivation=t.get,this.name_=t.name||"ComputedValue",t.set&&(this.setter_=ke("ComputedValue-setter",t.set)),this.equals_=t.equals||(t.compareStructural||t.struct?H.structural:H.default),this.scope_=t.context,this.requiresReaction_=!!t.requiresReaction,this.keepAlive_=!!t.keepAlive}var n=t.prototype;return n.onBecomeStale_=function(){!function(e){if(e.lowestObserverState_!==Fe.UP_TO_DATE_)return;e.lowestObserverState_=Fe.POSSIBLY_STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Fe.UP_TO_DATE_&&(e.dependenciesState_=Fe.POSSIBLY_STALE_,e.onBecomeStale_())}))}(this)},n.onBO=function(){this.onBOL&&this.onBOL.forEach((function(e){return e()}))},n.onBUO=function(){this.onBUOL&&this.onBUOL.forEach((function(e){return e()}))},n.get=function(){if(this.isComputing_&&e(32,this.name_,this.derivation),0!==nt.inBatch||0!==this.observers_.size||this.keepAlive_){if(ut(this),Ge(this)){var t=nt.trackingContext;this.keepAlive_&&!t&&(nt.trackingContext=this),this.trackAndCompute()&&function(e){if(e.lowestObserverState_===Fe.STALE_)return;e.lowestObserverState_=Fe.STALE_,e.observers_.forEach((function(t){t.dependenciesState_===Fe.POSSIBLY_STALE_?t.dependenciesState_=Fe.STALE_:t.dependenciesState_===Fe.UP_TO_DATE_&&(e.lowestObserverState_=Fe.UP_TO_DATE_)}))}(this),nt.trackingContext=t}}else Ge(this)&&(this.warnAboutUntrackedRead_(),at(),this.value_=this.computeValue_(!1),st());var n=this.value_;if(Be(n))throw n.cause;return n},n.set=function(t){if(this.setter_){this.isRunningSetter_&&e(33,this.name_),this.isRunningSetter_=!0;try{this.setter_.call(this.scope_,t)}finally{this.isRunningSetter_=!1}}else e(34,this.name_)},n.trackAndCompute=function(){var e=this.value_,t=this.dependenciesState_===Fe.NOT_TRACKING_,n=this.computeValue_(!0),r=t||Be(e)||Be(n)||!this.equals_(e,n);return r&&(this.value_=n),r},n.computeValue_=function(e){this.isComputing_=!0;var t,n=Ne(!1);if(e)t=Ke(this,this.derivation,this.scope_);else if(!0===nt.disableErrorBoundaries)t=this.derivation.call(this.scope_);else try{t=this.derivation.call(this.scope_)}catch(e){t=new He(e)}return Ve(n),this.isComputing_=!1,t},n.suspend_=function(){this.keepAlive_||(qe(this),this.value_=void 0)},n.observe_=function(e,t){var n=this,r=!0,i=void 0;return function(e,t){var n,r;void 0===t&&(t=u);var i,o=null!=(n=null==(r=t)?void 0:r.name)?n:"Autorun";if(t.scheduler||t.delay){var a=xt(t),s=!1;i=new lt(o,(function(){s||(s=!0,a((function(){s=!1,i.isDisposed_||i.track(c)})))}),t.onError,t.requiresObservable)}else i=new lt(o,(function(){this.track(c)}),t.onError,t.requiresObservable);function c(){e(i)}return i.schedule_(),i.getDisposer_()}((function(){var o=n.get();if(!r||t){var a=Ye();e({observableKind:"computed",debugObjectName:n.name_,type:an,object:n,newValue:o,oldValue:i}),Qe(a)}r=!1,i=o}))},n.warnAboutUntrackedRead_=function(){},n.toString=function(){return this.name_+"["+this.derivation.toString()+"]"},n.valueOf=function(){return A(this.get())},n[Re]=function(){return this.valueOf()},t}(),$e=w("ComputedValue",Le);!function(e){e[e.NOT_TRACKING_=-1]="NOT_TRACKING_",e[e.UP_TO_DATE_=0]="UP_TO_DATE_",e[e.POSSIBLY_STALE_=1]="POSSIBLY_STALE_",e[e.STALE_=2]="STALE_"}(Fe||(Fe={})),function(e){e[e.NONE=0]="NONE",e[e.LOG=1]="LOG",e[e.BREAK=2]="BREAK"}(ze||(ze={}));var He=function(e){this.cause=void 0,this.cause=e};function Be(e){return e instanceof He}function Ge(e){switch(e.dependenciesState_){case Fe.UP_TO_DATE_:return!1;case Fe.NOT_TRACKING_:case Fe.STALE_:return!0;case Fe.POSSIBLY_STALE_:for(var t=Xe(!0),n=Ye(),r=e.observing_,i=r.length,o=0;o<i;o++){var a=r[o];if($e(a)){if(nt.disableErrorBoundaries)a.get();else try{a.get()}catch(e){return Qe(n),Ze(t),!0}if(e.dependenciesState_===Fe.STALE_)return Qe(n),Ze(t),!0}}return Je(e),Qe(n),Ze(t),!1}}function Ke(e,t,n){var r=Xe(!0);Je(e),e.newObserving_=new Array(e.observing_.length+100),e.unboundDepsCount_=0,e.runId_=++nt.runId;var i,o=nt.trackingDerivation;if(nt.trackingDerivation=e,nt.inBatch++,!0===nt.disableErrorBoundaries)i=t.call(n);else try{i=t.call(n)}catch(e){i=new He(e)}return nt.inBatch--,nt.trackingDerivation=o,function(e){for(var t=e.observing_,n=e.observing_=e.newObserving_,r=Fe.UP_TO_DATE_,i=0,o=e.unboundDepsCount_,a=0;a<o;a++){var s=n[a];0===s.diffValue_&&(s.diffValue_=1,i!==a&&(n[i]=s),i++),s.dependenciesState_>r&&(r=s.dependenciesState_)}n.length=i,e.newObserving_=null,o=t.length;for(;o--;){var u=t[o];0===u.diffValue_&&it(u,e),u.diffValue_=0}for(;i--;){var c=n[i];1===c.diffValue_&&(c.diffValue_=0,rt(c,e))}r!==Fe.UP_TO_DATE_&&(e.dependenciesState_=r,e.onBecomeStale_())}(e),Ze(r),i}function qe(e){var t=e.observing_;e.observing_=[];for(var n=t.length;n--;)it(t[n],e);e.dependenciesState_=Fe.NOT_TRACKING_}function We(e){var t=Ye();try{return e()}finally{Qe(t)}}function Ye(){var e=nt.trackingDerivation;return nt.trackingDerivation=null,e}function Qe(e){nt.trackingDerivation=e}function Xe(e){var t=nt.allowStateReads;return nt.allowStateReads=e,t}function Ze(e){nt.allowStateReads=e}function Je(e){if(e.dependenciesState_!==Fe.UP_TO_DATE_){e.dependenciesState_=Fe.UP_TO_DATE_;for(var t=e.observing_,n=t.length;n--;)t[n].lowestObserverState_=Fe.UP_TO_DATE_}}var et=function(){this.version=6,this.UNCHANGED={},this.trackingDerivation=null,this.trackingContext=null,this.runId=0,this.mobxGuid=0,this.inBatch=0,this.pendingUnobservations=[],this.pendingReactions=[],this.isRunningReactions=!1,this.allowStateChanges=!1,this.allowStateReads=!0,this.enforceActions=!0,this.spyListeners=[],this.globalReactionErrorHandlers=[],this.computedRequiresReaction=!1,this.reactionRequiresObservable=!1,this.observableRequiresReaction=!1,this.disableErrorBoundaries=!1,this.suppressReactionErrors=!1,this.useProxies=!0,this.verifyProxies=!1,this.safeDescriptors=!0},tt=!0,nt=function(){var t=n();return t.__mobxInstanceCount>0&&!t.__mobxGlobals&&(tt=!1),t.__mobxGlobals&&t.__mobxGlobals.version!==(new et).version&&(tt=!1),tt?t.__mobxGlobals?(t.__mobxInstanceCount+=1,t.__mobxGlobals.UNCHANGED||(t.__mobxGlobals.UNCHANGED={}),t.__mobxGlobals):(t.__mobxInstanceCount=1,t.__mobxGlobals=new et):(setTimeout((function(){e(35)}),1),new et)}();function rt(e,t){e.observers_.add(t),e.lowestObserverState_>t.dependenciesState_&&(e.lowestObserverState_=t.dependenciesState_)}function it(e,t){e.observers_.delete(t),0===e.observers_.size&&ot(e)}function ot(e){!1===e.isPendingUnobservation_&&(e.isPendingUnobservation_=!0,nt.pendingUnobservations.push(e))}function at(){nt.inBatch++}function st(){if(0==--nt.inBatch){ft();for(var e=nt.pendingUnobservations,t=0;t<e.length;t++){var n=e[t];n.isPendingUnobservation_=!1,0===n.observers_.size&&(n.isBeingObserved_&&(n.isBeingObserved_=!1,n.onBUO()),n instanceof Le&&n.suspend_())}nt.pendingUnobservations=[]}}function ut(e){var t=nt.trackingDerivation;return null!==t?(t.runId_!==e.lastAccessedBy_&&(e.lastAccessedBy_=t.runId_,t.newObserving_[t.unboundDepsCount_++]=e,!e.isBeingObserved_&&nt.trackingContext&&(e.isBeingObserved_=!0,e.onBO())),!0):(0===e.observers_.size&&nt.inBatch>0&&ot(e),!1)}function ct(e){e.lowestObserverState_!==Fe.STALE_&&(e.lowestObserverState_=Fe.STALE_,e.observers_.forEach((function(e){e.dependenciesState_===Fe.UP_TO_DATE_&&e.onBecomeStale_(),e.dependenciesState_=Fe.STALE_})))}var lt=function(){function t(e,t,n,r){void 0===e&&(e="Reaction"),void 0===r&&(r=!1),this.name_=void 0,this.onInvalidate_=void 0,this.errorHandler_=void 0,this.requiresObservable_=void 0,this.observing_=[],this.newObserving_=[],this.dependenciesState_=Fe.NOT_TRACKING_,this.diffValue_=0,this.runId_=0,this.unboundDepsCount_=0,this.isDisposed_=!1,this.isScheduled_=!1,this.isTrackPending_=!1,this.isRunning_=!1,this.isTracing_=ze.NONE,this.name_=e,this.onInvalidate_=t,this.errorHandler_=n,this.requiresObservable_=r}var n=t.prototype;return n.onBecomeStale_=function(){this.schedule_()},n.schedule_=function(){this.isScheduled_||(this.isScheduled_=!0,nt.pendingReactions.push(this),ft())},n.isScheduled=function(){return this.isScheduled_},n.runReaction_=function(){if(!this.isDisposed_){at(),this.isScheduled_=!1;var e=nt.trackingContext;if(nt.trackingContext=this,Ge(this)){this.isTrackPending_=!0;try{this.onInvalidate_()}catch(e){this.reportExceptionInDerivation_(e)}}nt.trackingContext=e,st()}},n.track=function(e){if(!this.isDisposed_){at(),this.isRunning_=!0;var t=nt.trackingContext;nt.trackingContext=this;var n=Ke(this,e,void 0);nt.trackingContext=t,this.isRunning_=!1,this.isTrackPending_=!1,this.isDisposed_&&qe(this),Be(n)&&this.reportExceptionInDerivation_(n.cause),st()}},n.reportExceptionInDerivation_=function(e){var t=this;if(this.errorHandler_)this.errorHandler_(e,this);else{if(nt.disableErrorBoundaries)throw e;var n="[mobx] uncaught error in '"+this+"'";nt.suppressReactionErrors||console.error(n,e),nt.globalReactionErrorHandlers.forEach((function(n){return n(e,t)}))}},n.dispose=function(){this.isDisposed_||(this.isDisposed_=!0,this.isRunning_||(at(),qe(this),st()))},n.getDisposer_=function(){var e=this.dispose.bind(this);return e[F]=this,e},n.toString=function(){return"Reaction["+this.name_+"]"},n.trace=function(t){void 0===t&&(t=!1),function(){e("trace() is not available in production builds");for(var t=!1,n=arguments.length,r=new Array(n),i=0;i<n;i++)r[i]=arguments[i];"boolean"==typeof r[r.length-1]&&(t=r.pop());var o=qt(r);if(!o)return e("'trace(break?)' can only be used inside a tracked computed value or a Reaction. Consider passing in the computed value or reaction explicitly");o.isTracing_===ze.NONE&&console.log("[mobx.trace] '"+o.name_+"' tracing enabled");o.isTracing_=t?ze.BREAK:ze.LOG}(this,t)},t}();function ft(){nt.inBatch>0||nt.isRunningReactions||function(e){e()}(pt)}function pt(){nt.isRunningReactions=!0;for(var e=nt.pendingReactions,t=0;e.length>0;){100==++t&&(console.error("[mobx] cycle in reaction: "+e[0]),e.splice(0));for(var n=e.splice(0),r=0,i=n.length;r<i;r++)n[r].runReaction_()}nt.isRunningReactions=!1}var ht=w("Reaction",lt);var bt="action",dt="autoAction",vt="<unnamed action>",yt=q(bt),gt=q("action.bound",{bound:!0}),mt=q(dt,{autoAction:!0}),_t=q("autoAction.bound",{autoAction:!0,bound:!0});function wt(e){return function(t,n){return b(t)?ke(t.name||vt,t,e):b(n)?ke(t,n,e):d(n)?M(t,n,e?mt:yt):d(t)?U(q(e?dt:bt,{name:t,autoAction:e})):void 0}}var Ot=wt(!1);Object.assign(Ot,yt);var jt=wt(!0);function Pt(e){return De(e.name,!1,e,this,void 0)}function St(e){return b(e)&&!0===e.isMobxAction}Object.assign(jt,mt),Ot.bound=U(gt),jt.bound=U(_t);var At=function(e){return e()};function xt(e){return e.scheduler?e.scheduler:e.delay?function(t){return setTimeout(t,e.delay)}:At}function Et(e,t,n){var r;void 0===n&&(n=u);var i,o,a,s=null!=(r=n.name)?r:"Reaction",c=Ot(s,n.onError?(i=n.onError,o=t,function(){try{return o.apply(this,arguments)}catch(e){i.call(this,e)}}):t),l=!n.scheduler&&!n.delay,f=xt(n),p=!0,h=!1,b=void 0,d=n.compareStructural?H.structural:n.equals||H.default,v=new lt(s,(function(){p||l?y():h||(h=!0,f(y))}),n.onError,n.requiresObservable);function y(){if(h=!1,!v.isDisposed_){var t=!1;v.track((function(){var n=function(e,t){var n=Ne(e);try{return t()}finally{Ve(n)}}(!1,(function(){return e(v)}));t=p||!d(a,n),b=a,a=n})),(p&&n.fireImmediately||!p&&t)&&c(a,b,v),p=!1}}return v.schedule_(),v.getDisposer_()}var Tt="onBO";function It(e,t,n){return Ct("onBUO",e,t,n)}function Ct(e,t,n,r){var i="function"==typeof r?Gn(t,n):Gn(t),o=b(r)?r:n,a=e+"L";return i[a]?i[a].add(o):i[a]=new Set([o]),function(){var e=i[a];e&&(e.delete(o),0===e.size&&delete i[a])}}var kt=0;function Dt(){this.message="FLOW_CANCELLED"}Dt.prototype=Object.create(Error.prototype);var Nt=X("flow"),Vt=X("flow.bound",{bound:!0}),Rt=Object.assign((function(e,t){if(d(t))return M(e,t,Nt);var n=e,r=n.name||"<unnamed flow>",i=function(){var e,t=this,i=arguments,o=++kt,a=Ot(r+" - runid: "+o+" - init",n).apply(t,i),s=void 0,u=new Promise((function(t,n){var i=0;function u(e){var t;s=void 0;try{t=Ot(r+" - runid: "+o+" - yield "+i++,a.next).call(a,e)}catch(e){return n(e)}l(t)}function c(e){var t;s=void 0;try{t=Ot(r+" - runid: "+o+" - yield "+i++,a.throw).call(a,e)}catch(e){return n(e)}l(t)}function l(e){if(!b(null==e?void 0:e.then))return e.done?t(e.value):(s=Promise.resolve(e.value)).then(u,c);e.then(l,n)}e=n,u(void 0)}));return u.cancel=Ot(r+" - runid: "+o+" - cancel",(function(){try{s&&Ut(s);var t=a.return(void 0),n=Promise.resolve(t.value);n.then(h,h),Ut(n),e(new Dt)}catch(t){e(t)}})),u};return i.isMobXFlow=!0,i}),Nt);function Ut(e){b(e.cancel)&&e.cancel()}function Mt(e){return!0===(null==e?void 0:e.isMobXFlow)}function Ft(e,t,n){var r;return Sn(e)||gn(e)||Me(e)?r=Kn(e):Vn(e)&&(r=Kn(e,t)),r.dehancer="function"==typeof t?t:n,function(){r.dehancer=void 0}}function zt(e,t,n){return b(n)?function(e,t,n){return Kn(e,t).intercept_(n)}(e,t,n):function(e,t){return Kn(e).intercept_(t)}(e,t)}function Lt(e){return function(e,t){return!!e&&(void 0!==t?!!Vn(e)&&e[F].values_.has(t):Vn(e)||!!e[F]||L(e)||ht(e)||$e(e))}(e)}function $t(t){return Vn(t)?t[F].keys_():Sn(t)||En(t)?Array.from(t.keys()):gn(t)?t.map((function(e,t){return t})):void e(5)}function Ht(t){return Vn(t)?$t(t).map((function(e){return t[e]})):Sn(t)?$t(t).map((function(e){return t.get(e)})):En(t)?Array.from(t.values()):gn(t)?t.slice():void e(6)}function Bt(t,n,r){if(2!==arguments.length||En(t))Vn(t)?t[F].set_(n,r):Sn(t)?t.set(n,r):En(t)?t.add(n):gn(t)?("number"!=typeof n&&(n=parseInt(n,10)),n<0&&e("Invalid index: '"+n+"'"),at(),n>=t.length&&(t.length=n+1),t[n]=r,st()):e(8);else{at();var i=n;try{for(var o in i)Bt(t,o,i[o])}finally{st()}}}function Gt(t,n,r){if(Vn(t))return t[F].defineProperty_(n,r);e(39)}function Kt(e,t,n,r){return b(n)?function(e,t,n,r){return Kn(e,t).observe_(n,r)}(e,t,n,r):function(e,t,n){return Kn(e).observe_(t,n)}(e,t,n)}function qt(e){switch(e.length){case 0:return nt.trackingDerivation;case 1:return Gn(e[0]);case 2:return Gn(e[0],e[1])}}function Wt(e,t){void 0===t&&(t=void 0),at();try{return e.apply(t)}finally{st()}}function Yt(e){return e[F]}Rt.bound=U(Vt);var Qt={has:function(e,t){return Yt(e).has_(t)},get:function(e,t){return Yt(e).get_(t)},set:function(e,t,n){var r;return!!d(t)&&(null==(r=Yt(e).set_(t,n,!0))||r)},deleteProperty:function(e,t){var n;return!!d(t)&&(null==(n=Yt(e).delete_(t,!0))||n)},defineProperty:function(e,t,n){var r;return null==(r=Yt(e).defineProperty_(t,n))||r},ownKeys:function(e){return Yt(e).ownKeys_()},preventExtensions:function(t){e(13)}};function Xt(e){return void 0!==e.interceptors_&&e.interceptors_.length>0}function Zt(e,t){var n=e.interceptors_||(e.interceptors_=[]);return n.push(t),p((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function Jt(t,n){var r=Ye();try{for(var i=[].concat(t.interceptors_||[]),o=0,a=i.length;o<a&&((n=i[o](n))&&!n.type&&e(14),n);o++);return n}finally{Qe(r)}}function en(e){return void 0!==e.changeListeners_&&e.changeListeners_.length>0}function tn(e,t){var n=e.changeListeners_||(e.changeListeners_=[]);return n.push(t),p((function(){var e=n.indexOf(t);-1!==e&&n.splice(e,1)}))}function nn(e,t){var n=Ye(),r=e.changeListeners_;if(r){for(var i=0,o=(r=r.slice()).length;i<o;i++)r[i](t);Qe(n)}}function rn(e,t,n){var r=kn(e,n)[F];at();try{null!=t||(t=function(e){return x(e,R)||m(e,R,C({},e[R])),e[R]}(e)),S(t).forEach((function(e){return r.make_(e,t[e])}))}finally{st()}return e}var on="splice",an="update",sn={get:function(e,t){var n=e[F];return t===F?n:"length"===t?n.getArrayLength_():"string"!=typeof t||isNaN(t)?x(ln,t)?ln[t]:e[t]:n.get_(parseInt(t))},set:function(e,t,n){var r=e[F];return"length"===t&&r.setArrayLength_(n),"symbol"==typeof t||isNaN(t)?e[t]=n:r.set_(parseInt(t),n),!0},preventExtensions:function(){e(15)}},un=function(){function t(e,t,n,r){void 0===e&&(e="ObservableArray"),this.owned_=void 0,this.legacyMode_=void 0,this.atom_=void 0,this.values_=[],this.interceptors_=void 0,this.changeListeners_=void 0,this.enhancer_=void 0,this.dehancer=void 0,this.proxy_=void 0,this.lastKnownLength_=0,this.owned_=n,this.legacyMode_=r,this.atom_=new z(e),this.enhancer_=function(e,n){return t(e,n,"ObservableArray[..]")}}var n=t.prototype;return n.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.dehanceValues_=function(e){return void 0!==this.dehancer&&e.length>0?e.map(this.dehancer):e},n.intercept_=function(e){return Zt(this,e)},n.observe_=function(e,t){return void 0===t&&(t=!1),t&&e({observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:"splice",index:0,added:this.values_.slice(),addedCount:this.values_.length,removed:[],removedCount:0}),tn(this,e)},n.getArrayLength_=function(){return this.atom_.reportObserved(),this.values_.length},n.setArrayLength_=function(t){("number"!=typeof t||t<0)&&e("Out of range: "+t);var n=this.values_.length;if(t!==n)if(t>n){for(var r=new Array(t-n),i=0;i<t-n;i++)r[i]=void 0;this.spliceWithArray_(n,0,r)}else this.spliceWithArray_(t,n-t)},n.updateArrayLength_=function(t,n){t!==this.lastKnownLength_&&e(16),this.lastKnownLength_+=n,this.legacyMode_&&n>0&&Hn(t+n+1)},n.spliceWithArray_=function(e,t,n){var r=this;this.atom_;var i=this.values_.length;if(void 0===e?e=0:e>i?e=i:e<0&&(e=Math.max(0,i+e)),t=1===arguments.length?i-e:null==t?0:Math.max(0,Math.min(t,i-e)),void 0===n&&(n=s),Xt(this)){var o=Jt(this,{object:this.proxy_,type:on,index:e,removedCount:t,added:n});if(!o)return s;t=o.removedCount,n=o.added}if(n=0===n.length?n:n.map((function(e){return r.enhancer_(e,void 0)})),this.legacyMode_){var a=n.length-t;this.updateArrayLength_(i,a)}var u=this.spliceItemsIntoValues_(e,t,n);return 0===t&&0===n.length||this.notifyArraySplice_(e,n,u),this.dehanceValues_(u)},n.spliceItemsIntoValues_=function(e,t,n){var r;if(n.length<1e4)return(r=this.values_).splice.apply(r,[e,t].concat(n));var i=this.values_.slice(e,e+t),o=this.values_.slice(e+t);this.values_.length=e+n.length-t;for(var a=0;a<n.length;a++)this.values_[e+a]=n[a];for(var s=0;s<o.length;s++)this.values_[e+n.length+s]=o[s];return i},n.notifyArrayChildUpdate_=function(e,t,n){var r=!this.owned_&&!1,i=en(this),o=i||r?{observableKind:"array",object:this.proxy_,type:an,debugObjectName:this.atom_.name_,index:e,newValue:t,oldValue:n}:null;this.atom_.reportChanged(),i&&nn(this,o)},n.notifyArraySplice_=function(e,t,n){var r=!this.owned_&&!1,i=en(this),o=i||r?{observableKind:"array",object:this.proxy_,debugObjectName:this.atom_.name_,type:on,index:e,removed:n,added:t,removedCount:n.length,addedCount:t.length}:null;this.atom_.reportChanged(),i&&nn(this,o)},n.get_=function(e){if(e<this.values_.length)return this.atom_.reportObserved(),this.dehanceValue_(this.values_[e]);console.warn("[mobx.array] Attempt to read an array index ("+e+") that is out of bounds ("+this.values_.length+"). Please check length first. Out of bound indices will not be tracked by MobX")},n.set_=function(t,n){var r=this.values_;if(t<r.length){this.atom_;var i=r[t];if(Xt(this)){var o=Jt(this,{type:an,object:this.proxy_,index:t,newValue:n});if(!o)return;n=o.newValue}(n=this.enhancer_(n,i))!==i&&(r[t]=n,this.notifyArrayChildUpdate_(t,n,i))}else t===r.length?this.spliceWithArray_(t,0,[n]):e(17,t,r.length)},t}();function cn(e,t,n,r){void 0===n&&(n="ObservableArray"),void 0===r&&(r=!1),f();var i=new un(n,t,r,!1);_(i.values_,F,i);var o=new Proxy(i.values_,sn);if(i.proxy_=o,e&&e.length){var a=Ne(!0);i.spliceWithArray_(0,0,e),Ve(a)}return o}var ln={clear:function(){return this.splice(0)},replace:function(e){var t=this[F];return t.spliceWithArray_(0,t.values_.length,e)},toJSON:function(){return this.slice()},splice:function(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];var o=this[F];switch(arguments.length){case 0:return[];case 1:return o.spliceWithArray_(e);case 2:return o.spliceWithArray_(e,t)}return o.spliceWithArray_(e,t,r)},spliceWithArray:function(e,t,n){return this[F].spliceWithArray_(e,t,n)},push:function(){for(var e=this[F],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(e.values_.length,0,n),e.values_.length},pop:function(){return this.splice(Math.max(this[F].values_.length-1,0),1)[0]},shift:function(){return this.splice(0,1)[0]},unshift:function(){for(var e=this[F],t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.spliceWithArray_(0,0,n),e.values_.length},reverse:function(){return nt.trackingDerivation&&e(37,"reverse"),this.replace(this.slice().reverse()),this},sort:function(){nt.trackingDerivation&&e(37,"sort");var t=this.slice();return t.sort.apply(t,arguments),this.replace(t),this},remove:function(e){var t=this[F],n=t.dehanceValues_(t.values_).indexOf(e);return n>-1&&(this.splice(n,1),!0)}};function fn(e,t){"function"==typeof Array.prototype[e]&&(ln[e]=t(e))}function pn(e){return function(){var t=this[F];t.atom_.reportObserved();var n=t.dehanceValues_(t.values_);return n[e].apply(n,arguments)}}function hn(e){return function(t,n){var r=this,i=this[F];return i.atom_.reportObserved(),i.dehanceValues_(i.values_)[e]((function(e,i){return t.call(n,e,i,r)}))}}function bn(e){return function(){var t=this,n=this[F];n.atom_.reportObserved();var r=n.dehanceValues_(n.values_),i=arguments[0];return arguments[0]=function(e,n,r){return i(e,n,r,t)},r[e].apply(r,arguments)}}fn("concat",pn),fn("flat",pn),fn("includes",pn),fn("indexOf",pn),fn("join",pn),fn("lastIndexOf",pn),fn("slice",pn),fn("toString",pn),fn("toLocaleString",pn),fn("every",hn),fn("filter",hn),fn("find",hn),fn("findIndex",hn),fn("flatMap",hn),fn("forEach",hn),fn("map",hn),fn("some",hn),fn("reduce",bn),fn("reduceRight",bn);var dn,vn,yn=w("ObservableArrayAdministration",un);function gn(e){return v(e)&&yn(e[F])}var mn={},_n="add",wn="delete";dn=Symbol.iterator,vn=Symbol.toStringTag;var On,jn,Pn=function(){function t(t,n,r){void 0===n&&(n=B),void 0===r&&(r="ObservableMap"),this.enhancer_=void 0,this.name_=void 0,this[F]=mn,this.data_=void 0,this.hasMap_=void 0,this.keysAtom_=void 0,this.interceptors_=void 0,this.changeListeners_=void 0,this.dehancer=void 0,this.enhancer_=n,this.name_=r,b(Map)||e(18),this.keysAtom_=$("ObservableMap.keys()"),this.data_=new Map,this.hasMap_=new Map,this.merge(t)}var n=t.prototype;return n.has_=function(e){return this.data_.has(e)},n.has=function(e){var t=this;if(!nt.trackingDerivation)return this.has_(e);var n=this.hasMap_.get(e);if(!n){var r=n=new Ue(this.has_(e),G,"ObservableMap.key?",!1);this.hasMap_.set(e,r),It(r,(function(){return t.hasMap_.delete(e)}))}return n.get()},n.set=function(e,t){var n=this.has_(e);if(Xt(this)){var r=Jt(this,{type:n?an:_n,object:this,newValue:t,name:e});if(!r)return this;t=r.newValue}return n?this.updateValue_(e,t):this.addValue_(e,t),this},n.delete=function(e){var t=this;if((this.keysAtom_,Xt(this))&&!Jt(this,{type:wn,object:this,name:e}))return!1;if(this.has_(e)){var n=en(this),r=n?{observableKind:"map",debugObjectName:this.name_,type:wn,object:this,oldValue:this.data_.get(e).value_,name:e}:null;return Wt((function(){t.keysAtom_.reportChanged(),t.updateHasMapEntry_(e,!1),t.data_.get(e).setNewValue_(void 0),t.data_.delete(e)})),n&&nn(this,r),!0}return!1},n.updateHasMapEntry_=function(e,t){var n=this.hasMap_.get(e);n&&n.setNewValue_(t)},n.updateValue_=function(e,t){var n=this.data_.get(e);if((t=n.prepareNewValue_(t))!==nt.UNCHANGED){var r=en(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:an,object:this,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),r&&nn(this,i)}},n.addValue_=function(e,t){var n=this;this.keysAtom_,Wt((function(){var r=new Ue(t,n.enhancer_,"ObservableMap.key",!1);n.data_.set(e,r),t=r.value_,n.updateHasMapEntry_(e,!0),n.keysAtom_.reportChanged()}));var r=en(this),i=r?{observableKind:"map",debugObjectName:this.name_,type:_n,object:this,name:e,newValue:t}:null;r&&nn(this,i)},n.get=function(e){return this.has(e)?this.dehanceValue_(this.data_.get(e).get()):this.dehanceValue_(void 0)},n.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.keys=function(){return this.keysAtom_.reportObserved(),this.data_.keys()},n.values=function(){var e=this,t=this.keys();return Zn({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:e.get(i)}}})},n.entries=function(){var e=this,t=this.keys();return Zn({next:function(){var n=t.next(),r=n.done,i=n.value;return{done:r,value:r?void 0:[i,e.get(i)]}}})},n[dn]=function(){return this.entries()},n.forEach=function(e,t){for(var n,r=V(this);!(n=r()).done;){var i=n.value,o=i[0],a=i[1];e.call(t,a,o,this)}},n.merge=function(t){var n=this;return Sn(t)&&(t=new Map(t)),Wt((function(){y(t)?function(e){var t=Object.keys(e);if(!P)return t;var n=Object.getOwnPropertySymbols(e);return n.length?[].concat(t,n.filter((function(t){return a.propertyIsEnumerable.call(e,t)}))):t}(t).forEach((function(e){return n.set(e,t[e])})):Array.isArray(t)?t.forEach((function(e){var t=e[0],r=e[1];return n.set(t,r)})):O(t)?(t.constructor!==Map&&e(19,t),t.forEach((function(e,t){return n.set(t,e)}))):null!=t&&e(20,t)})),this},n.clear=function(){var e=this;Wt((function(){We((function(){for(var t,n=V(e.keys());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},n.replace=function(t){var n=this;return Wt((function(){for(var r,i=function(t){if(O(t)||Sn(t))return t;if(Array.isArray(t))return new Map(t);if(y(t)){var n=new Map;for(var r in t)n.set(r,t[r]);return n}return e(21,t)}(t),o=new Map,a=!1,s=V(n.data_.keys());!(r=s()).done;){var u=r.value;if(!i.has(u))if(n.delete(u))a=!0;else{var c=n.data_.get(u);o.set(u,c)}}for(var l,f=V(i.entries());!(l=f()).done;){var p=l.value,h=p[0],b=p[1],d=n.data_.has(h);if(n.set(h,b),n.data_.has(h)){var v=n.data_.get(h);o.set(h,v),d||(a=!0)}}if(!a)if(n.data_.size!==o.size)n.keysAtom_.reportChanged();else for(var g=n.data_.keys(),m=o.keys(),_=g.next(),w=m.next();!_.done;){if(_.value!==w.value){n.keysAtom_.reportChanged();break}_=g.next(),w=m.next()}n.data_=o})),this},n.toString=function(){return"[object ObservableMap]"},n.toJSON=function(){return Array.from(this)},n.observe_=function(e,t){return tn(this,e)},n.intercept_=function(e){return Zt(this,e)},I(t,[{key:"size",get:function(){return this.keysAtom_.reportObserved(),this.data_.size}},{key:vn,get:function(){return"Map"}}]),t}(),Sn=w("ObservableMap",Pn);var An={};On=Symbol.iterator,jn=Symbol.toStringTag;var xn=function(){function t(t,n,r){void 0===n&&(n=B),void 0===r&&(r="ObservableSet"),this.name_=void 0,this[F]=An,this.data_=new Set,this.atom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.dehancer=void 0,this.enhancer_=void 0,this.name_=r,b(Set)||e(22),this.atom_=$(this.name_),this.enhancer_=function(e,t){return n(e,t,r)},t&&this.replace(t)}var n=t.prototype;return n.dehanceValue_=function(e){return void 0!==this.dehancer?this.dehancer(e):e},n.clear=function(){var e=this;Wt((function(){We((function(){for(var t,n=V(e.data_.values());!(t=n()).done;){var r=t.value;e.delete(r)}}))}))},n.forEach=function(e,t){for(var n,r=V(this);!(n=r()).done;){var i=n.value;e.call(t,i,i,this)}},n.add=function(e){var t=this;if((this.atom_,Xt(this))&&!Jt(this,{type:_n,object:this,newValue:e}))return this;if(!this.has(e)){Wt((function(){t.data_.add(t.enhancer_(e,void 0)),t.atom_.reportChanged()}));var n=en(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:_n,object:this,newValue:e}:null;n&&nn(this,r)}return this},n.delete=function(e){var t=this;if(Xt(this)&&!Jt(this,{type:wn,object:this,oldValue:e}))return!1;if(this.has(e)){var n=en(this),r=n?{observableKind:"set",debugObjectName:this.name_,type:wn,object:this,oldValue:e}:null;return Wt((function(){t.atom_.reportChanged(),t.data_.delete(e)})),n&&nn(this,r),!0}return!1},n.has=function(e){return this.atom_.reportObserved(),this.data_.has(this.dehanceValue_(e))},n.entries=function(){var e=0,t=Array.from(this.keys()),n=Array.from(this.values());return Zn({next:function(){var r=e;return e+=1,r<n.length?{value:[t[r],n[r]],done:!1}:{done:!0}}})},n.keys=function(){return this.values()},n.values=function(){this.atom_.reportObserved();var e=this,t=0,n=Array.from(this.data_.values());return Zn({next:function(){return t<n.length?{value:e.dehanceValue_(n[t++]),done:!1}:{done:!0}}})},n.replace=function(t){var n=this;return En(t)&&(t=new Set(t)),Wt((function(){Array.isArray(t)||j(t)?(n.clear(),t.forEach((function(e){return n.add(e)}))):null!=t&&e("Cannot initialize set from "+t)})),this},n.observe_=function(e,t){return tn(this,e)},n.intercept_=function(e){return Zt(this,e)},n.toJSON=function(){return Array.from(this)},n.toString=function(){return"[object ObservableSet]"},n[On]=function(){return this.values()},I(t,[{key:"size",get:function(){return this.atom_.reportObserved(),this.data_.size}},{key:jn,get:function(){return"Set"}}]),t}(),En=w("ObservableSet",xn),Tn=Object.create(null),In="remove",Cn=function(){function t(e,t,n,r){void 0===t&&(t=new Map),void 0===r&&(r=se),this.target_=void 0,this.values_=void 0,this.name_=void 0,this.defaultAnnotation_=void 0,this.keysAtom_=void 0,this.changeListeners_=void 0,this.interceptors_=void 0,this.proxy_=void 0,this.isPlainObject_=void 0,this.appliedAnnotations_=void 0,this.pendingKeys_=void 0,this.target_=e,this.values_=t,this.name_=n,this.defaultAnnotation_=r,this.keysAtom_=new z("ObservableObject.keys"),this.isPlainObject_=y(this.target_)}var n=t.prototype;return n.getObservablePropValue_=function(e){return this.values_.get(e).get()},n.setObservablePropValue_=function(e,t){var n=this.values_.get(e);if(n instanceof Le)return n.set(t),!0;if(Xt(this)){var r=Jt(this,{type:an,object:this.proxy_||this.target_,name:e,newValue:t});if(!r)return null;t=r.newValue}if((t=n.prepareNewValue_(t))!==nt.UNCHANGED){var i=en(this),o=i?{type:an,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,oldValue:n.value_,name:e,newValue:t}:null;n.setNewValue_(t),i&&nn(this,o)}return!0},n.get_=function(e){return nt.trackingDerivation&&!x(this.target_,e)&&this.has_(e),this.target_[e]},n.set_=function(e,t,n){return void 0===n&&(n=!1),x(this.target_,e)?this.values_.has(e)?this.setObservablePropValue_(e,t):n?Reflect.set(this.target_,e,t):(this.target_[e]=t,!0):this.extend_(e,{value:t,enumerable:!0,writable:!0,configurable:!0},this.defaultAnnotation_,n)},n.has_=function(e){if(!nt.trackingDerivation)return e in this.target_;this.pendingKeys_||(this.pendingKeys_=new Map);var t=this.pendingKeys_.get(e);return t||(t=new Ue(e in this.target_,G,"ObservableObject.key?",!1),this.pendingKeys_.set(e,t)),t.get()},n.make_=function(t,n){if(!0===n&&(n=this.defaultAnnotation_),!1!==n){if(!(t in this.target_)){var r;if(null==(r=this.target_[R])?void 0:r[t])return;e(1,n.annotationType_,this.name_+"."+t.toString())}for(var o=this.target_;o&&o!==a;){var s=i(o,t);if(s){var u=n.make_(this,t,s,o);if(0===u)return;if(1===u)break}o=Object.getPrototypeOf(o)}Rn(this,n,t)}},n.extend_=function(e,t,n,r){if(void 0===r&&(r=!1),!0===n&&(n=this.defaultAnnotation_),!1===n)return this.defineProperty_(e,t,r);var i=n.extend_(this,e,t,r);return i&&Rn(this,n,e),i},n.defineProperty_=function(e,t,n){void 0===n&&(n=!1);try{at();var r=this.delete_(e);if(!r)return r;if(Xt(this)){var i=Jt(this,{object:this.proxy_||this.target_,name:e,type:_n,newValue:t.value});if(!i)return null;var a=i.newValue;t.value!==a&&(t=C({},t,{value:a}))}if(n){if(!Reflect.defineProperty(this.target_,e,t))return!1}else o(this.target_,e,t);this.notifyPropertyAddition_(e,t.value)}finally{st()}return!0},n.defineObservableProperty_=function(e,t,n,r){void 0===r&&(r=!1);try{at();var i=this.delete_(e);if(!i)return i;if(Xt(this)){var a=Jt(this,{object:this.proxy_||this.target_,name:e,type:_n,newValue:t});if(!a)return null;t=a.newValue}var s=Nn(e),u={configurable:!nt.safeDescriptors||this.isPlainObject_,enumerable:!0,get:s.get,set:s.set};if(r){if(!Reflect.defineProperty(this.target_,e,u))return!1}else o(this.target_,e,u);var c=new Ue(t,n,"ObservableObject.key",!1);this.values_.set(e,c),this.notifyPropertyAddition_(e,c.value_)}finally{st()}return!0},n.defineComputedProperty_=function(e,t,n){void 0===n&&(n=!1);try{at();var r=this.delete_(e);if(!r)return r;if(Xt(this))if(!Jt(this,{object:this.proxy_||this.target_,name:e,type:_n,newValue:void 0}))return null;t.name||(t.name="ObservableObject.key"),t.context=this.proxy_||this.target_;var i=Nn(e),a={configurable:!nt.safeDescriptors||this.isPlainObject_,enumerable:!1,get:i.get,set:i.set};if(n){if(!Reflect.defineProperty(this.target_,e,a))return!1}else o(this.target_,e,a);this.values_.set(e,new Le(t)),this.notifyPropertyAddition_(e,void 0)}finally{st()}return!0},n.delete_=function(e,t){if(void 0===t&&(t=!1),!x(this.target_,e))return!0;if(Xt(this)&&!Jt(this,{object:this.proxy_||this.target_,name:e,type:In}))return null;try{var n,r;at();var o,a=en(this),s=this.values_.get(e),u=void 0;if(!s&&a)u=null==(o=i(this.target_,e))?void 0:o.value;if(t){if(!Reflect.deleteProperty(this.target_,e))return!1}else delete this.target_[e];if(s&&(this.values_.delete(e),s instanceof Ue&&(u=s.value_),ct(s)),this.keysAtom_.reportChanged(),null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(e in this.target_),a){var c={type:In,observableKind:"object",object:this.proxy_||this.target_,debugObjectName:this.name_,oldValue:u,name:e};0,a&&nn(this,c)}}finally{st()}return!0},n.observe_=function(e,t){return tn(this,e)},n.intercept_=function(e){return Zt(this,e)},n.notifyPropertyAddition_=function(e,t){var n,r,i=en(this);if(i){var o=i?{type:_n,observableKind:"object",debugObjectName:this.name_,object:this.proxy_||this.target_,name:e,newValue:t}:null;i&&nn(this,o)}null==(n=this.pendingKeys_)||null==(r=n.get(e))||r.set(!0),this.keysAtom_.reportChanged()},n.ownKeys_=function(){return this.keysAtom_.reportObserved(),S(this.target_)},n.keys_=function(){return this.keysAtom_.reportObserved(),Object.keys(this.target_)},t}();function kn(e,t){var n;if(x(e,F))return e;var r=null!=(n=null==t?void 0:t.name)?n:"ObservableObject",i=new Cn(e,new Map,String(r),function(e){var t;return e?null!=(t=e.defaultDecorator)?t:ue(e):void 0}(t));return m(e,F,i),e}var Dn=w("ObservableObjectAdministration",Cn);function Nn(e){return Tn[e]||(Tn[e]={get:function(){return this[F].getObservablePropValue_(e)},set:function(t){return this[F].setObservablePropValue_(e,t)}})}function Vn(e){return!!v(e)&&Dn(e[F])}function Rn(e,t,n){var r;null==(r=e.target_[R])||delete r[n]}var Un,Mn,Fn=0,zn=function(){};Un=zn,Mn=Array.prototype,Object.setPrototypeOf?Object.setPrototypeOf(Un.prototype,Mn):void 0!==Un.prototype.__proto__?Un.prototype.__proto__=Mn:Un.prototype=Mn;var Ln=function(e){function t(t,n,r,i){var o;void 0===r&&(r="ObservableArray"),void 0===i&&(i=!1),o=e.call(this)||this;var a=new un(r,n,i,!0);if(a.proxy_=D(o),_(D(o),F,a),t&&t.length){var s=Ne(!0);o.spliceWithArray(0,0,t),Ve(s)}return o}k(t,e);var n=t.prototype;return n.concat=function(){this[F].atom_.reportObserved();for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Array.prototype.concat.apply(this.slice(),t.map((function(e){return gn(e)?e.slice():e})))},n[Symbol.iterator]=function(){var e=this,t=0;return Zn({next:function(){return t<e.length?{value:e[t++],done:!1}:{done:!0,value:void 0}}})},I(t,[{key:"length",get:function(){return this[F].getArrayLength_()},set:function(e){this[F].setArrayLength_(e)}},{key:Symbol.toStringTag,get:function(){return"Array"}}]),t}(zn);function $n(e){o(Ln.prototype,""+e,function(e){return{enumerable:!1,configurable:!0,get:function(){return this[F].get_(e)},set:function(t){this[F].set_(e,t)}}}(e))}function Hn(e){if(e>Fn){for(var t=Fn;t<e+100;t++)$n(t);Fn=e}}function Bn(e,t,n){return new Ln(e,t,n)}function Gn(t,n){if("object"==typeof t&&null!==t){if(gn(t))return void 0!==n&&e(23),t[F].atom_;if(En(t))return t[F];if(Sn(t)){if(void 0===n)return t.keysAtom_;var r=t.data_.get(n)||t.hasMap_.get(n);return r||e(25,n,qn(t)),r}if(Vn(t)){if(!n)return e(26);var i=t[F].values_.get(n);return i||e(27,n,qn(t)),i}if(L(t)||$e(t)||ht(t))return t}else if(b(t)&&ht(t[F]))return t[F];e(28)}function Kn(t,n){return t||e(29),void 0!==n?Kn(Gn(t,n)):L(t)||$e(t)||ht(t)||Sn(t)||En(t)?t:t[F]?t[F]:void e(24,t)}function qn(e,t){var n;if(void 0!==t)n=Gn(e,t);else{if(St(e))return e.name;n=Vn(e)||Sn(e)||En(e)?Kn(e):Gn(e)}return n.name_}Object.entries(ln).forEach((function(e){var t=e[0],n=e[1];"concat"!==t&&m(Ln.prototype,t,n)})),Hn(1e3);var Wn=a.toString;function Yn(e,t,n){return void 0===n&&(n=-1),Qn(e,t,n)}function Qn(e,t,n,r,i){if(e===t)return 0!==e||1/e==1/t;if(null==e||null==t)return!1;if(e!=e)return t!=t;var o=typeof e;if(!b(o)&&"object"!==o&&"object"!=typeof t)return!1;var a=Wn.call(e);if(a!==Wn.call(t))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+e==""+t;case"[object Number]":return+e!=+e?+t!=+t:0==+e?1/+e==1/t:+e==+t;case"[object Date]":case"[object Boolean]":return+e==+t;case"[object Symbol]":return"undefined"!=typeof Symbol&&Symbol.valueOf.call(e)===Symbol.valueOf.call(t);case"[object Map]":case"[object Set]":n>=0&&n++}e=Xn(e),t=Xn(t);var s="[object Array]"===a;if(!s){if("object"!=typeof e||"object"!=typeof t)return!1;var u=e.constructor,c=t.constructor;if(u!==c&&!(b(u)&&u instanceof u&&b(c)&&c instanceof c)&&"constructor"in e&&"constructor"in t)return!1}if(0===n)return!1;n<0&&(n=-1),i=i||[];for(var l=(r=r||[]).length;l--;)if(r[l]===e)return i[l]===t;if(r.push(e),i.push(t),s){if((l=e.length)!==t.length)return!1;for(;l--;)if(!Qn(e[l],t[l],n-1,r,i))return!1}else{var f,p=Object.keys(e);if(l=p.length,Object.keys(t).length!==l)return!1;for(;l--;)if(!x(t,f=p[l])||!Qn(e[f],t[f],n-1,r,i))return!1}return r.pop(),i.pop(),!0}function Xn(e){return gn(e)?e.slice():O(e)||Sn(e)||j(e)||En(e)?Array.from(e.entries()):e}function Zn(e){return e[Symbol.iterator]=Jn,e}function Jn(){return this}["Symbol","Map","Set","Symbol"].forEach((function(t){void 0===n()[t]&&e("MobX requires global '"+t+"' to be available or polyfilled")})),"object"==typeof __MOBX_DEVTOOLS_GLOBAL_HOOK__&&__MOBX_DEVTOOLS_GLOBAL_HOOK__.injectMobx({spy:function(e){return console.warn("[mobx.spy] Is a no-op in production builds"),function(){}},extras:{getDebugName:qn},$mobx:F});var er;!function(e){e.afterCreate="afterCreate",e.afterAttach="afterAttach",e.afterCreationFinalization="afterCreationFinalization",e.beforeDetach="beforeDetach",e.beforeDestroy="beforeDestroy"}(er||(er={}));
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */
var tr=function(e,t){return(tr=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function nr(e,t){function n(){this.constructor=e}tr(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}var rr=function(){return(rr=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e}).apply(this,arguments)};function ir(e){var t="function"==typeof Symbol&&Symbol.iterator,n=t&&e[t],r=0;if(n)return n.call(e);if(e&&"number"==typeof e.length)return{next:function(){return e&&r>=e.length&&(e=void 0),{value:e&&e[r++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function or(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,i,o=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=o.next()).done;)a.push(r.value)}catch(e){i={error:e}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return a}function ar(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(or(arguments[t]));return e}function sr(e){return Br(e).type}function ur(e,t){Br(e).applyPatches(ri(t))}function cr(e,t){void 0===t&&(t=!0);var n=Br(e);return t?n.snapshot:n.type.getSnapshot(n,!1)}function lr(e){return Br(e).root.storedValue}var fr=function(){function e(e,t,n,r){Object.defineProperty(this,"type",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"environment",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(this,"_escapedSubpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_subpathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_pathUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"storedValue",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"aliveAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_state",{enumerable:!0,configurable:!0,writable:!0,value:Mr.INITIALIZING}),Object.defineProperty(this,"_hookSubscribers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_parent",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"pathAtom",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.environment=r,this.baseSetParent(t,n)}return Object.defineProperty(e.prototype,"subpath",{get:function(){return this._subpath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subpathUponDeath",{get:function(){return this._subpathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pathUponDeath",{get:function(){return this._pathUponDeath},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"value",{get:function(){return this.type.getValue(this)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"state",{get:function(){return this._state},set:function(e){var t=this.isAlive;this._state=e;var n=this.isAlive;this.aliveAtom&&t!==n&&this.aliveAtom.reportChanged()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"fireInternalHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._hookSubscribers&&this._hookSubscribers.emit(e,this,e)}}),Object.defineProperty(e.prototype,"registerHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._hookSubscribers||(this._hookSubscribers=new ci),this._hookSubscribers.register(e,t)}}),Object.defineProperty(e.prototype,"parent",{get:function(){return this._parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseSetParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._parent=e,this._subpath=t,this._escapedSubpath=void 0,this.pathAtom&&this.pathAtom.reportChanged()}}),Object.defineProperty(e.prototype,"path",{get:function(){return this.getEscapedPath(!0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getEscapedPath",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e&&(this.pathAtom||(this.pathAtom=$("path")),this.pathAtom.reportObserved()),this.parent?(void 0===this._escapedSubpath&&(this._escapedSubpath=this._subpath?bi(this._subpath):""),this.parent.getEscapedPath(e)+"/"+this._escapedSubpath):""}}),Object.defineProperty(e.prototype,"isRoot",{get:function(){return null===this.parent},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isAlive",{get:function(){return this.state!==Mr.DEAD},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isDetaching",{get:function(){return this.state===Mr.DETACHING},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"observableIsAlive",{get:function(){return this.aliveAtom||(this.aliveAtom=$("alive")),this.aliveAtom.reportObserved(),this.isAlive},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"baseFinalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.state===Mr.CREATED){if(this.parent){if(this.parent.state!==Mr.FINALIZED)return;this.fireHook(er.afterAttach)}this.state=Mr.FINALIZED,e&&e()}}}),Object.defineProperty(e.prototype,"baseFinalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._hookSubscribers&&this._hookSubscribers.clearAll(),this._subpathUponDeath=this._subpath,this._pathUponDeath=this.getEscapedPath(!1),this.baseSetParent(null,""),this.state=Mr.DEAD}}),Object.defineProperty(e.prototype,"baseAboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.fireHook(er.beforeDestroy)}}),e}(),pr=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;try{a.storedValue=t.createNewInstance(o)}catch(e){throw a.state=Mr.DEAD,e}return a.state=Mr.CREATED,a.finalizeCreation(),a}return nr(t,e),Object.defineProperty(t.prototype,"root",{get:function(){if(!this.parent)throw Jr("This scalar node is not part of a tree");return this.parent.root},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.parent!==e,r=this.subpath!==t;(n||r)&&(this.environment=void 0,this.baseSetParent(this.parent,t))}}),Object.defineProperty(t.prototype,"snapshot",{get:function(){return this.getSnapshot()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(t.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(this.isAlive?this.path:this.pathUponDeath)||"<root>";return this.type.name+"@"+e+(this.isAlive?"":" [dead]")}}),Object.defineProperty(t.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isAlive&&this.state!==Mr.DETACHING&&(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(t.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeCreation()}}),Object.defineProperty(t.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseAboutToDie()}}),Object.defineProperty(t.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.baseFinalizeDeath()}}),Object.defineProperty(t.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.fireInternalHook(e)}}),t}(fr);pr.prototype.die=Ot(pr.prototype.die);var hr,br,dr=1,vr={onError:function(e){throw e}},yr=function(e){function t(t,n,r,i,o){var a=e.call(this,t,n,r,i)||this;if(Object.defineProperty(a,"nodeId",{enumerable:!0,configurable:!0,writable:!0,value:++dr}),Object.defineProperty(a,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"unnormalizedIdentifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"identifierCache",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"isProtectionEnabled",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_applyPatches",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_applySnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_autoUnbox",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(a,"_isRunningAction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"_hasSnapshotReaction",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"_observableInstanceState",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(a,"_childNodes",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_initialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_cachedInitialSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_cachedInitialSnapshotCreated",{enumerable:!0,configurable:!0,writable:!0,value:!1}),Object.defineProperty(a,"_snapshotComputed",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_snapshotUponDeath",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(a,"_internalEvents",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),a._snapshotComputed=Ae((function(){return a.getSnapshot()})),a.unbox=a.unbox.bind(a),a._initialSnapshot=o,a.identifierAttribute=t.identifierAttribute,n||(a.identifierCache=new zr),a._childNodes=t.initializeChildNodes(a,a._initialSnapshot),a.identifier=null,a.unnormalizedIdentifier=null,a.identifierAttribute&&a._initialSnapshot){var s=a._initialSnapshot[a.identifierAttribute];if(void 0===s){var u=a._childNodes[a.identifierAttribute];u&&(s=u.value)}if("string"!=typeof s&&"number"!=typeof s)throw Jr("Instance identifier '"+a.identifierAttribute+"' for type '"+a.type.name+"' must be a string or a number");a.identifier=ho(s),a.unnormalizedIdentifier=s}return n?n.root.identifierCache.addNodeToCache(a):a.identifierCache.addNodeToCache(a),a}return nr(t,e),Object.defineProperty(t.prototype,"applyPatches",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.createObservableInstanceIfNeeded(),this._applyPatches(e)}}),Object.defineProperty(t.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.createObservableInstanceIfNeeded(),this._applySnapshot(e)}}),Object.defineProperty(t.prototype,"createObservableInstanceIfNeeded",{enumerable:!1,configurable:!0,writable:!0,value:function(){0===this._observableInstanceState&&this.createObservableInstance()}}),Object.defineProperty(t.prototype,"createObservableInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e,t;this._observableInstanceState=1;for(var n=[],r=this.parent;r&&0===r._observableInstanceState;)n.unshift(r),r=r.parent;try{for(var i=ir(n),o=i.next();!o.done;o=i.next()){o.value.createObservableInstanceIfNeeded()}}catch(t){e={error:t}}finally{try{o&&!o.done&&(t=i.return)&&t.call(i)}finally{if(e)throw e.error}}var a=this.type;try{this.storedValue=a.createNewInstance(this._childNodes),this.preboot(),this._isRunningAction=!0,a.finalizeNewInstance(this,this.storedValue)}catch(e){throw this.state=Mr.DEAD,e}finally{this._isRunningAction=!1}this._observableInstanceState=2,this._snapshotComputed.trackAndCompute(),this.isRoot&&this._addSnapshotReaction(),this._childNodes=Xr,this.state=Mr.CREATED,this.fireHook(er.afterCreate),this.finalizeCreation()}}),Object.defineProperty(t.prototype,"root",{get:function(){var e=this.parent;return e?e.root:this},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"clearParent",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.parent){this.fireHook(er.beforeDetach);var e=this.state;this.state=Mr.DETACHING;var t=this.root,n=t.environment,r=t.identifierCache.splitCache(this);try{this.parent.removeChild(this.subpath),this.baseSetParent(null,""),this.environment=n,this.identifierCache=r}finally{this.state=e}}}}),Object.defineProperty(t.prototype,"setParent",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=e!==this.parent,r=t!==this.subpath;(n||r)&&(n?(this.environment=void 0,e.root.identifierCache.mergeCache(this),this.baseSetParent(e,t),this.fireHook(er.afterAttach)):r&&this.baseSetParent(this.parent,t))}}),Object.defineProperty(t.prototype,"fireHook",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.fireInternalHook(e);var n=this.storedValue&&"object"==typeof this.storedValue&&this.storedValue[e];"function"==typeof n&&(Pt?Pt((function(){n.apply(t.storedValue)})):n.apply(this.storedValue))}}),Object.defineProperty(t.prototype,"snapshot",{get:function(){return this._snapshotComputed.get()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.isAlive?2===this._observableInstanceState?this._getActualSnapshot():this._getCachedInitialSnapshot():this._snapshotUponDeath}}),Object.defineProperty(t.prototype,"_getActualSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.type.getSnapshot(this)}}),Object.defineProperty(t.prototype,"_getCachedInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this._cachedInitialSnapshotCreated){var e=this.type,t=this._childNodes,n=this._initialSnapshot;this._cachedInitialSnapshot=e.processInitialSnapshot(t,n),this._cachedInitialSnapshotCreated=!0}return this._cachedInitialSnapshot}}),Object.defineProperty(t.prototype,"isRunningAction",{enumerable:!1,configurable:!0,writable:!0,value:function(){return!!this._isRunningAction||!this.isRoot&&this.parent.isRunningAction()}}),Object.defineProperty(t.prototype,"assertAlive",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t;if(!this.isAlive){var n=this._getAssertAliveError(e);t=n,console.warn(new Error("[mobx-state-tree] "+t))}}}),Object.defineProperty(t.prototype,"_getAssertAliveError",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getEscapedPath(!1)||this.pathUponDeath||"",n=e.subpath&&bi(e.subpath)||"",r=e.actionContext||Pr;r&&"action"!==r.type&&r.parentActionEvent&&(r=r.parentActionEvent);var i="";r&&null!=r.name&&(i=(r&&r.context&&Br(r.context).path||t)+"."+r.name+"()");return"You are trying to read or write to an object that is no longer part of a state tree. (Object type: '"+this.type.name+"', Path upon death: '"+t+"', Subpath: '"+n+"', Action: '"+i+"'). Either detach nodes first, or don't use objects after removing / replacing them in the tree."}}),Object.defineProperty(t.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.assertAlive({subpath:e}),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildNode(this,e):this._childNodes[e]}finally{this._autoUnbox=!0}}}),Object.defineProperty(t.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.assertAlive(Xr),this._autoUnbox=!1;try{return 2===this._observableInstanceState?this.type.getChildren(this):Wr(this._childNodes)}finally{this._autoUnbox=!0}}}),Object.defineProperty(t.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.type.getChildType(e)}}),Object.defineProperty(t.prototype,"isProtected",{get:function(){return this.root.isProtectionEnabled},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"assertWritable",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.assertAlive(e),!this.isRunningAction()&&this.isProtected)throw Jr("Cannot modify '"+this+"', the object is protected and can only be modified by using an action.")}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.type.removeChild(this,e)}}),Object.defineProperty(t.prototype,"unbox",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e?(this.assertAlive({subpath:e.subpath||e.subpathUponDeath}),this._autoUnbox?e.value:e):e}}),Object.defineProperty(t.prototype,"toString",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=(this.isAlive?this.path:this.pathUponDeath)||"<root>",t=this.identifier?"(id: "+this.identifier+")":"";return this.type.name+"@"+e+t+(this.isAlive?"":" [dead]")}}),Object.defineProperty(t.prototype,"finalizeCreation",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this.baseFinalizeCreation((function(){var t,n;try{for(var r=ir(e.getChildren()),i=r.next();!i.done;i=r.next()){i.value.finalizeCreation()}}catch(e){t={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(t)throw t.error}}e.fireInternalHook(er.afterCreationFinalization)}))}}),Object.defineProperty(t.prototype,"detach",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(!this.isAlive)throw Jr("Error while detaching, node is not alive.");this.clearParent()}}),Object.defineProperty(t.prototype,"preboot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;this._applyPatches=Tr(this.storedValue,"@APPLY_PATCHES",(function(t){t.forEach((function(t){if(t.path){var n=function(e){var t=e.split("/").map(di);if(!(""===e||"."===e||".."===e||fi(e,"/")||fi(e,"./")||fi(e,"../")))throw Jr("a json path must be either rooted, empty or relative, but got '"+e+"'");""===t[0]&&t.shift();return t}(t.path);qr(e,n.slice(0,-1)).applyPatchLocally(n[n.length-1],t)}else e.type.applySnapshot(e,t.value)}))})),this._applySnapshot=Tr(this.storedValue,"@APPLY_SNAPSHOT",(function(t){if(t!==e.snapshot)return e.type.applySnapshot(e,t)})),si(this.storedValue,"$treenode",this),si(this.storedValue,"toJSON",Kr)}}),Object.defineProperty(t.prototype,"die",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.isAlive&&this.state!==Mr.DETACHING&&(this.aboutToDie(),this.finalizeDeath())}}),Object.defineProperty(t.prototype,"aboutToDie",{enumerable:!1,configurable:!0,writable:!0,value:function(){0!==this._observableInstanceState&&(this.getChildren().forEach((function(e){e.aboutToDie()})),this.baseAboutToDie(),this._internalEventsEmit("dispose"),this._internalEventsClear("dispose"))}}),Object.defineProperty(t.prototype,"finalizeDeath",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.getChildren().forEach((function(e){e.finalizeDeath()})),this.root.identifierCache.notifyDied(this);var e=this.snapshot;this._snapshotUponDeath=e,this._internalEventsClearAll(),this.baseFinalizeDeath()}}),Object.defineProperty(t.prototype,"onSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._addSnapshotReaction(),this._internalEventsRegister("snapshot",e)}}),Object.defineProperty(t.prototype,"emitSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._internalEventsEmit("snapshot",e)}}),Object.defineProperty(t.prototype,"onPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._internalEventsRegister("patch",e)}}),Object.defineProperty(t.prototype,"emitPatch",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this._internalEventsHasSubscribers("patch")){var n=or(function(e){if(!("oldValue"in e))throw Jr("Patches without `oldValue` field cannot be inversed");return[pi(e),hi(e)]}(function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];for(var r=0;r<t.length;r++){var i=t[r];for(var o in i)e[o]=i[o]}return e}({},e,{path:t.path.substr(this.path.length)+"/"+e.path})),2),r=n[0],i=n[1];this._internalEventsEmit("patch",r,i)}this.parent&&this.parent.emitPatch(e,t)}}),Object.defineProperty(t.prototype,"hasDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._internalEventsHas("dispose",e)}}),Object.defineProperty(t.prototype,"addDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.hasDisposer(e))throw Jr("cannot add a disposer when it is already registered for execution");this._internalEventsRegister("dispose",e,!0)}}),Object.defineProperty(t.prototype,"removeDisposer",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this._internalEventsHas("dispose",e))throw Jr("cannot remove a disposer which was never registered for execution");this._internalEventsUnregister("dispose",e)}}),Object.defineProperty(t.prototype,"removeMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(this.middlewares){var t=this.middlewares.indexOf(e);t>=0&&this.middlewares.splice(t,1)}}}),Object.defineProperty(t.prototype,"addMiddleWare",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;void 0===t&&(t=!0);var r={handler:e,includeHooks:t};return this.middlewares?this.middlewares.push(r):this.middlewares=[r],function(){n.removeMiddleware(r)}}}),Object.defineProperty(t.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this.assertWritable({subpath:e}),this.createObservableInstanceIfNeeded(),this.type.applyPatchLocally(this,e,t)}}),Object.defineProperty(t.prototype,"_addSnapshotReaction",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;if(!this._hasSnapshotReaction){var t=Et((function(){return e.snapshot}),(function(t){return e.emitSnapshot(t)}),vr);this.addDisposer(t),this._hasSnapshotReaction=!0}}}),Object.defineProperty(t.prototype,"_internalEventsHasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return!!this._internalEvents&&this._internalEvents.hasSubscribers(e)}}),Object.defineProperty(t.prototype,"_internalEventsRegister",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){return void 0===n&&(n=!1),this._internalEvents||(this._internalEvents=new ci),this._internalEvents.register(e,t,n)}}),Object.defineProperty(t.prototype,"_internalEventsHas",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!!this._internalEvents&&this._internalEvents.has(e,t)}}),Object.defineProperty(t.prototype,"_internalEventsUnregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){this._internalEvents&&this._internalEvents.unregister(e,t)}}),Object.defineProperty(t.prototype,"_internalEventsEmit",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];this._internalEvents&&(t=this._internalEvents).emit.apply(t,ar([e],n))}}),Object.defineProperty(t.prototype,"_internalEventsClear",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this._internalEvents&&this._internalEvents.clear(e)}}),Object.defineProperty(t.prototype,"_internalEventsClearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this._internalEvents&&this._internalEvents.clearAll()}}),t}(fr);yr.prototype.createObservableInstance=Ot(yr.prototype.createObservableInstance),yr.prototype.detach=Ot(yr.prototype.detach),yr.prototype.die=Ot(yr.prototype.die),function(e){e[e.String=1]="String",e[e.Number=2]="Number",e[e.Boolean=4]="Boolean",e[e.Date=8]="Date",e[e.Literal=16]="Literal",e[e.Array=32]="Array",e[e.Map=64]="Map",e[e.Object=128]="Object",e[e.Frozen=256]="Frozen",e[e.Optional=512]="Optional",e[e.Reference=1024]="Reference",e[e.Identifier=2048]="Identifier",e[e.Late=4096]="Late",e[e.Refinement=8192]="Refinement",e[e.Union=16384]="Union",e[e.Null=32768]="Null",e[e.Undefined=65536]="Undefined",e[e.Integer=131072]="Integer",e[e.Custom=262144]="Custom",e[e.SnapshotProcessor=524288]="SnapshotProcessor"}(br||(br={}));var gr="cannotDetermine",mr=Symbol("$type"),_r=function(){function e(e){Object.defineProperty(this,hr,{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"C",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"S",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"T",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"N",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"isType",{enumerable:!0,configurable:!0,writable:!0,value:!0}),Object.defineProperty(this,"name",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),this.name=e}return Object.defineProperty(e.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return Ur(this,e),this.instantiate(null,"",t,e).value}}),Object.defineProperty(e.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){throw Jr("unimplemented method")}}),Object.defineProperty(e.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e===this}}),Object.defineProperty(e.prototype,"validate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(Gr(e)){var n=sr(e);return this.isAssignableFrom(n)?Nr():Vr(t,e)}return this.isValidSnapshot(e,t)}}),Object.defineProperty(e.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return 0===this.validate(e,[{path:"",type:this}]).length}}),Object.defineProperty(e.prototype,"Type",{get:function(){throw Jr("Factory.Type should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.Type`")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TypeWithoutSTN",{get:function(){throw Jr("Factory.TypeWithoutSTN should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.TypeWithoutSTN`")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SnapshotType",{get:function(){throw Jr("Factory.SnapshotType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.SnapshotType`")},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"CreationType",{get:function(){throw Jr("Factory.CreationType should not be actually called. It is just a Type signature that can be used at compile time with Typescript, by using `typeof type.CreationType`")},enumerable:!1,configurable:!0}),e}();hr=mr,_r.prototype.create=Ot(_r.prototype.create);var wr=function(e){function t(t){var n=e.call(this,t)||this;return Object.defineProperty(n,"identifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),n}return nr(t,e),Object.defineProperty(t.prototype,"create",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return void 0===t&&(t=this.getDefaultSnapshot()),e.prototype.create.call(this,t,n)}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.createObservableInstanceIfNeeded(),e.storedValue}}),Object.defineProperty(t.prototype,"tryToReconcileNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return!e.isDetaching&&(e.snapshot===t||(!(!Hr(t)||Br(t)!==e)||!(e.type!==this||!oi(t)||Hr(t)||e.identifierAttribute&&e.identifier!==ho(t[e.identifierAttribute]))&&(e.applySnapshot(t),!0)))}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){if(this.tryToReconcileNode(e,t))return e.setParent(n,r),e;if(e.die(),Hr(t)&&this.isAssignableFrom(sr(t))){var i=Br(t);return i.setParent(n,r),i}return this.instantiate(n,r,void 0,t)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),t}(_r);wr.prototype.create=Ot(wr.prototype.create);var Or=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return nr(t,e),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e}}),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){if(!e.isDetaching&&e.type===this&&e.storedValue===t)return e;var i=this.instantiate(n,r,void 0,t);return e.die(),i}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return null}}),t}(_r);function jr(e){return"object"==typeof e&&e&&!0===e.isType}!function(){function e(e,t){Object.defineProperty(this,"hooks",{enumerable:!0,configurable:!0,writable:!0,value:e}),Object.defineProperty(this,"call",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"flowsPending",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"running",{enumerable:!0,configurable:!0,writable:!0,value:!0}),e&&e.onStart(t)}Object.defineProperty(e.prototype,"finish",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.running&&(this.running=!1,this.hooks&&this.hooks.onFinish(this.call,e))}}),Object.defineProperty(e.prototype,"incFlowsPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.flowsPending++}}),Object.defineProperty(e.prototype,"decFlowsPending",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.flowsPending--}}),Object.defineProperty(e.prototype,"hasFlowsPending",{get:function(){return this.flowsPending>0},enumerable:!1,configurable:!0})}();var Pr,Sr=1;function Ar(){return Sr++}function xr(e,t){var n=Br(e.context);"action"===e.type&&n.assertAlive({actionContext:e});var r=n._isRunningAction;n._isRunningAction=!0;var i=Pr;Pr=e;try{return function(e,t,n){var r=new Ir(e,n);if(r.isEmpty)return Ot(n).apply(null,t.args);var i=null;function o(e){var t=r.getNextMiddleware(),a=t&&t.handler;if(!a)return Ot(n).apply(null,e.args);if(!t.includeHooks&&er[e.name])return o(e);function s(e,t){i=o(e),t&&(i=t(i))}function u(e){i=e}return a(e,s,u),i}return o(t)}(n,e,t)}finally{Pr=i,n._isRunningAction=r}}function Er(e){if(e)return"action"===e.type?e:e.parentActionEvent}function Tr(e,t,n){var r=function(){var r=Ar(),i=Pr,o=Er(i);return xr({type:"action",name:t,id:r,args:li(arguments),context:e,tree:lr(e),rootId:i?i.rootId:r,parentId:i?i.id:0,allParentIds:i?ar(i.allParentIds,[i.id]):[],parentEvent:i,parentActionEvent:o},n)};return r._isMSTAction=!0,r}var Ir=function(){function e(e,t){Object.defineProperty(this,"arrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"inArrayIndex",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"middlewares",{enumerable:!0,configurable:!0,writable:!0,value:[]}),t.$mst_middleware&&this.middlewares.push(t.$mst_middleware);for(var n=e;n;)n.middlewares&&this.middlewares.push(n.middlewares),n=n.parent}return Object.defineProperty(e.prototype,"isEmpty",{get:function(){return this.middlewares.length<=0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"getNextMiddleware",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.middlewares[this.arrayIndex];if(e){var t=e[this.inArrayIndex++];return t||(this.arrayIndex++,this.inArrayIndex=0,this.getNextMiddleware())}}}),e}();function Cr(e){return"function"==typeof e?"<function"+(e.name?" "+e.name:"")+">":Hr(e)?"<"+e+">":"`"+function(e){try{return JSON.stringify(e)}catch(e){return"<Unserializable: "+e+">"}}(e)+"`"}function kr(e){var t=e.value,n=e.context[e.context.length-1].type,r=e.context.map((function(e){return e.path})).filter((function(e){return e.length>0})).join("/"),i=r.length>0?'at path "/'+r+'" ':"",o=Hr(t)?"value of type "+Br(t).type.name+":":ai(t)?"value":"snapshot",a=n&&Hr(t)&&n.is(Br(t).snapshot);return""+i+o+" "+Cr(t)+" is not assignable "+(n?"to type: `"+n.name+"`":"")+(e.message?" ("+e.message+")":"")+(n?function(e){return jr(e)&&(e.flags&(br.String|br.Number|br.Integer|br.Boolean|br.Date))>0}(n)||ai(t)?".":", expected an instance of `"+n.name+"` or a snapshot like `"+n.describe()+"` instead."+(a?" (Note that a snapshot of the provided value is compatible with the targeted type)":""):".")}function Dr(e,t,n){return e.concat([{path:t,type:n}])}function Nr(){return Qr}function Vr(e,t,n){return[{context:e,value:t,message:n}]}function Rr(e){return e.reduce((function(e,t){return e.concat(t)}),[])}function Ur(e,t){"undefined"!=typeof process&&process.env&&"true"===process.env.ENABLE_TYPE_CHECK&&function(e,t){var n=e.validate(t,[{path:"",type:e}]);if(n.length>0)throw Jr(function(e,t,n){if(0===n.length)return;return"Error while converting "+(r=Cr(t),(r.length<280?r:r.substring(0,272)+"......"+r.substring(r.length-8))+" to `")+e.name+"`:\n\n    "+n.map(kr).join("\n    ");var r}(e,t,n))}(e,t)}var Mr,Fr=0,zr=function(){function t(){Object.defineProperty(this,"cacheId",{enumerable:!0,configurable:!0,writable:!0,value:Fr++}),Object.defineProperty(this,"cache",{enumerable:!0,configurable:!0,writable:!0,value:Oe.map()}),Object.defineProperty(this,"lastCacheModificationPerId",{enumerable:!0,configurable:!0,writable:!0,value:Oe.map()})}return Object.defineProperty(t.prototype,"updateLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.lastCacheModificationPerId.get(e);this.lastCacheModificationPerId.set(e,void 0===t?1:t+1)}}),Object.defineProperty(t.prototype,"getLastCacheModificationPerId",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.lastCacheModificationPerId.get(e)||0;return this.cacheId+"-"+t}}),Object.defineProperty(t.prototype,"addNodeToCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(void 0===t&&(t=!0),e.identifierAttribute){var n=e.identifier;this.cache.has(n)||this.cache.set(n,Oe.array([],Zr));var r=this.cache.get(n);if(-1!==r.indexOf(e))throw Jr("Already registered");r.push(e),t&&this.updateLastCacheModificationPerId(n)}}}),Object.defineProperty(t.prototype,"mergeCache",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;Ht(e.identifierCache.cache).forEach((function(e){return e.forEach((function(e){t.addNodeToCache(e)}))}))}}),Object.defineProperty(t.prototype,"notifyDied",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e.identifierAttribute){var t=e.identifier,n=this.cache.get(t);n&&(n.remove(e),n.length||this.cache.delete(t),this.updateLastCacheModificationPerId(e.identifier))}}}),Object.defineProperty(t.prototype,"splitCache",{enumerable:!1,configurable:!0,writable:!0,value:function(n){var r,i=this,o=new t,a=n.path;return(r=this.cache,Vn(r)?$t(r).map((function(e){return[e,r[e]]})):Sn(r)?$t(r).map((function(e){return[e,r.get(e)]})):En(r)?Array.from(r.entries()):gn(r)?r.map((function(e,t){return[t,e]})):void e(7)).forEach((function(e){for(var t=or(e,2),n=t[0],r=t[1],s=!1,u=r.length-1;u>=0;u--)0===r[u].path.indexOf(a)&&(o.addNodeToCache(r[u],!1),r.splice(u,1),s=!0);s&&i.updateLastCacheModificationPerId(n)})),o}}),Object.defineProperty(t.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.cache.get(t);return!!n&&n.some((function(t){return e.isAssignableFrom(t.type)}))}}),Object.defineProperty(t.prototype,"resolve",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.cache.get(t);if(!n)return null;var r=n.filter((function(t){return e.isAssignableFrom(t.type)}));switch(r.length){case 0:return null;case 1:return r[0];default:throw Jr("Cannot resolve a reference to type '"+e.name+"' with id: '"+t+"' unambigously, there are multiple candidates: "+r.map((function(e){return e.path})).join(", "))}}}),t}();function Lr(e,t,n,r,i){var o=Gr(i);if(o){if(o.parent)throw Jr("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+(t?t.path:"")+"/"+n+"', but it lives already at '"+o.path+"'");return t&&o.setParent(t,n),o}return new yr(e,t,n,r,i)}function $r(e,t,n,r,i){return new pr(e,t,n,r,i)}function Hr(e){return!(!e||!e.$treenode)}function Br(e){if(!Hr(e))throw Jr("Value "+e+" is no MST Node");return e.$treenode}function Gr(e){return e&&e.$treenode||null}function Kr(){return Br(this).snapshot}function qr(e,t,n){void 0===n&&(n=!0);for(var r=e,i=0;i<t.length;i++){var o=t[i];if(".."===o){if(r=r.parent)continue}else{if("."===o)continue;if(r){if(r instanceof pr)try{var a=r.value;Hr(a)&&(r=Br(a))}catch(e){if(!n)return;throw e}if(r instanceof yr)if(r.getChildType(o)&&(r=r.getChildNode(o)))continue}}if(n)throw Jr("Could not resolve '"+o+"' in path '"+(vi(t.slice(0,i))||"/")+"' while resolving '"+vi(t)+"'");return}return r}function Wr(e){if(!e)return Qr;var t=Object.keys(e);if(!t.length)return Qr;var n=new Array(t.length);return t.forEach((function(t,r){n[r]=e[t]})),n}!function(e){e[e.INITIALIZING=0]="INITIALIZING",e[e.CREATED=1]="CREATED",e[e.FINALIZED=2]="FINALIZED",e[e.DETACHING=3]="DETACHING",e[e.DEAD=4]="DEAD"}(Mr||(Mr={}));var Yr=Object.toString(),Qr=Object.freeze([]),Xr=Object.freeze({}),Zr=nt.useProxies?{deep:!1}:{deep:!1,proxy:!1};function Jr(e){return void 0===e&&(e="Illegal state"),new Error("[mobx-state-tree] "+e)}function ei(e){return e}Object.freeze(Zr);var ti=Number.isInteger||function(e){return"number"==typeof e&&isFinite(e)&&Math.floor(e)===e};function ni(e){return Array.isArray(e)||gn(e)}function ri(e){return e?ni(e)?e:[e]:Qr}function ii(e){var t;if(null===e||"object"!=typeof e)return!1;var n=Object.getPrototypeOf(e);return null==n||(null===(t=n.constructor)||void 0===t?void 0:t.toString())===Yr}function oi(e){return!(null===e||"object"!=typeof e||e instanceof Date||e instanceof RegExp)}function ai(e,t){return void 0===t&&(t=!0),null==e||!!("string"==typeof e||"number"==typeof e||"boolean"==typeof e||t&&e instanceof Date)}function si(e,t,n){!function(e,t,n){Vn(e)?Gt(e,t,n):Object.defineProperty(e,t,n)}(e,t,{enumerable:!1,writable:!1,configurable:!0,value:n})}var ui=function(){function e(){Object.defineProperty(this,"handlers",{enumerable:!0,configurable:!0,writable:!0,value:[]})}return Object.defineProperty(e.prototype,"hasSubscribers",{get:function(){return this.handlers.length>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;return void 0===t&&(t=!1),t?this.handlers.unshift(e):this.handlers.push(e),function(){n.unregister(e)}}}),Object.defineProperty(e.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.handlers.indexOf(e)>=0}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.handlers.indexOf(e);t>=0&&this.handlers.splice(t,1)}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.handlers.length=0}}),Object.defineProperty(e.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=this.handlers.slice();n.forEach((function(t){return t.apply(void 0,ar(e))}))}}),e}(),ci=function(){function e(){Object.defineProperty(this,"eventHandlers",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}return Object.defineProperty(e.prototype,"hasSubscribers",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.eventHandlers&&this.eventHandlers[e];return!!t&&t.hasSubscribers}}),Object.defineProperty(e.prototype,"register",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){void 0===n&&(n=!1),this.eventHandlers||(this.eventHandlers={});var r=this.eventHandlers[e];return r||(r=this.eventHandlers[e]=new ui),r.register(t,n)}}),Object.defineProperty(e.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.eventHandlers&&this.eventHandlers[e];return!!n&&n.has(t)}}),Object.defineProperty(e.prototype,"unregister",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.eventHandlers&&this.eventHandlers[e];n&&n.unregister(t)}}),Object.defineProperty(e.prototype,"clear",{enumerable:!1,configurable:!0,writable:!0,value:function(e){this.eventHandlers&&delete this.eventHandlers[e]}}),Object.defineProperty(e.prototype,"clearAll",{enumerable:!1,configurable:!0,writable:!0,value:function(){this.eventHandlers=void 0}}),Object.defineProperty(e.prototype,"emit",{enumerable:!1,configurable:!0,writable:!0,value:function(e){for(var t,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=this.eventHandlers&&this.eventHandlers[e];i&&(t=i).emit.apply(t,ar(n))}}),e}();function li(e){for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return t}function fi(e,t){return 0===e.indexOf(t)}function pi(e){switch(e.op){case"add":return{op:"add",path:e.path,value:e.value};case"remove":return{op:"remove",path:e.path};case"replace":return{op:"replace",path:e.path,value:e.value}}}function hi(e){switch(e.op){case"add":return{op:"remove",path:e.path};case"remove":return{op:"add",path:e.path,value:e.oldValue};case"replace":return{op:"replace",path:e.path,value:e.oldValue}}}function bi(e){return!0==("number"==typeof e)?""+e:-1===e.indexOf("/")&&-1===e.indexOf("~")?e:e.replace(/~/g,"~0").replace(/\//g,"~1")}function di(e){return e.replace(/~1/g,"/").replace(/~0/g,"~")}function vi(e){if(0===e.length)return"";var t=function(e){return e.map(bi).join("/")};return"."===e[0]||".."===e[0]?t(e):"/"+t(e)}var yi=function(e){function t(t,n,r){var i=e.call(this,r||t.name)||this;return Object.defineProperty(i,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(i,"_processors",{enumerable:!0,configurable:!0,writable:!0,value:n}),i}return nr(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return this._subtype.flags|br.SnapshotProcessor},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"snapshotProcessor("+this._subtype.describe()+")"}}),Object.defineProperty(t.prototype,"preProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._processors.preProcessor?this._processors.preProcessor.call(null,e):e}}),Object.defineProperty(t.prototype,"postProcessSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._processors.postProcessor?this._processors.postProcessor.call(null,e):e}}),Object.defineProperty(t.prototype,"_fixNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;!function(e,t){for(var n,r,i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];try{for(var a=ir(i),s=a.next();!s.done;s=a.next()){var u=s.value;e[u]=t[u].bind(t)}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}(e.type,this,"create");var n=e.getSnapshot;e.getSnapshot=function(){return t.postProcessSnapshot(n.call(e))}}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){var i=Hr(r)?r:this.preProcessSnapshot(r),o=this._subtype.instantiate(e,t,n,i);return this._fixNode(o),o}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){var i=this._subtype.reconcile(e,Hr(t)?t:this.preProcessSnapshot(t),n,r);return i!==e&&this._fixNode(i),i}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=!0);var n=this._subtype.getSnapshot(e);return t?this.postProcessSnapshot(n):n}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.preProcessSnapshot(e);return this._subtype.validate(n,t)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),Object.defineProperty(t.prototype,"is",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=jr(e)?this._subtype:Hr(e)?cr(e,!1):this.preProcessSnapshot(e);return 0===this._subtype.validate(t,[{path:"",type:this._subtype}]).length}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._subtype.isAssignableFrom(e)}}),t}(_r);var gi,mi="Map.put can only be used to store complex values that have an identifier type attribute";function _i(e,t){var n,r,i=e.getSubTypes();if(i===gr)return!1;if(i){var o=ri(i);try{for(var a=ir(o),s=a.next();!s.done;s=a.next()){if(!_i(s.value,t))return!1}}catch(e){n={error:e}}finally{try{s&&!s.done&&(r=a.return)&&r.call(a)}finally{if(n)throw n.error}}}return e instanceof ki&&t.push(e),!0}!function(e){e[e.UNKNOWN=0]="UNKNOWN",e[e.YES=1]="YES",e[e.NO=2]="NO"}(gi||(gi={}));var wi=function(e){function t(t){return e.call(this,t,Oe.ref.enhancer)||this}return nr(t,e),Object.defineProperty(t.prototype,"get",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return e.prototype.get.call(this,""+t)}}),Object.defineProperty(t.prototype,"has",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return e.prototype.has.call(this,""+t)}}),Object.defineProperty(t.prototype,"delete",{enumerable:!1,configurable:!0,writable:!0,value:function(t){return e.prototype.delete.call(this,""+t)}}),Object.defineProperty(t.prototype,"set",{enumerable:!1,configurable:!0,writable:!0,value:function(t,n){return e.prototype.set.call(this,""+t,n)}}),Object.defineProperty(t.prototype,"put",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!e)throw Jr("Map.put cannot be used to set empty values");if(Hr(e)){var t=Br(e);if(null===t.identifier)throw Jr(mi);return this.set(t.identifier,e),e}if(oi(e)){var n=Br(this),r=n.type;if(r.identifierMode!==gi.YES)throw Jr(mi);var i=e[r.mapIdentifierAttribute];if(!bo(i)){var o=this.put(r.getChildType().create(e,n.environment));return this.put(cr(o))}var a=ho(i);return this.set(a,e),this.get(a)}throw Jr("Map.put can only be used to store complex values")}}),t}(Pn),Oi=function(e){function t(t,n,r){void 0===r&&(r=[]);var i=e.call(this,t)||this;return Object.defineProperty(i,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"identifierMode",{enumerable:!0,configurable:!0,writable:!0,value:gi.UNKNOWN}),Object.defineProperty(i,"mapIdentifierAttribute",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"flags",{enumerable:!0,configurable:!0,writable:!0,value:br.Map}),Object.defineProperty(i,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),i._determineIdentifierMode(),i.hookInitializers=r,i}return nr(t,e),Object.defineProperty(t.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var n=this.hookInitializers.length>0?this.hookInitializers.concat(e):[e];return new t(this.name,this._subType,n)}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){return this._determineIdentifierMode(),Lr(this,e,t,n,r)}}),Object.defineProperty(t.prototype,"_determineIdentifierMode",{enumerable:!1,configurable:!0,writable:!0,value:function(){if(this.identifierMode===gi.UNKNOWN){var e=[];if(_i(this._subType,e)){var t=void 0;e.forEach((function(e){if(e.identifierAttribute){if(t&&t!==e.identifierAttribute)throw Jr("The objects in a map should all have the same identifier attribute, expected '"+t+"', but child of type '"+e.name+"' declared attribute '"+e.identifierAttribute+"' as identifier");t=e.identifierAttribute}})),t?(this.identifierMode=gi.YES,this.mapIdentifierAttribute=t):this.identifierMode=gi.NO}}}}),Object.defineProperty(t.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t={});var n=e.type._subType,r={};return Object.keys(t).forEach((function(i){r[i]=n.instantiate(e,i,void 0,t[i])})),r}}),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new wi(e)}}),Object.defineProperty(t.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){Ft(t,e.unbox),e.type.hookInitializers.forEach((function(e){var n=e(t);Object.keys(n).forEach((function(e){var r=n[e],i=Tr(t,e,r);si(t,e,i)}))})),zt(t,this.willChange),Kt(t,this.didChange)}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"Map<string, "+this._subType.describe()+">"}}),Object.defineProperty(t.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Ht(e.storedValue)}}),Object.defineProperty(t.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=e.storedValue.get(""+t);if(!n)throw Jr("Not a child "+t);return n}}),Object.defineProperty(t.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=Br(e.object),n=e.name;t.assertWritable({subpath:n});var r=t.type,i=r._subType;switch(e.type){case"update":var o=e.newValue;if(o===e.object.get(n))return null;Ur(i,o),e.newValue=i.reconcile(t.getChildNode(n),e.newValue,t,n),r.processIdentifier(n,e.newValue);break;case"add":Ur(i,e.newValue),e.newValue=i.instantiate(t,n,void 0,e.newValue),r.processIdentifier(n,e.newValue)}return e}}),Object.defineProperty(t.prototype,"processIdentifier",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this.identifierMode===gi.YES&&t instanceof yr){var n=t.identifier;if(n!==e)throw Jr("A map of objects containing an identifier should always store the object under their own identifier. Trying to store key '"+n+"', but expected: '"+e+"'")}}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={};return e.getChildren().forEach((function(e){t[e.subpath]=e.snapshot})),t}}),Object.defineProperty(t.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].getSnapshot()})),t}}),Object.defineProperty(t.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=Br(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:bi(e.name),value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"add":return void t.emitPatch({op:"add",path:bi(e.name),value:e.newValue.snapshot,oldValue:void 0},t);case"delete":var n=e.oldValue.snapshot;return e.oldValue.die(),void t.emitPatch({op:"remove",path:bi(e.name),oldValue:n},t)}}}),Object.defineProperty(t.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var r=e.storedValue;switch(n.op){case"add":case"replace":r.set(t,n.value);break;case"remove":r.delete(t)}}}),Object.defineProperty(t.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){Ur(this,t);var n=e.storedValue,r={};if(Array.from(n.keys()).forEach((function(e){r[e]=!1})),t)for(var i in t)n.set(i,t[i]),r[""+i]=!0;Object.keys(r).forEach((function(e){!1===r[e]&&n.delete(e)}))}}),Object.defineProperty(t.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;return ii(e)?Rr(Object.keys(e).map((function(r){return n._subType.validate(e[r],Dr(t,r,n._subType))}))):Vr(t,e,"Value is not a plain object")}}),Object.defineProperty(t.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Xr}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.storedValue.delete(t)}}),t}(wr);Oi.prototype.applySnapshot=Ot(Oi.prototype.applySnapshot);var ji=function(e){function t(t,n,r){void 0===r&&(r=[]);var i=e.call(this,t)||this;return Object.defineProperty(i,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"flags",{enumerable:!0,configurable:!0,writable:!0,value:br.Array}),Object.defineProperty(i,"hookInitializers",{enumerable:!0,configurable:!0,writable:!0,value:[]}),i.hookInitializers=r,i}return nr(t,e),Object.defineProperty(t.prototype,"hooks",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var n=this.hookInitializers.length>0?this.hookInitializers.concat(e):[e];return new t(this.name,this._subType,n)}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){return Lr(this,e,t,n,r)}}),Object.defineProperty(t.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t=[]);var n=e.type._subType,r={};return t.forEach((function(t,i){var o=""+i;r[o]=n.instantiate(e,o,void 0,t)})),r}}),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Oe.array(Wr(e),Zr)}}),Object.defineProperty(t.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){Kn(t).dehancer=e.unbox,e.type.hookInitializers.forEach((function(e){var n=e(t);Object.keys(n).forEach((function(e){var r=n[e],i=Tr(t,e,r);si(t,e,i)}))})),zt(t,this.willChange),Kt(t,this.didChange)}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType.describe()+"[]"}}),Object.defineProperty(t.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue.slice()}}),Object.defineProperty(t.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=Number(t);if(n<e.storedValue.length)return e.storedValue[n];throw Jr("Not a child: "+t)}}),Object.defineProperty(t.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=Br(e.object);t.assertWritable({subpath:""+e.index});var n=t.type._subType,r=t.getChildren();switch(e.type){case"update":if(e.newValue===e.object[e.index])return null;var i=Pi(t,n,[r[e.index]],[e.newValue],[e.index]);if(!i)return null;e.newValue=i[0];break;case"splice":var o=e.index,a=e.removedCount,s=e.added,u=Pi(t,n,r.slice(o,o+a),s,s.map((function(e,t){return o+t})));if(!u)return null;e.added=u;for(var c=o+a;c<r.length;c++)r[c].setParent(t,""+(c+s.length-a))}return e}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.getChildren().map((function(e){return e.snapshot}))}}),Object.defineProperty(t.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=[];return Object.keys(e).forEach((function(n){t.push(e[n].getSnapshot())})),t}}),Object.defineProperty(t.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=Br(e.object);switch(e.type){case"update":return void t.emitPatch({op:"replace",path:""+e.index,value:e.newValue.snapshot,oldValue:e.oldValue?e.oldValue.snapshot:void 0},t);case"splice":for(var n=e.removedCount-1;n>=0;n--)t.emitPatch({op:"remove",path:""+(e.index+n),oldValue:e.removed[n].snapshot},t);for(n=0;n<e.addedCount;n++)t.emitPatch({op:"add",path:""+(e.index+n),value:t.getChildNode(""+(e.index+n)).snapshot,oldValue:void 0},t);return}}}),Object.defineProperty(t.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var r=e.storedValue,i="-"===t?r.length:Number(t);switch(n.op){case"replace":r[i]=n.value;break;case"add":r.splice(i,0,n.value);break;case"remove":r.splice(i,1)}}}),Object.defineProperty(t.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){Ur(this,t),e.storedValue.replace(t)}}),Object.defineProperty(t.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subType}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;return ni(e)?Rr(e.map((function(e,r){return n._subType.validate(e,Dr(t,""+r,n._subType))}))):Vr(t,e,"Value is not an array")}}),Object.defineProperty(t.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Qr}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.storedValue.splice(Number(t),1)}}),t}(wr);function Pi(e,t,n,r,i){for(var o,a=!0,s=0;;s++){var u=s<=r.length-1,c=n[s],l=u?r[s]:void 0,f=""+i[s];if(((o=l)instanceof pr||o instanceof yr)&&(l=l.storedValue),!c&&!u)break;if(u)if(c)if(Ai(c,l))n[s]=Si(t,e,f,l,c);else{for(var p=void 0,h=s;h<n.length;h++)if(Ai(n[h],l)){p=n.splice(h,1)[0];break}a=!1;b=Si(t,e,f,l,p);n.splice(s,0,b)}else{if(Hr(l)&&Br(l).parent===e)throw Jr("Cannot add an object to a state tree if it is already part of the same or another state tree. Tried to assign an object to '"+e.path+"/"+f+"', but it lives already at '"+Br(l).path+"'");a=!1;var b=Si(t,e,f,l);n.splice(s,0,b)}else a=!1,n.splice(s,1),c instanceof yr&&c.createObservableInstanceIfNeeded(),c.die(),s--}return a?null:n}function Si(e,t,n,r,i){Ur(e,r);var o=function(){if(Hr(r)){var o=Br(r);if(o.assertAlive(Xr),null!==o.parent&&o.parent===t)return o.setParent(t,n),o}return i?e.reconcile(i,r,t,n):e.instantiate(t,n,void 0,r)}();return i&&i!==o&&(i instanceof yr&&i.createObservableInstanceIfNeeded(),i.die()),o}function Ai(e,t){if(!e.isAlive)return!1;if(Hr(t)){var n=Br(t);return n.isAlive&&n===e}return e.snapshot===t||e instanceof yr&&null!==e.identifier&&e.identifierAttribute&&ii(t)&&e.identifier===ho(t[e.identifierAttribute])&&e.type.is(t)}ji.prototype.applySnapshot=Ot(ji.prototype.applySnapshot);var xi="preProcessSnapshot",Ei="postProcessSnapshot";function Ti(){return Br(this).toString()}var Ii={name:"AnonymousModel",properties:{},initializers:Qr};function Ci(e){return Object.keys(e).reduce((function(e,t){var n,r,i;if(t in er)throw Jr("Hook '"+t+"' was defined as property. Hooks should be defined as part of the actions");var o=Object.getOwnPropertyDescriptor(e,t);if("get"in o)throw Jr("Getters are not supported as properties. Please use views instead");var a=o.value;if(null==a)throw Jr("The default value of an attribute cannot be null or undefined as the type cannot be inferred. Did you mean `types.maybe(someType)`?");if(ai(a))return Object.assign({},e,((n={})[t]=Wi(function(e){switch(typeof e){case"string":return Ni;case"number":return Vi;case"boolean":return Ui;case"object":if(e instanceof Date)return Li}throw Jr("Cannot determine primitive type from value "+e)}(a),a),n));if(a instanceof Oi)return Object.assign({},e,((r={})[t]=Wi(a,{}),r));if(a instanceof ji)return Object.assign({},e,((i={})[t]=Wi(a,[]),i));if(jr(a))return e;throw Jr("Invalid type definition for property '"+t+"', cannot infer a type from a value like '"+a+"' ("+typeof a+")")}),e)}var ki=function(e){function t(t){var n=e.call(this,t.name||Ii.name)||this;return Object.defineProperty(n,"flags",{enumerable:!0,configurable:!0,writable:!0,value:br.Object}),Object.defineProperty(n,"initializers",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"properties",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"preProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"postProcessor",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"propertyNames",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"named",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return n.cloneAndEnhance({name:e})}}),Object.defineProperty(n,"props",{enumerable:!0,configurable:!0,writable:!0,value:function(e){return n.cloneAndEnhance({properties:e})}}),Object.defineProperty(n,"preProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=n.preProcessor;return t?n.cloneAndEnhance({preProcessor:function(n){return t(e(n))}}):n.cloneAndEnhance({preProcessor:e})}}),Object.defineProperty(n,"postProcessSnapshot",{enumerable:!0,configurable:!0,writable:!0,value:function(e){var t=n.postProcessor;return t?n.cloneAndEnhance({postProcessor:function(n){return e(t(n))}}):n.cloneAndEnhance({postProcessor:e})}}),Object.assign(n,Ii,t),n.properties=Ci(n.properties),n.properties,n.propertyNames=Object.keys(n.properties),n.identifierAttribute=n._getIdentifierAttribute(),n}return nr(t,e),Object.defineProperty(t.prototype,"_getIdentifierAttribute",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=void 0;return this.forAllProps((function(t,n){if(n.flags&br.Identifier){if(e)throw Jr("Cannot define property '"+t+"' as object identifier, property '"+e+"' is already defined as identifier property");e=t}})),e}}),Object.defineProperty(t.prototype,"cloneAndEnhance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return new t({name:e.name||this.name,properties:Object.assign({},this.properties,e.properties),initializers:this.initializers.concat(e.initializers||[]),preProcessor:e.preProcessor||this.preProcessor,postProcessor:e.postProcessor||this.postProcessor})}}),Object.defineProperty(t.prototype,"actions",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return this.cloneAndEnhance({initializers:[function(n){return t.instantiateActions(n,e(n)),n}]})}}),Object.defineProperty(t.prototype,"instantiateActions",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!ii(t))throw Jr("actions initializer should return a plain object containing actions");Object.keys(t).forEach((function(n){if(n===xi)throw Jr("Cannot define action 'preProcessSnapshot', it should be defined using 'type.preProcessSnapshot(fn)' instead");if(n===Ei)throw Jr("Cannot define action 'postProcessSnapshot', it should be defined using 'type.postProcessSnapshot(fn)' instead");var r=t[n],i=e[n];if(n in er&&i){var o=r;r=function(){i.apply(null,arguments),o.apply(null,arguments)}}var a=r.$mst_middleware,s=r.bind(t);s.$mst_middleware=a;var u=Tr(e,n,s);t[n]=u,si(e,n,u)}))}}),Object.defineProperty(t.prototype,"volatile",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;if("function"!=typeof e)throw Jr("You passed an "+typeof e+" to volatile state as an argument, when function is expected");return this.cloneAndEnhance({initializers:[function(n){return t.instantiateVolatileState(n,e(n)),n}]})}}),Object.defineProperty(t.prototype,"instantiateVolatileState",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!ii(t))throw Jr("volatile state initializer should return a plain object containing state");Bt(e,t)}}),Object.defineProperty(t.prototype,"extend",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return this.cloneAndEnhance({initializers:[function(n){var r=e(n),i=r.actions,o=r.views,a=r.state,s=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}(r,["actions","views","state"]);for(var u in s)throw Jr("The `extend` function should return an object with a subset of the fields 'actions', 'views' and 'state'. Found invalid key '"+u+"'");return a&&t.instantiateVolatileState(n,a),o&&t.instantiateViews(n,o),i&&t.instantiateActions(n,i),n}]})}}),Object.defineProperty(t.prototype,"views",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;return this.cloneAndEnhance({initializers:[function(n){return t.instantiateViews(n,e(n)),n}]})}}),Object.defineProperty(t.prototype,"instantiateViews",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!ii(t))throw Jr("views initializer should return a plain object containing views");Object.keys(t).forEach((function(n){var r,i=Object.getOwnPropertyDescriptor(t,n);if("get"in i)Gt(e,n,i),rn(e,((r={})[n]=Ae,r));else{if("function"!=typeof i.value)throw Jr("A view member should either be a function or getter based property");si(e,n,i.value)}}))}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){return Lr(this,e,t,n,Hr(r)?r:this.applySnapshotPreProcessor(r))}}),Object.defineProperty(t.prototype,"initializeChildNodes",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){void 0===t&&(t={});var n=e.type,r={};return n.forAllProps((function(n,i){r[n]=i.instantiate(e,n,void 0,t[n])})),r}}),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return Oe.object(e,Xr,Zr)}}),Object.defineProperty(t.prototype,"finalizeNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){si(t,"toString",Ti),this.forAllProps((function(n){Ft(t,n,e.unbox)})),this.initializers.reduce((function(e,t){return t(e)}),t),zt(t,this.willChange),Kt(t,this.didChange)}}),Object.defineProperty(t.prototype,"willChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e,n=Br(t.object),r=t.name;n.assertWritable({subpath:r});var i=n.type.properties[r];return i&&(Ur(i,t.newValue),t.newValue=i.reconcile(n.getChildNode(r),t.newValue,n,r)),t}}),Object.defineProperty(t.prototype,"didChange",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=e,n=Br(t.object);if(n.type.properties[t.name]){var r=t.oldValue?t.oldValue.snapshot:void 0;n.emitPatch({op:"replace",path:bi(t.name),value:t.newValue.snapshot,oldValue:r},n)}}}),Object.defineProperty(t.prototype,"getChildren",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this,n=[];return this.forAllProps((function(r){n.push(t.getChildNode(e,r))})),n}}),Object.defineProperty(t.prototype,"getChildNode",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(!(t in this.properties))throw Jr("Not a value property: "+t);var n=Kn(e.storedValue,t).raw();if(!n)throw Jr("Node not available for property "+t);return n}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this;void 0===t&&(t=!0);var r={};return this.forAllProps((function(t,i){Gn(e.storedValue,t).reportObserved(),r[t]=n.getChildNode(e,t).snapshot})),t?this.applySnapshotPostProcessor(r):r}}),Object.defineProperty(t.prototype,"processInitialSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t={};return Object.keys(e).forEach((function(n){t[n]=e[n].getSnapshot()})),this.applySnapshotPostProcessor(t)}}),Object.defineProperty(t.prototype,"applyPatchLocally",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){if("replace"!==n.op&&"add"!==n.op)throw Jr("object does not support operation "+n.op);e.storedValue[t]=n.value}}),Object.defineProperty(t.prototype,"applySnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.applySnapshotPreProcessor(t);Ur(this,n),this.forAllProps((function(t){e.storedValue[t]=n[t]}))}}),Object.defineProperty(t.prototype,"applySnapshotPreProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.preProcessor;return t?t.call(null,e):e}}),Object.defineProperty(t.prototype,"applySnapshotPostProcessor",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.postProcessor;return t?t.call(null,e):e}}),Object.defineProperty(t.prototype,"getChildType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.properties[e]}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,r=this.applySnapshotPreProcessor(e);return ii(r)?Rr(this.propertyNames.map((function(e){return n.properties[e].validate(r[e],Dr(t,e,n.properties[e]))}))):Vr(t,r,"Value is not a plain object")}}),Object.defineProperty(t.prototype,"forAllProps",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this;this.propertyNames.forEach((function(n){return e(n,t.properties[n])}))}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this;return"{ "+this.propertyNames.map((function(t){return t+": "+e.properties[t].describe()})).join("; ")+" }"}}),Object.defineProperty(t.prototype,"getDefaultSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){return Xr}}),Object.defineProperty(t.prototype,"removeChild",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){e.storedValue[t]=void 0}}),t}(wr);ki.prototype.applySnapshot=Ot(ki.prototype.applySnapshot);var Di=function(e){function t(t,n,r,i){void 0===i&&(i=ei);var o=e.call(this,t)||this;return Object.defineProperty(o,"flags",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"checker",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"initializer",{enumerable:!0,configurable:!0,writable:!0,value:i}),o.flags=n,o}return nr(t,e),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){return $r(this,e,t,n,r)}}),Object.defineProperty(t.prototype,"createNewInstance",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.initializer(e)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return ai(e)&&this.checker(e)?Nr():Vr(t,e,"Value is not a "+("Date"===this.name?"Date or a unix milliseconds timestamp":this.name))}}),t}(Or),Ni=new Di("string",br.String,(function(e){return"string"==typeof e})),Vi=new Di("number",br.Number,(function(e){return"number"==typeof e})),Ri=new Di("integer",br.Integer,(function(e){return ti(e)})),Ui=new Di("boolean",br.Boolean,(function(e){return"boolean"==typeof e})),Mi=new Di("null",br.Null,(function(e){return null===e})),Fi=new Di("undefined",br.Undefined,(function(e){return void 0===e})),zi=new Di("Date",br.Date,(function(e){return"number"==typeof e||e instanceof Date}),(function(e){return e instanceof Date?e:new Date(e)}));zi.getSnapshot=function(e){return e.storedValue.getTime()};var Li=zi;var $i=function(e){function t(t){var n=e.call(this,JSON.stringify(t))||this;return Object.defineProperty(n,"value",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(n,"flags",{enumerable:!0,configurable:!0,writable:!0,value:br.Literal}),n.value=t,n}return nr(t,e),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){return $r(this,e,t,n,r)}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return JSON.stringify(this.value)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return ai(e)&&e===this.value?Nr():Vr(t,e,"Value is not a literal "+JSON.stringify(this.value))}}),t}(Or);function Hi(e){return new $i(e)}var Bi=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return Object.defineProperty(o,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(o,"_predicate",{enumerable:!0,configurable:!0,writable:!0,value:r}),Object.defineProperty(o,"_message",{enumerable:!0,configurable:!0,writable:!0,value:i}),o}return nr(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return this._subtype.flags|br.Refinement},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){return this._subtype.instantiate(e,t,n,r)}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._subtype.isAssignableFrom(e)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this._subtype.validate(e,t);if(n.length>0)return n;var r=Hr(e)?Br(e).snapshot:e;return this._predicate(r)?Nr():Vr(t,e,this._message(e))}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){return this._subtype.reconcile(e,t,n,r)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),t}(_r);var Gi=function(e){function t(t,n,r){var i=e.call(this,t)||this;return Object.defineProperty(i,"_types",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"_dispatcher",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(i,"_eager",{enumerable:!0,configurable:!0,writable:!0,value:!0}),r=rr({eager:!0,dispatcher:void 0},r),i._dispatcher=r.dispatcher,r.eager||(i._eager=!1),i}return nr(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){var e=br.Union;return this._types.forEach((function(t){e|=t.flags})),e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._types.some((function(t){return t.isAssignableFrom(e)}))}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"("+this._types.map((function(e){return e.describe()})).join(" | ")+")"}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){var i=this.determineType(r,void 0);if(!i)throw Jr("No matching type for union "+this.describe());return i.instantiate(e,t,n,r)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){var i=this.determineType(t,e.type);if(!i)throw Jr("No matching type for union "+this.describe());return i.reconcile(e,t,n,r)}}),Object.defineProperty(t.prototype,"determineType",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this._dispatcher?this._dispatcher(e):t?t.is(e)?t:this._types.filter((function(e){return e!==t})).find((function(t){return t.is(e)})):this._types.find((function(t){return t.is(e)}))}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this._dispatcher)return this._dispatcher(e).validate(e,t);for(var n=[],r=0,i=0;i<this._types.length;i++){var o=this._types[i].validate(e,t);if(0===o.length){if(this._eager)return Nr();r++}else n.push(o)}return 1===r?Nr():Vr(t,e,"No type is applicable for the union").concat(Rr(n))}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._types}}),t}(_r);function Ki(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=jr(e)?void 0:e,i=jr(e)?ar([e],t):t,o="("+i.map((function(e){return e.name})).join(" | ")+")";return new Gi(o,i,r)}var qi=function(e){function t(t,n,r){var i=e.call(this,t.name)||this;return Object.defineProperty(i,"_subtype",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(i,"_defaultValue",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(i,"optionalValues",{enumerable:!0,configurable:!0,writable:!0,value:r}),i}return nr(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return this._subtype.flags|br.Optional},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype.describe()+"?"}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){if(this.optionalValues.indexOf(r)>=0){var i=this.getDefaultInstanceOrSnapshot();return this._subtype.instantiate(e,t,n,i)}return this._subtype.instantiate(e,t,n,r)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){return this._subtype.reconcile(e,this.optionalValues.indexOf(t)<0&&this._subtype.is(t)?t:this.getDefaultInstanceOrSnapshot(),n,r)}}),Object.defineProperty(t.prototype,"getDefaultInstanceOrSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e="function"==typeof this._defaultValue?this._defaultValue():this._defaultValue;return"function"==typeof this._defaultValue&&Ur(this,e),e}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return this.optionalValues.indexOf(e)>=0?Nr():this._subtype.validate(e,t)}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this._subtype.isAssignableFrom(e)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this._subtype}}),t}(_r);function Wi(e,t,n){return function(e,t){if("function"!=typeof t&&Hr(t))throw Jr("default value cannot be an instance, pass a snapshot or a function that creates an instance/snapshot instead")}(0,t),new qi(e,t,n||Yi)}var Yi=[void 0],Qi=Wi(Fi,void 0),Xi=Wi(Mi,null);function Zi(e){return Ki(e,Qi)}var Ji=function(e){function t(t,n){var r=e.call(this,t)||this;return Object.defineProperty(r,"_definition",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"_subType",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),r}return nr(t,e),Object.defineProperty(t.prototype,"flags",{get:function(){return(this._subType?this._subType.flags:0)|br.Late},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getSubType",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(!this._subType){var t=void 0;try{t=this._definition()}catch(e){if(!(e instanceof ReferenceError))throw e;t=void 0}if(e&&void 0===t)throw Jr("Late type seems to be used too early, the definition (still) returns undefined");t&&(this._subType=t)}return this._subType}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){return this.getSubType(!0).instantiate(e,t,n,r)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){return this.getSubType(!0).reconcile(e,t,n,r)}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getSubType(!1);return e?e.name:"<uknown late type>"}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this.getSubType(!1);return n?n.validate(e,t):Nr()}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=this.getSubType(!1);return!!t&&t.isAssignableFrom(e)}}),Object.defineProperty(t.prototype,"getSubTypes",{enumerable:!1,configurable:!0,writable:!0,value:function(){var e=this.getSubType(!1);return e||gr}}),t}(_r);var eo=function(e){function t(t){var n=e.call(this,t?"frozen("+t.name+")":"frozen")||this;return Object.defineProperty(n,"subType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(n,"flags",{enumerable:!0,configurable:!0,writable:!0,value:br.Frozen}),n}return nr(t,e),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"<any immutable value>"}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){return $r(this,e,t,n,r)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return function(e){return"function"!=typeof e}(e)?this.subType?this.subType.validate(e,t):Nr():Vr(t,e,"Value is not serializable and cannot be frozen")}}),t}(Or),to=new eo;var no=function(){function e(e,t){if(Object.defineProperty(this,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(this,"identifier",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"node",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"resolvedReference",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),bo(e))this.identifier=e;else{if(!Hr(e))throw Jr("Can only store references to tree nodes or identifiers, got: '"+e+"'");var n=Br(e);if(!n.identifierAttribute)throw Jr("Can only store references with a defined identifier attribute.");var r=n.unnormalizedIdentifier;if(null==r)throw Jr("Can only store references to tree nodes with a defined identifier.");this.identifier=r}}return Object.defineProperty(e.prototype,"updateResolvedReference",{enumerable:!1,configurable:!0,writable:!0,value:function(e){var t=ho(this.identifier),n=e.root,r=n.identifierCache.getLastCacheModificationPerId(t);if(!this.resolvedReference||this.resolvedReference.lastCacheModification!==r){var i=this.targetType,o=n.identifierCache.resolve(i,t);if(!o)throw new ro("[mobx-state-tree] Failed to resolve reference '"+this.identifier+"' to type '"+this.targetType.name+"' (from node: "+e.path+")");this.resolvedReference={node:o,lastCacheModification:r}}}}),Object.defineProperty(e.prototype,"resolvedValue",{get:function(){return this.updateResolvedReference(this.node),this.resolvedReference.node.value},enumerable:!1,configurable:!0}),e}(),ro=function(e){function t(n){var r=e.call(this,n)||this;return Object.setPrototypeOf(r,t.prototype),r}return nr(t,e),t}(Error),io=function(e){function t(t,n){var r=e.call(this,"reference("+t.name+")")||this;return Object.defineProperty(r,"targetType",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(r,"onInvalidated",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:br.Reference}),r}return nr(t,e),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"isAssignableFrom",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.targetType.isAssignableFrom(e)}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return bo(e)?Nr():Vr(t,e,"Value is not a valid identifier, which is a string or a number")}}),Object.defineProperty(t.prototype,"fireInvalidated",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){var i=t.parent;if(i&&i.isAlive){var o=i.storedValue;o&&this.onInvalidated({cause:e,parent:o,invalidTarget:r?r.storedValue:void 0,invalidId:n,replaceRef:function(e){ur(t.root.storedValue,{op:"replace",value:e,path:t.path})},removeRef:function(){!function(e){return jr(e)&&(e.flags&br.Object)>0}(i.type)?ur(t.root.storedValue,{op:"remove",path:t.path}):this.replaceRef(void 0)}})}}}),Object.defineProperty(t.prototype,"addTargetNodeWatcher",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){var n=this,r=this.getValue(e);if(r){var i=Br(r),o=function(r,o){var a=function(e){switch(e){case er.beforeDestroy:return"destroy";case er.beforeDetach:return"detach";default:return}}(o);a&&n.fireInvalidated(a,e,t,i)},a=i.registerHook(er.beforeDetach,o),s=i.registerHook(er.beforeDestroy,o);return function(){a(),s()}}}}),Object.defineProperty(t.prototype,"watchTargetNodeForInvalidations",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n){var r=this;if(this.onInvalidated){var i;e.registerHook(er.beforeDestroy,(function(){i&&i()}));var o=function(o){i&&i();var a=e.parent,s=a&&a.storedValue;if(a&&a.isAlive&&s){(n?!!n.get(t,s):e.root.identifierCache.has(r.targetType,ho(t)))?i=r.addTargetNodeWatcher(e,t):o||r.fireInvalidated("invalidSnapshotReference",e,t,null)}};e.state===Mr.FINALIZED?o(!0):(e.isRoot||e.root.registerHook(er.afterCreationFinalization,(function(){e.parent&&e.parent.createObservableInstanceIfNeeded()})),e.registerHook(er.afterAttach,(function(){o(!1)})))}}}),t}(Or),oo=function(e){function t(t,n){return e.call(this,t,n)||this}return nr(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e.isAlive)return e.storedValue.resolvedValue}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue.identifier}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){var i=Hr(r)?Br(r).identifier:r,o=new no(r,this.targetType),a=$r(this,e,t,n,o);return o.node=a,this.watchTargetNodeForInvalidations(a,i,void 0),a}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){if(!e.isDetaching&&e.type===this){var i=Hr(t),o=e.storedValue;if(!i&&o.identifier===t||i&&o.resolvedValue===t)return e.setParent(n,r),e}var a=this.instantiate(n,r,void 0,t);return e.die(),a}}),t}(io),ao=function(e){function t(t,n,r){var i=e.call(this,t,r)||this;return Object.defineProperty(i,"options",{enumerable:!0,configurable:!0,writable:!0,value:n}),i}return nr(t,e),Object.defineProperty(t.prototype,"getValue",{enumerable:!1,configurable:!0,writable:!0,value:function(e){if(e.isAlive)return this.options.get(e.storedValue,e.parent?e.parent.storedValue:null)}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){var i=Hr(r)?this.options.set(r,e?e.storedValue:null):r,o=$r(this,e,t,n,i);return this.watchTargetNodeForInvalidations(o,i,this.options),o}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){var i=Hr(t)?this.options.set(t,e?e.storedValue:null):t;if(!e.isDetaching&&e.type===this&&e.storedValue===i)return e.setParent(n,r),e;var o=this.instantiate(n,r,void 0,i);return e.die(),o}}),t}(io);function so(e,t){var n=t||void 0,r=t?t.onInvalidated:void 0;return n&&(n.get||n.set)?new ao(e,{get:n.get,set:n.set},r):new oo(e,r)}var uo=function(e){function t(t,n){var r=e.call(this,t)||this;return Object.defineProperty(r,"validType",{enumerable:!0,configurable:!0,writable:!0,value:n}),Object.defineProperty(r,"flags",{enumerable:!0,configurable:!0,writable:!0,value:br.Identifier}),r}return nr(t,e),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){if(!(e&&e.type instanceof ki))throw Jr("Identifier types can only be instantiated as direct child of a model type");return $r(this,e,t,n,r)}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){if(e.storedValue!==t)throw Jr("Tried to change identifier from '"+e.storedValue+"' to '"+t+"'. Changing identifiers is not allowed.");return e.setParent(n,r),e}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){return typeof e!==this.validType?Vr(t,e,"Value is not a valid "+this.describe()+", expected a "+this.validType):Nr()}}),t}(Or),co=function(e){function t(){var t=e.call(this,"identifier","string")||this;return Object.defineProperty(t,"flags",{enumerable:!0,configurable:!0,writable:!0,value:br.Identifier}),t}return nr(t,e),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifier"}}),t}(uo),lo=function(e){function t(){return e.call(this,"identifierNumber","number")||this}return nr(t,e),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return e.storedValue}}),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return"identifierNumber"}}),t}(uo),fo=new co,po=new lo;function ho(e){return""+e}function bo(e){return"string"==typeof e||"number"==typeof e}var vo,yo=function(e){function t(t){var n=e.call(this,t.name)||this;return Object.defineProperty(n,"options",{enumerable:!0,configurable:!0,writable:!0,value:t}),Object.defineProperty(n,"flags",{enumerable:!0,configurable:!0,writable:!0,value:br.Custom}),n}return nr(t,e),Object.defineProperty(t.prototype,"describe",{enumerable:!1,configurable:!0,writable:!0,value:function(){return this.name}}),Object.defineProperty(t.prototype,"isValidSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t){if(this.options.isTargetType(e))return Nr();var n=this.options.getValidationMessage(e);return n?Vr(t,e,"Invalid value for type '"+this.name+"': "+n):Nr()}}),Object.defineProperty(t.prototype,"getSnapshot",{enumerable:!1,configurable:!0,writable:!0,value:function(e){return this.options.toSnapshot(e.storedValue)}}),Object.defineProperty(t.prototype,"instantiate",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){return $r(this,e,t,n,this.options.isTargetType(r)?r:this.options.fromSnapshot(r,e&&e.root.environment))}}),Object.defineProperty(t.prototype,"reconcile",{enumerable:!1,configurable:!0,writable:!0,value:function(e,t,n,r){var i=!this.options.isTargetType(t);if(!e.isDetaching&&(e.type===this&&(i?t===e.snapshot:t===e.storedValue)))return e.setParent(n,r),e;var o=i?this.options.fromSnapshot(t,n.root.environment):t,a=this.instantiate(n,r,void 0,o);return e.die(),a}}),t}(Or),go={enumeration:function(e,t){var n="string"==typeof e?t:e,r=Ki.apply(void 0,ar(n.map((function(e){return Hi(""+e)}))));return"string"==typeof e&&(r.name=e),r},model:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="string"==typeof e[0]?e.shift():"AnonymousModel",r=e.shift()||{};return new ki({name:n,properties:r})},compose:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="string"==typeof e[0],r=n?e[0]:"AnonymousModel";return n&&e.shift(),e.reduce((function(e,t){return e.cloneAndEnhance({name:e.name+"_"+t.name,properties:t.properties,initializers:t.initializers,preProcessor:function(n){return t.applySnapshotPreProcessor(e.applySnapshotPreProcessor(n))},postProcessor:function(n){return t.applySnapshotPostProcessor(e.applySnapshotPostProcessor(n))}})})).named(r)},custom:function(e){return new yo(e)},reference:so,safeReference:function(e,t){var n=so(e,rr(rr({},t),{onInvalidated:function(e){t&&t.onInvalidated&&t.onInvalidated(e),e.removeRef()}}));return t&&!1===t.acceptsUndefined?n:Zi(n)},union:Ki,optional:Wi,literal:Hi,maybe:Zi,maybeNull:function(e){return Ki(e,Xi)},refinement:function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n="string"==typeof e[0]?e.shift():jr(e[0])?e[0].name:null,r=e[0],i=e[1],o=e[2]?e[2]:function(e){return"Value does not respect the refinement predicate"};return new Bi(n,r,i,o)},string:Ni,boolean:Ui,number:Vi,integer:Ri,Date:Li,map:function(e){return new Oi("map<string, "+e.name+">",e)},array:function(e){return new ji(e.name+"[]",e)},frozen:function(e){return 0===arguments.length?to:jr(e)?new eo(e):Wi(to,e)},identifier:fo,identifierNumber:po,late:function(e,t){var n="string"==typeof e?e:"late("+e.toString()+")";return new Ji(n,"string"==typeof e?t:e)},undefined:Fi,null:Mi,snapshotProcessor:function(e,t,n){return new yi(e,t,n)}},mo=new Uint8Array(16);function _o(){if(!vo&&!(vo="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vo(mo)}var wo=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Oo(e){return"string"==typeof e&&wo.test(e)}for(var jo=[],Po=0;Po<256;++Po)jo.push((Po+256).toString(16).substr(1));function So(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=(jo[e[t+0]]+jo[e[t+1]]+jo[e[t+2]]+jo[e[t+3]]+"-"+jo[e[t+4]]+jo[e[t+5]]+"-"+jo[e[t+6]]+jo[e[t+7]]+"-"+jo[e[t+8]]+jo[e[t+9]]+"-"+jo[e[t+10]]+jo[e[t+11]]+jo[e[t+12]]+jo[e[t+13]]+jo[e[t+14]]+jo[e[t+15]]).toLowerCase();if(!Oo(n))throw TypeError("Stringified UUID is invalid");return n}function Ao(e,t,n){var r=(e=e||{}).random||(e.rng||_o)();if(r[6]=15&r[6]|64,r[8]=63&r[8]|128,t){n=n||0;for(var i=0;i<16;++i)t[n+i]=r[i];return t}return So(r)}function xo(e,t,n,r){switch(e){case 0:return t&n^~t&r;case 1:return t^n^r;case 2:return t&n^t&r^n&r;case 3:return t^n^r}}function Eo(e,t){return e<<t|e>>>32-t}var To=function(e,t,n){function r(e,r,i,o){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],n=0;n<e.length;++n)t.push(e.charCodeAt(n));return t}(e)),"string"==typeof r&&(r=function(e){if(!Oo(e))throw TypeError("Invalid UUID");var t,n=new Uint8Array(16);return n[0]=(t=parseInt(e.slice(0,8),16))>>>24,n[1]=t>>>16&255,n[2]=t>>>8&255,n[3]=255&t,n[4]=(t=parseInt(e.slice(9,13),16))>>>8,n[5]=255&t,n[6]=(t=parseInt(e.slice(14,18),16))>>>8,n[7]=255&t,n[8]=(t=parseInt(e.slice(19,23),16))>>>8,n[9]=255&t,n[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,n[11]=t/4294967296&255,n[12]=t>>>24&255,n[13]=t>>>16&255,n[14]=t>>>8&255,n[15]=255&t,n}(r)),16!==r.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var a=new Uint8Array(16+e.length);if(a.set(r),a.set(e,r.length),(a=n(a))[6]=15&a[6]|t,a[8]=63&a[8]|128,i){o=o||0;for(var s=0;s<16;++s)i[o+s]=a[s];return i}return So(a)}try{r.name=e}catch(e){}return r.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",r.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",r}("v5",80,(function(e){var t=[1518500249,1859775393,2400959708,3395469782],n=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var r=unescape(encodeURIComponent(e));e=[];for(var i=0;i<r.length;++i)e.push(r.charCodeAt(i))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var o=e.length/4+2,a=Math.ceil(o/16),s=new Array(a),u=0;u<a;++u){for(var c=new Uint32Array(16),l=0;l<16;++l)c[l]=e[64*u+4*l]<<24|e[64*u+4*l+1]<<16|e[64*u+4*l+2]<<8|e[64*u+4*l+3];s[u]=c}s[a-1][14]=8*(e.length-1)/Math.pow(2,32),s[a-1][14]=Math.floor(s[a-1][14]),s[a-1][15]=8*(e.length-1)&4294967295;for(var f=0;f<a;++f){for(var p=new Uint32Array(80),h=0;h<16;++h)p[h]=s[f][h];for(var b=16;b<80;++b)p[b]=Eo(p[b-3]^p[b-8]^p[b-14]^p[b-16],1);for(var d=n[0],v=n[1],y=n[2],g=n[3],m=n[4],_=0;_<80;++_){var w=Math.floor(_/20),O=Eo(d,5)+xo(w,v,y,g)+m+t[w]+p[_]>>>0;m=g,g=y,y=Eo(v,30)>>>0,v=d,d=O}n[0]=n[0]+d>>>0,n[1]=n[1]+v>>>0,n[2]=n[2]+y>>>0,n[3]=n[3]+g>>>0,n[4]=n[4]+m>>>0}return[n[0]>>24&255,n[0]>>16&255,n[0]>>8&255,255&n[0],n[1]>>24&255,n[1]>>16&255,n[1]>>8&255,255&n[1],n[2]>>24&255,n[2]>>16&255,n[2]>>8&255,255&n[2],n[3]>>24&255,n[3]>>16&255,n[3]>>8&255,255&n[3],n[4]>>24&255,n[4]>>16&255,n[4]>>8&255,255&n[4]]}));
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
const Io=go.enumeration("TaskState",["free","pending","complete","error","destroyed"]),Co={anyType:go.custom({name:"any",fromSnapshot:e=>e,toSnapshot:e=>e,isTargetType:()=>!0,getValidationMessage:()=>""})},ko=go.model({uuid:go.string,spiderUUID:go.string,dataSlide:go.array(go.string),dataSlideUUID:go.string,createdAt:go.Date,errorMessage:go.optional(go.string,""),status:Io,updatedAt:go.Date,originData:go.maybe(Co.anyType),output:go.maybe(Co.anyType)}).actions((e=>({$backup:()=>cr(e),$import(e){return Br(e).applySnapshot(t);var t},start(){if("pending"===e.status)throw new Error("Task 处在 pending 状态");return e.dataSlide=[],e.dataSlideUUID="",e.status="pending",e.output||e.originData},success(t,n){e.status="free",e.output=t,this._addUUIDToDataSlide(n)},complete(t){e.status="complete",this._addUUIDToDataSlide(t)},error(t="",n){e.status="error",e.errorMessage=t,this._addUUIDToDataSlide(n)},destroy(){var t;(t=Br(e)).isRoot?t.die():t.parent.removeChild(t.subpath)},_addUUIDToDataSlide(t){t&&(e.dataSlide.push(t),e.dataSlideUUID=t)}})));function Do(e){return ko.create(function({spiderUUID:e,originData:t}){return{uuid:Ao(),spiderUUID:e,createdAt:new Date,errorMessage:"",status:"free",updatedAt:new Date,dataSlideUUID:e,dataSlide:[],originData:t,output:null}}(e))}
/*! *****************************************************************************
  Copyright (c) Microsoft Corporation.

  Permission to use, copy, modify, and/or distribute this software for any
  purpose with or without fee is hereby granted.

  THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
  REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
  AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
  INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
  LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
  OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
  PERFORMANCE OF THIS SOFTWARE.
  ***************************************************************************** */var No=function(e,t){return(No=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])})(e,t)};function Vo(e,t){function n(){this.constructor=e}No(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function Ro(e){return"function"==typeof e}var Uo=!1,Mo={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack;Uo=e},get useDeprecatedSynchronousErrorHandling(){return Uo}};function Fo(e){setTimeout((function(){throw e}),0)}var zo={closed:!0,next:function(e){},error:function(e){if(Mo.useDeprecatedSynchronousErrorHandling)throw e;Fo(e)},complete:function(){}},Lo=function(){return Array.isArray||function(e){return e&&"number"==typeof e.length}}();function $o(e){return null!==e&&"object"==typeof e}var Ho=function(){function e(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}return e.prototype=Object.create(Error.prototype),e}(),Bo=function(){function e(e){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,e&&(this._ctorUnsubscribe=!0,this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var t;if(!this.closed){var n=this,r=n._parentOrParents,i=n._ctorUnsubscribe,o=n._unsubscribe,a=n._subscriptions;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,r instanceof e)r.remove(this);else if(null!==r)for(var s=0;s<r.length;++s){r[s].remove(this)}if(Ro(o)){i&&(this._unsubscribe=void 0);try{o.call(this)}catch(e){t=e instanceof Ho?Go(e.errors):[e]}}if(Lo(a)){s=-1;for(var u=a.length;++s<u;){var c=a[s];if($o(c))try{c.unsubscribe()}catch(e){t=t||[],e instanceof Ho?t=t.concat(Go(e.errors)):t.push(e)}}}if(t)throw new Ho(t)}},e.prototype.add=function(t){var n=t;if(!t)return e.EMPTY;switch(typeof t){case"function":n=new e(t);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof e)){var r=n;(n=new e)._subscriptions=[r]}break;default:throw new Error("unrecognized teardown "+t+" added to Subscription.")}var i=n._parentOrParents;if(null===i)n._parentOrParents=this;else if(i instanceof e){if(i===this)return n;n._parentOrParents=[i,this]}else{if(-1!==i.indexOf(this))return n;i.push(this)}var o=this._subscriptions;return null===o?this._subscriptions=[n]:o.push(n),n},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function Go(e){return e.reduce((function(e,t){return e.concat(t instanceof Ho?t.errors:t)}),[])}var Ko=function(){return"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random()}(),qo=function(e){function t(n,r,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=zo;break;case 1:if(!n){o.destination=zo;break}if("object"==typeof n){n instanceof t?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new Wo(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new Wo(o,n,r,i)}return o}return Vo(t,e),t.prototype[Ko]=function(){return this},t.create=function(e,n,r){var i=new t(e,n,r);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parentOrParents;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=e,this},t}(Bo),Wo=function(e){function t(t,n,r,i){var o,a=e.call(this)||this;a._parentSubscriber=t;var s=a;return Ro(n)?o=n:n&&(o=n.next,r=n.error,i=n.complete,n!==zo&&(Ro((s=Object.create(n)).unsubscribe)&&a.add(s.unsubscribe.bind(s)),s.unsubscribe=a.unsubscribe.bind(a))),a._context=s,a._next=o,a._error=r,a._complete=i,a}return Vo(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;Mo.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,n=Mo.useDeprecatedSynchronousErrorHandling;if(this._error)n&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)n?(t.syncErrorValue=e,t.syncErrorThrown=!0):Fo(e),this.unsubscribe();else{if(this.unsubscribe(),n)throw e;Fo(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var n=function(){return e._complete.call(e._context)};Mo.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),Mo.useDeprecatedSynchronousErrorHandling)throw e;Fo(e)}},t.prototype.__tryOrSetError=function(e,t,n){if(!Mo.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,n)}catch(t){return Mo.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(Fo(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(qo);var Yo=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}();function Qo(e){return e}function Xo(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return Zo(e)}function Zo(e){return 0===e.length?Qo:1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}}var Jo=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var n=new e;return n.source=this,n.operator=t,n},e.prototype.subscribe=function(e,t,n){var r=this.operator,i=function(e,t,n){if(e){if(e instanceof qo)return e;if(e[Ko])return e[Ko]()}return e||t||n?new qo(e,t,n):new qo(zo)}(e,t,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||Mo.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),Mo.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){Mo.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),!function(e){for(;e;){var t=e,n=t.closed,r=t.destination,i=t.isStopped;if(n||i)return!1;e=r&&r instanceof qo?r:null}return!0}(e)?console.warn(t):e.error(t)}},e.prototype.forEach=function(e,t){var n=this;return new(t=ea(t))((function(t,r){var i;i=n.subscribe((function(t){try{e(t)}catch(e){r(e),i&&i.unsubscribe()}}),r,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[Yo]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:Zo(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=ea(e))((function(e,n){var r;t.subscribe((function(e){return r=e}),(function(e){return n(e)}),(function(){return e(r)}))}))},e.create=function(t){return new e(t)},e}();function ea(e){if(e||(e=Promise),!e)throw new Error("no Promise impl found");return e}var ta=function(){function e(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return e.prototype=Object.create(Error.prototype),e}(),na=function(e){function t(t,n){var r=e.call(this)||this;return r.subject=t,r.subscriber=n,r.closed=!1,r}return Vo(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var n=t.indexOf(this.subscriber);-1!==n&&t.splice(n,1)}}},t}(Bo),ra=function(e){function t(t){var n=e.call(this,t)||this;return n.destination=t,n}return Vo(t,e),t}(qo),ia=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return Vo(t,e),t.prototype[Ko]=function(){return new ra(this)},t.prototype.lift=function(e){var t=new oa(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new ta;if(!this.isStopped)for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new ta;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,n=t.length,r=t.slice(),i=0;i<n;i++)r[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new ta;this.isStopped=!0;for(var e=this.observers,t=e.length,n=e.slice(),r=0;r<t;r++)n[r].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new ta;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new ta;return this.hasError?(e.error(this.thrownError),Bo.EMPTY):this.isStopped?(e.complete(),Bo.EMPTY):(this.observers.push(e),new na(this,e))},t.prototype.asObservable=function(){var e=new Jo;return e.source=this,e},t.create=function(e,t){return new oa(e,t)},t}(Jo),oa=function(e){function t(t,n){var r=e.call(this)||this;return r.destination=t,r.source=n,r}return Vo(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):Bo.EMPTY},t}(ia);function aa(){return function(e){return e.lift(new sa(e))}}var sa=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var n=this.connectable;n._refCount++;var r=new ua(e,n),i=t.subscribe(r);return r.closed||(r.connection=n.connect()),i},e}(),ua=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return Vo(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var n=this.connection,r=e._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},t}(qo),ca=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return Vo(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new Bo).add(this.source.subscribe(new fa(this.getSubject(),this))),e.closed&&(this._connection=null,e=Bo.EMPTY)),e},t.prototype.refCount=function(){return aa()(this)},t}(Jo),la=function(){var e=ca.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:e._subscribe},_isComplete:{value:e._isComplete,writable:!0},getSubject:{value:e.getSubject},connect:{value:e.connect},refCount:{value:e.refCount}}}(),fa=function(e){function t(t,n){var r=e.call(this,t)||this;return r.connectable=n,r}return Vo(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(ra),pa=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.scheduler=t,r.work=n,r.pending=!1,r}return Vo(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(r,this.id,t),this},t.prototype.requestAsyncId=function(e,t,n){return void 0===n&&(n=0),setInterval(e.flush.bind(e,this),n)},t.prototype.recycleAsyncId=function(e,t,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(e,t);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var n=!1,r=void 0;try{this.work(e)}catch(e){n=!0,r=!!e&&e||new Error(e)}if(n)return this.unsubscribe(),r},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,n=t.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,n){return e.call(this)||this}return Vo(t,e),t.prototype.schedule=function(e,t){return this},t}(Bo)),ha=function(){function e(t,n){void 0===n&&(n=e.now),this.SchedulerAction=t,this.now=n}return e.prototype.schedule=function(e,t,n){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(n,t)},e.now=function(){return Date.now()},e}(),ba=function(e){function t(n,r){void 0===r&&(r=ha.now);var i=e.call(this,n,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return Vo(t,e),t.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),t.delegate&&t.delegate!==this?t.delegate.schedule(n,r,i):e.prototype.schedule.call(this,n,r,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var n;this.active=!0;do{if(n=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,n){for(;e=t.shift();)e.unsubscribe();throw n}}},t}(ha),da=new Jo((function(e){return e.complete()}));function va(e){return e&&"function"==typeof e.schedule}var ya=function(e){return function(t){for(var n=0,r=e.length;n<r&&!t.closed;n++)t.next(e[n]);t.complete()}};function ga(e,t){return new Jo((function(n){var r=new Bo,i=0;return r.add(t.schedule((function(){i!==e.length?(n.next(e[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}))}function ma(e,t){return t?ga(e,t):new Jo(ya(e))}function _a(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=e[e.length-1];return va(n)?(e.pop(),ga(e,n)):ma(e)}var wa=new ba(pa);function Oa(){}function ja(e,t){return function(n){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Pa(e,t))}}var Pa=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Sa(e,this.project,this.thisArg))},e}(),Sa=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return Vo(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(qo),Aa=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vo(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(qo),xa=function(e){function t(t,n,r){var i=e.call(this)||this;return i.parent=t,i.outerValue=n,i.outerIndex=r,i.index=0,i}return Vo(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(qo);function Ea(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Ta=Ea(),Ia=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function Ca(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var ka=function(e){if(e&&"function"==typeof e[Yo])return r=e,function(e){var t=r[Yo]();if("function"!=typeof t.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return t.subscribe(e)};if(Ia(e))return ya(e);if(Ca(e))return n=e,function(e){return n.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,Fo),e};if(e&&"function"==typeof e[Ta])return t=e,function(e){for(var n=t[Ta]();;){var r=void 0;try{r=n.next()}catch(t){return e.error(t),e}if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e};var t,n,r,i=$o(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+i+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Da(e,t){if(null!=e){if(function(e){return e&&"function"==typeof e[Yo]}(e))return function(e,t){return new Jo((function(n){var r=new Bo;return r.add(t.schedule((function(){var i=e[Yo]();r.add(i.subscribe({next:function(e){r.add(t.schedule((function(){return n.next(e)})))},error:function(e){r.add(t.schedule((function(){return n.error(e)})))},complete:function(){r.add(t.schedule((function(){return n.complete()})))}}))}))),r}))}(e,t);if(Ca(e))return function(e,t){return new Jo((function(n){var r=new Bo;return r.add(t.schedule((function(){return e.then((function(e){r.add(t.schedule((function(){n.next(e),r.add(t.schedule((function(){return n.complete()})))})))}),(function(e){r.add(t.schedule((function(){return n.error(e)})))}))}))),r}))}(e,t);if(Ia(e))return ga(e,t);if(function(e){return e&&"function"==typeof e[Ta]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new Jo((function(n){var r,i=new Bo;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(t.schedule((function(){r=e[Ta](),i.add(t.schedule((function(){if(!n.closed){var e,t;try{var i=r.next();e=i.value,t=i.done}catch(e){return void n.error(e)}t?n.complete():(n.next(e),this.schedule())}})))}))),i}))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Na(e,t){return t?Da(e,t):e instanceof Jo?e:new Jo(ka(e))}var Va=function(e){function t(t){var n=e.call(this)||this;return n.parent=t,n}return Vo(t,e),t.prototype._next=function(e){this.parent.notifyNext(e)},t.prototype._error=function(e){this.parent.notifyError(e),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(),this.unsubscribe()},t}(qo),Ra=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return Vo(t,e),t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyError=function(e){this.destination.error(e)},t.prototype.notifyComplete=function(){this.destination.complete()},t}(qo);function Ua(e,t){if(!t.closed)return e instanceof Jo?e.subscribe(t):ka(e)(t)}function Ma(e,t,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof t?function(r){return r.pipe(Ma((function(n,r){return Na(e(n,r)).pipe(ja((function(e,i){return t(n,e,r,i)})))}),n))}:("number"==typeof t&&(n=t),function(t){return t.lift(new Fa(e,n))})}var Fa=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new za(e,this.project,this.concurrent))},e}(),za=function(e){function t(t,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return Vo(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t)},t.prototype._innerSub=function(e){var t=new Va(this),n=this.destination;n.add(t);var r=Ua(e,t);r!==t&&n.add(r)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e){this.destination.next(e)},t.prototype.notifyComplete=function(){var e=this.buffer;this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Ra);function La(e,t,n){return n?La(e,t).pipe(ja((function(e){return Lo(e)?n.apply(void 0,e):n(e)}))):new Jo((function(n){var r,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n.next(1===e.length?e[0]:e)};try{r=e(i)}catch(e){return void n.error(e)}if(Ro(t))return function(){return t(i,r)}}))}function $a(e){return!Lo(e)&&e-parseFloat(e)+1>=0}function Ha(e,t){return function(n){return n.lift(new Ba(e,t))}}var Ba=function(){function e(e,t){this.predicate=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Ga(e,this.predicate,this.thisArg))},e}(),Ga=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.predicate=n,i.thisArg=r,i.count=0,i}return Vo(t,e),t.prototype._next=function(e){var t;try{t=this.predicate.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}t&&this.destination.next(e)},t}(qo);function Ka(e,t,n){void 0===e&&(e=0);var r=-1;return $a(t)?r=Number(t)<1?1:Number(t):va(t)&&(n=t),va(n)||(n=wa),new Jo((function(t){var i=$a(e)?e:+e-n.now();return n.schedule(qa,i,{index:0,period:r,subscriber:t})}))}function qa(e){var t=e.index,n=e.period,r=e.subscriber;if(r.next(t),!r.closed){if(-1===n)return r.complete();e.index=t+1,this.schedule(e,n)}}var Wa="object"==typeof global&&global&&global.Object===Object&&global,Ya="object"==typeof self&&self&&self.Object===Object&&self,Qa=Wa||Ya||Function("return this")(),Xa=Qa.Symbol,Za=Object.prototype,Ja=Za.hasOwnProperty,es=Za.toString,ts=Xa?Xa.toStringTag:void 0;var ns=Object.prototype.toString;var rs=Xa?Xa.toStringTag:void 0;function is(e){return null==e?void 0===e?"[object Undefined]":"[object Null]":rs&&rs in Object(e)?function(e){var t=Ja.call(e,ts),n=e[ts];try{e[ts]=void 0;var r=!0}catch(e){}var i=es.call(e);return r&&(t?e[ts]=n:delete e[ts]),i}(e):function(e){return ns.call(e)}(e)}function os(e){return null!=e&&"object"==typeof e}function as(e){return"symbol"==typeof e||os(e)&&"[object Symbol]"==is(e)}function ss(e,t){for(var n=-1,r=null==e?0:e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}var us=Array.isArray,cs=Xa?Xa.prototype:void 0,ls=cs?cs.toString:void 0;function fs(e){if("string"==typeof e)return e;if(us(e))return ss(e,fs)+"";if(as(e))return ls?ls.call(e):"";var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function ps(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function hs(e){return e}function bs(e){if(!ps(e))return!1;var t=is(e);return"[object Function]"==t||"[object GeneratorFunction]"==t||"[object AsyncFunction]"==t||"[object Proxy]"==t}var ds,vs=Qa["__core-js_shared__"],ys=(ds=/[^.]+$/.exec(vs&&vs.keys&&vs.keys.IE_PROTO||""))?"Symbol(src)_1."+ds:"";var gs=Function.prototype.toString;var ms=/^\[object .+?Constructor\]$/,_s=Function.prototype,ws=Object.prototype,Os=_s.toString,js=ws.hasOwnProperty,Ps=RegExp("^"+Os.call(js).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Ss(e){return!(!ps(e)||(t=e,ys&&ys in t))&&(bs(e)?Ps:ms).test(function(e){if(null!=e){try{return gs.call(e)}catch(e){}try{return e+""}catch(e){}}return""}(e));var t}function As(e,t){var n=function(e,t){return null==e?void 0:e[t]}(e,t);return Ss(n)?n:void 0}function xs(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var Es=Date.now;var Ts,Is,Cs,ks=function(){try{var e=As(Object,"defineProperty");return e({},"",{}),e}catch(e){}}(),Ds=(Ts=ks?function(e,t){return ks(e,"toString",{configurable:!0,enumerable:!1,value:(n=t,function(){return n}),writable:!0});var n}:hs,Is=0,Cs=0,function(){var e=Es(),t=16-(e-Cs);if(Cs=e,t>0){if(++Is>=800)return arguments[0]}else Is=0;return Ts.apply(void 0,arguments)});function Ns(e){return e!=e}function Vs(e,t){return!!(null==e?0:e.length)&&function(e,t,n){return t==t?function(e,t,n){for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}(e,t,n):function(e,t,n,r){for(var i=e.length,o=n+(r?1:-1);r?o--:++o<i;)if(t(e[o],o,e))return o;return-1}(e,Ns,n)}(e,t,0)>-1}var Rs=/^(?:0|[1-9]\d*)$/;function Us(e,t){var n=typeof e;return!!(t=null==t?9007199254740991:t)&&("number"==n||"symbol"!=n&&Rs.test(e))&&e>-1&&e%1==0&&e<t}function Ms(e,t){return e===t||e!=e&&t!=t}var Fs=Object.prototype.hasOwnProperty;function zs(e,t,n){var r=e[t];Fs.call(e,t)&&Ms(r,n)&&(void 0!==n||t in e)||function(e,t,n){"__proto__"==t&&ks?ks(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}(e,t,n)}var Ls=Math.max;function $s(e,t,n){return t=Ls(void 0===t?e.length-1:t,0),function(){for(var r=arguments,i=-1,o=Ls(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];i=-1;for(var s=Array(t+1);++i<t;)s[i]=r[i];return s[t]=n(a),xs(e,this,s)}}function Hs(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=9007199254740991}function Bs(e){return os(e)&&"[object Arguments]"==is(e)}var Gs=Object.prototype,Ks=Gs.hasOwnProperty,qs=Gs.propertyIsEnumerable,Ws=Bs(function(){return arguments}())?Bs:function(e){return os(e)&&Ks.call(e,"callee")&&!qs.call(e,"callee")};function Ys(e){return function(t){return e(t)}}var Qs="object"==typeof exports&&exports&&!exports.nodeType&&exports,Xs=Qs&&"object"==typeof module&&module&&!module.nodeType&&module,Zs=Xs&&Xs.exports===Qs&&Wa.process,Js=function(){try{var e=Xs&&Xs.require&&Xs.require("util").types;return e||Zs&&Zs.binding&&Zs.binding("util")}catch(e){}}(),eu=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,tu=/^\w*$/;var nu=As(Object,"create");var ru=Object.prototype.hasOwnProperty;var iu=Object.prototype.hasOwnProperty;function ou(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function au(e,t){for(var n=e.length;n--;)if(Ms(e[n][0],t))return n;return-1}ou.prototype.clear=function(){this.__data__=nu?nu(null):{},this.size=0},ou.prototype.delete=function(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t},ou.prototype.get=function(e){var t=this.__data__;if(nu){var n=t[e];return"__lodash_hash_undefined__"===n?void 0:n}return ru.call(t,e)?t[e]:void 0},ou.prototype.has=function(e){var t=this.__data__;return nu?void 0!==t[e]:iu.call(t,e)},ou.prototype.set=function(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=nu&&void 0===t?"__lodash_hash_undefined__":t,this};var su=Array.prototype.splice;function uu(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}uu.prototype.clear=function(){this.__data__=[],this.size=0},uu.prototype.delete=function(e){var t=this.__data__,n=au(t,e);return!(n<0)&&(n==t.length-1?t.pop():su.call(t,n,1),--this.size,!0)},uu.prototype.get=function(e){var t=this.__data__,n=au(t,e);return n<0?void 0:t[n][1]},uu.prototype.has=function(e){return au(this.__data__,e)>-1},uu.prototype.set=function(e,t){var n=this.__data__,r=au(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this};var cu=As(Qa,"Map");function lu(e,t){var n=e.__data__;return function(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}(t)?n["string"==typeof t?"string":"hash"]:n.map}function fu(e){var t=-1,n=null==e?0:e.length;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}fu.prototype.clear=function(){this.size=0,this.__data__={hash:new ou,map:new(cu||uu),string:new ou}},fu.prototype.delete=function(e){var t=lu(this,e).delete(e);return this.size-=t?1:0,t},fu.prototype.get=function(e){return lu(this,e).get(e)},fu.prototype.has=function(e){return lu(this,e).has(e)},fu.prototype.set=function(e,t){var n=lu(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this};function pu(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new TypeError("Expected a function");var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a)||o,a};return n.cache=new(pu.Cache||fu),n}pu.Cache=fu;var hu=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,bu=/\\(\\)?/g,du=function(e){var t=pu(e,(function(e){return 500===n.size&&n.clear(),e})),n=t.cache;return t}((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(hu,(function(e,n,r,i){t.push(r?i.replace(bu,"$1"):n||e)})),t}));function vu(e,t){return us(e)?e:function(e,t){if(us(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!as(e))||tu.test(e)||!eu.test(e)||null!=t&&e in Object(t)}(e,t)?[e]:du(function(e){return null==e?"":fs(e)}(e))}function yu(e){if("string"==typeof e||as(e))return e;var t=e+"";return"0"==t&&1/e==-Infinity?"-0":t}function gu(e,t){for(var n=0,r=(t=vu(t,e)).length;null!=e&&n<r;)e=e[yu(t[n++])];return n&&n==r?e:void 0}function mu(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}var _u=Xa?Xa.isConcatSpreadable:void 0;function wu(e){return us(e)||Ws(e)||!!(_u&&e&&e[_u])}function Ou(e,t,n,r,i){var o=-1,a=e.length;for(n||(n=wu),i||(i=[]);++o<a;){var s=e[o];t>0&&n(s)?t>1?Ou(s,t-1,n,r,i):mu(i,s):r||(i[i.length]=s)}return i}function ju(e){return(null==e?0:e.length)?Ou(e,1):[]}function Pu(e){var t=-1,n=null==e?0:e.length;for(this.__data__=new fu;++t<n;)this.add(e[t])}function Su(e,t){return e.has(t)}function Au(e,t){return null!=e&&t in Object(e)}function xu(e,t){return null!=e&&function(e,t,n){for(var r=-1,i=(t=vu(t,e)).length,o=!1;++r<i;){var a=yu(t[r]);if(!(o=null!=e&&n(e,a)))break;e=e[a]}return o||++r!=i?o:!!(i=null==e?0:e.length)&&Hs(i)&&Us(a,i)&&(us(e)||Ws(e))}(e,t,Au)}function Eu(e){return os(e)&&function(e){return null!=e&&Hs(e.length)&&!bs(e)}(e)}function Tu(e,t,n){for(var r=-1,i=null==e?0:e.length;++r<i;)if(n(t,e[r]))return!0;return!1}Pu.prototype.add=Pu.prototype.push=function(e){return this.__data__.set(e,"__lodash_hash_undefined__"),this},Pu.prototype.has=function(e){return this.__data__.has(e)};var Iu=function(e,t){return Ds($s(e,t,hs),e+"")}((function(e,t){return Eu(e)?function(e,t,n,r){var i=-1,o=Vs,a=!0,s=e.length,u=[],c=t.length;if(!s)return u;n&&(t=ss(t,Ys(n))),r?(o=Tu,a=!1):t.length>=200&&(o=Su,a=!1,t=new Pu(t));e:for(;++i<s;){var l=e[i],f=null==n?l:n(l);if(l=r||0!==l?l:0,a&&f==f){for(var p=c;p--;)if(t[p]===f)continue e;u.push(l)}else o(t,f,r)||u.push(l)}return u}(e,Ou(t,1,Eu,!0)):[]}));var Cu=Js&&Js.isRegExp,ku=Cu?Ys(Cu):function(e){return os(e)&&"[object RegExp]"==is(e)};function Du(e,t,n,r){if(!ps(e))return e;for(var i=-1,o=(t=vu(t,e)).length,a=o-1,s=e;null!=s&&++i<o;){var u=yu(t[i]),c=n;if("__proto__"===u||"constructor"===u||"prototype"===u)return e;if(i!=a){var l=s[u];void 0===(c=r?r(l,u,s):void 0)&&(c=ps(l)?l:Us(t[i+1])?[]:{})}zs(s,u,c),s=s[u]}return e}function Nu(e,t){return function(e,t,n){for(var r=-1,i=t.length,o={};++r<i;){var a=t[r],s=gu(e,a);n(s,a)&&Du(o,vu(a,e),s)}return o}(e,t,(function(t,n){return xu(e,n)}))}var Vu=function(e){return Ds($s(e,void 0,ju),e+"")}((function(e,t){return null==e?{}:Nu(e,t)}));function Ru(e){var t=arguments.length,n=wa;va(arguments[arguments.length-1])&&(n=arguments[arguments.length-1],t--);var r=null;t>=2&&(r=arguments[1]);var i=Number.POSITIVE_INFINITY;return t>=3&&(i=arguments[2]),function(t){return t.lift(new Uu(e,r,i,n))}}var Uu=function(){function e(e,t,n,r){this.bufferTimeSpan=e,this.bufferCreationInterval=t,this.maxBufferSize=n,this.scheduler=r}return e.prototype.call=function(e,t){return t.subscribe(new Fu(e,this.bufferTimeSpan,this.bufferCreationInterval,this.maxBufferSize,this.scheduler))},e}(),Mu=function(){return function(){this.buffer=[]}}(),Fu=function(e){function t(t,n,r,i,o){var a=e.call(this,t)||this;a.bufferTimeSpan=n,a.bufferCreationInterval=r,a.maxBufferSize=i,a.scheduler=o,a.contexts=[];var s=a.openContext();if(a.timespanOnly=null==r||r<0,a.timespanOnly){var u={subscriber:a,context:s,bufferTimeSpan:n};a.add(s.closeAction=o.schedule(zu,n,u))}else{var c={subscriber:a,context:s},l={bufferTimeSpan:n,bufferCreationInterval:r,subscriber:a,scheduler:o};a.add(s.closeAction=o.schedule($u,n,c)),a.add(o.schedule(Lu,r,l))}return a}return Vo(t,e),t.prototype._next=function(e){for(var t,n=this.contexts,r=n.length,i=0;i<r;i++){var o=n[i],a=o.buffer;a.push(e),a.length==this.maxBufferSize&&(t=o)}t&&this.onBufferFull(t)},t.prototype._error=function(t){this.contexts.length=0,e.prototype._error.call(this,t)},t.prototype._complete=function(){for(var t=this.contexts,n=this.destination;t.length>0;){var r=t.shift();n.next(r.buffer)}e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){this.contexts=null},t.prototype.onBufferFull=function(e){this.closeContext(e);var t=e.closeAction;if(t.unsubscribe(),this.remove(t),!this.closed&&this.timespanOnly){e=this.openContext();var n=this.bufferTimeSpan,r={subscriber:this,context:e,bufferTimeSpan:n};this.add(e.closeAction=this.scheduler.schedule(zu,n,r))}},t.prototype.openContext=function(){var e=new Mu;return this.contexts.push(e),e},t.prototype.closeContext=function(e){this.destination.next(e.buffer);var t=this.contexts;(t?t.indexOf(e):-1)>=0&&t.splice(t.indexOf(e),1)},t}(qo);function zu(e){var t=e.subscriber,n=e.context;n&&t.closeContext(n),t.closed||(e.context=t.openContext(),e.context.closeAction=this.schedule(e,e.bufferTimeSpan))}function Lu(e){var t=e.bufferCreationInterval,n=e.bufferTimeSpan,r=e.subscriber,i=e.scheduler,o=r.openContext();r.closed||(r.add(o.closeAction=i.schedule($u,n,{subscriber:r,context:o})),this.schedule(e,t))}function $u(e){var t=e.subscriber,n=e.context;t.closeContext(n)}function Hu(e){return function(t){var n=new Bu(e),r=t.lift(n);return n.caught=r}}var Bu=function(){function e(e){this.selector=e}return e.prototype.call=function(e,t){return t.subscribe(new Gu(e,this.selector,this.caught))},e}(),Gu=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.selector=n,i.caught=r,i}return Vo(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=void 0;try{n=this.selector(t,this.caught)}catch(t){return void e.prototype.error.call(this,t)}this._unsubscribeAndRecycle();var r=new Va(this);this.add(r);var i=Ua(n,r);i!==r&&this.add(i)}},t}(Ra);function Ku(e,t){return Ma(e,t,1)}function qu(e,t){return t?function(n){return new Qu(n,t).lift(new Wu(e))}:function(t){return t.lift(new Wu(e))}}var Wu=function(){function e(e){this.delayDurationSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Yu(e,this.delayDurationSelector))},e}(),Yu=function(e){function t(t,n){var r=e.call(this,t)||this;return r.delayDurationSelector=n,r.completed=!1,r.delayNotifierSubscriptions=[],r.index=0,r}return Vo(t,e),t.prototype.notifyNext=function(e,t,n,r,i){this.destination.next(e),this.removeSubscription(i),this.tryComplete()},t.prototype.notifyError=function(e,t){this._error(e)},t.prototype.notifyComplete=function(e){var t=this.removeSubscription(e);t&&this.destination.next(t),this.tryComplete()},t.prototype._next=function(e){var t=this.index++;try{var n=this.delayDurationSelector(e,t);n&&this.tryDelay(n,e)}catch(e){this.destination.error(e)}},t.prototype._complete=function(){this.completed=!0,this.tryComplete(),this.unsubscribe()},t.prototype.removeSubscription=function(e){e.unsubscribe();var t=this.delayNotifierSubscriptions.indexOf(e);return-1!==t&&this.delayNotifierSubscriptions.splice(t,1),e.outerValue},t.prototype.tryDelay=function(e,t){var n=function(e,t,n,r,i){if(void 0===i&&(i=new xa(e,n,r)),!i.closed)return t instanceof Jo?t.subscribe(i):ka(t)(i)}(this,e,t);n&&!n.closed&&(this.destination.add(n),this.delayNotifierSubscriptions.push(n))},t.prototype.tryComplete=function(){this.completed&&0===this.delayNotifierSubscriptions.length&&this.destination.complete()},t}(Aa),Qu=function(e){function t(t,n){var r=e.call(this)||this;return r.source=t,r.subscriptionDelay=n,r}return Vo(t,e),t.prototype._subscribe=function(e){this.subscriptionDelay.subscribe(new Xu(e,this.source))},t}(Jo),Xu=function(e){function t(t,n){var r=e.call(this)||this;return r.parent=t,r.source=n,r.sourceSubscribed=!1,r}return Vo(t,e),t.prototype._next=function(e){this.subscribeToSource()},t.prototype._error=function(e){this.unsubscribe(),this.parent.error(e)},t.prototype._complete=function(){this.unsubscribe(),this.subscribeToSource()},t.prototype.subscribeToSource=function(){this.sourceSubscribed||(this.sourceSubscribed=!0,this.unsubscribe(),this.source.subscribe(this.parent))},t}(qo);var Zu=function(){function e(e,t,n){void 0===n&&(n=!1),this.accumulator=e,this.seed=t,this.hasSeed=n}return e.prototype.call=function(e,t){return t.subscribe(new Ju(e,this.accumulator,this.seed,this.hasSeed))},e}(),Ju=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o.accumulator=n,o._seed=r,o.hasSeed=i,o.index=0,o}return Vo(t,e),Object.defineProperty(t.prototype,"seed",{get:function(){return this._seed},set:function(e){this.hasSeed=!0,this._seed=e},enumerable:!0,configurable:!0}),t.prototype._next=function(e){if(this.hasSeed)return this._tryNext(e);this.seed=e,this.destination.next(e)},t.prototype._tryNext=function(e){var t,n=this.index++;try{t=this.accumulator(this.seed,e,n)}catch(e){this.destination.error(e)}this.seed=t,this.destination.next(t)},t}(qo);var ec=function(){function e(e,t){this.subjectFactory=e,this.selector=t}return e.prototype.call=function(e,t){var n=this.selector,r=this.subjectFactory(),i=n(r).subscribe(e);return i.add(t.subscribe(r)),i},e}();var tc=function(){function e(e,t){this.notifier=e,this.source=t}return e.prototype.call=function(e,t){return t.subscribe(new nc(e,this.notifier,this.source))},e}(),nc=function(e){function t(t,n,r){var i=e.call(this,t)||this;return i.notifier=n,i.source=r,i}return Vo(t,e),t.prototype.error=function(t){if(!this.isStopped){var n=this.errors,r=this.retries,i=this.retriesSubscription;if(r)this.errors=void 0,this.retriesSubscription=void 0;else{n=new ia;try{r=(0,this.notifier)(n)}catch(t){return e.prototype.error.call(this,t)}i=Ua(r,new Va(this))}this._unsubscribeAndRecycle(),this.errors=n,this.retries=r,this.retriesSubscription=i,n.next(t)}},t.prototype._unsubscribe=function(){var e=this.errors,t=this.retriesSubscription;e&&(e.unsubscribe(),this.errors=void 0),t&&(t.unsubscribe(),this.retriesSubscription=void 0),this.retries=void 0},t.prototype.notifyNext=function(){var e=this._unsubscribe;this._unsubscribe=null,this._unsubscribeAndRecycle(),this._unsubscribe=e,this.source.subscribe(this)},t}(Ra);function rc(){return new ia}function ic(){return function(e){return aa()((t=rc,function(e){var r;if(r="function"==typeof t?t:function(){return t},"function"==typeof n)return e.lift(new ec(r,n));var i=Object.create(e,la);return i.source=e,i.subjectFactory=r,i})(e));var t,n}}function oc(e,t){return"function"==typeof t?function(n){return n.pipe(oc((function(n,r){return Na(e(n,r)).pipe(ja((function(e,i){return t(n,e,r,i)})))})))}:function(t){return t.lift(new ac(e))}}var ac=function(){function e(e){this.project=e}return e.prototype.call=function(e,t){return t.subscribe(new sc(e,this.project))},e}(),sc=function(e){function t(t,n){var r=e.call(this,t)||this;return r.project=n,r.index=0,r}return Vo(t,e),t.prototype._next=function(e){var t,n=this.index++;try{t=this.project(e,n)}catch(e){return void this.destination.error(e)}this._innerSub(t)},t.prototype._innerSub=function(e){var t=this.innerSubscription;t&&t.unsubscribe();var n=new Va(this),r=this.destination;r.add(n),this.innerSubscription=Ua(e,n),this.innerSubscription!==n&&r.add(this.innerSubscription)},t.prototype._complete=function(){var t=this.innerSubscription;t&&!t.closed||e.prototype._complete.call(this),this.unsubscribe()},t.prototype._unsubscribe=function(){this.innerSubscription=void 0},t.prototype.notifyComplete=function(){this.innerSubscription=void 0,this.isStopped&&e.prototype._complete.call(this)},t.prototype.notifyNext=function(e){this.destination.next(e)},t}(Ra);function uc(e,t,n){return function(r){return r.lift(new cc(e,t,n))}}var cc=function(){function e(e,t,n){this.nextOrObserver=e,this.error=t,this.complete=n}return e.prototype.call=function(e,t){return t.subscribe(new lc(e,this.nextOrObserver,this.error,this.complete))},e}(),lc=function(e){function t(t,n,r,i){var o=e.call(this,t)||this;return o._tapNext=Oa,o._tapError=Oa,o._tapComplete=Oa,o._tapError=r||Oa,o._tapComplete=i||Oa,Ro(n)?(o._context=o,o._tapNext=n):n&&(o._context=n,o._tapNext=n.next||Oa,o._tapError=n.error||Oa,o._tapComplete=n.complete||Oa),o}return Vo(t,e),t.prototype._next=function(e){try{this._tapNext.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.next(e)},t.prototype._error=function(e){try{this._tapError.call(this._context,e)}catch(e){return void this.destination.error(e)}this.destination.error(e)},t.prototype._complete=function(){try{this._tapComplete.call(this._context)}catch(e){return void this.destination.error(e)}return this.destination.complete()},t}(qo);
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
class fc{all=new Map;constructor(e={},t=null){this.bindThis=t||globalThis,this.on(e),this.createSource$=pu((e=>La((t=>this.on(e,t)),(t=>this.off(e,t))).pipe(ic())))}#on(e,t){const n=this.all.get(e);n?n.unshift(t):this.all.set(e,[t])}on(e,t){"string"==typeof e?this.#on(e,t):e instanceof Object&&Object.entries(e).forEach((([e,t])=>{t instanceof Array?t.forEach((t=>this.#on(e,t))):t instanceof Function&&this.#on(e,t)}))}off(e,t){if("*"===e)return this.all.clear();{const n=this.all.get(e);return!!n&&(t?n.splice(n.indexOf(t)>>>0,1):this.all.set(e,[]))}}emit(e,...t){const n=this.all.get(e);return n?n.map((e=>e.apply(this.bindThis,t))):[]}}class pc{_belongTo=null;constructor(e,t){this.$EventHub=new fc({},this),this.$store=Do({spiderUUID:t,originData:e})}$commit(e,...t){const n=this.$store[e](...t);return this.$EventHub.emit(e,...t),n}$on(...e){return this.$EventHub.on(...e)}$off(...e){return this.$EventHub.off(...e)}$isSameTask(e){return e.$store.spiderUUID===this.$store.spiderUUID&&e.$store.uuid===this.$store.uuid}$destroy(){this._belongTo=null,this.$commit("destroy"),this.$EventHub.off("*")}get[Symbol.toStringTag](){return"Task"}}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */class hc extends pc{constructor(e,t="00000"){super(new Set(e),e?.[0]?._spiderUUID||t),this.#linkTask()}#linkTask(){this._originData.forEach((e=>{e._belongTo=this,e.$on("destroy",(()=>this.$removeLink(e)))}))}$commit(e,...t){const n=[];this._originData.forEach((r=>n.push(r.$commit(e,...t))));const r=this.$EventHub.emit(e,...t);return"start"===e&&this._output?r[0]:n}$destroy(){const e=[...this._originData];return this.$EventHub.emit("destroy"),e}$removeLink(e){this._originData.delete(e)}get[Symbol.toStringTag](){return"TaskGroup"}}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */const bc=new fc,dc=bc.createSource$("TaskUpdate"),vc=bc.createSource$("ControlUpdate");
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
var yc={stateChange(e){this.status=e,bc.emit("ControlUpdate",{name:"stateChange",value:e})},"Flow:stop"(){this._stop=!0,bc.emit("ControlUpdate",{name:"flowStop"})},"Flow:start"(){console.log("jspider 开始运行"),this.status="pending",this._stop=!1,bc.emit("ControlUpdate",{name:"flowStart"})},"Task:success"(e){e.$commit("complete"),e instanceof hc&&e.$destroy(),bc.emit("ControlUpdate",{name:"TaskSuccess"})},"Task:error"(e){console.log(e)}};
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */function gc(){const e=this.$store.$backup();bc.emit("TaskUpdate",e)}class mc{#Tasks=new Map;viewModel=[];createTask(e,t){const n=new pc(e,t);this.#Tasks.set(n.uuid,n);const r=this;return n.$on({start:gc,success:gc,complete:gc,error:gc,destroy(){r.#Tasks.delete(this.uuid)}}),this.viewModel.push(n.$store),n}}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */class _c{QueuePromise=Promise.resolve();enQueue(...e){return this.QueuePromise=e.reduce(((e,t)=>e.then(t)),this.QueuePromise),this}}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
function wc(e){return To(e,To.URL)}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */class Oc{constructor(e){this.Plugins=e}UUID=null;operator=null;pluginUUIDMap=new Map;#PluginQueue=new _c;preparePipeline(){let e="";const t=this.Plugins.map(((t,n)=>(e+=t.main.toString(),t.init instanceof Function&&this.#PluginQueue.enQueue(t.init),t.initUUID(n),this.pluginUUIDMap.set(t.uuid,t?.name||t.uuid),t.operator(this))));return this.operator=Xo(...t),this.UUID=wc(e),this.#PluginQueue.QueuePromise}}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
var jc=new class{status="free";#runningQueue=new _c;_stop=!1;spiderSource$=null;_pipeline=null;TaskManager=new mc;constructor(){this.$EventHub=new fc(yc,this)}_createLogicLine(){var e,t;this.spiderSource$=this.$EventHub.createSource$("Flow:input").pipe((e=this.$EventHub.createSource$("Flow:stop"),t=this.$EventHub.createSource$("Flow:start"),n=>new Jo((r=>{const i=new Set;let o=!1;const a=n.subscribe((e=>{o?i.add(e):r.next(e)}),Oa,(()=>{i.forEach((e=>r.next(e))),r.complete()})),s=e.subscribe((()=>{o=t.subscribe((()=>{i.forEach((e=>r.next(e))),i.clear(),o.unsubscribe(),o=!1}))}));return()=>{i.clear(),a.unsubscribe(),s.unsubscribe(),o&&o.unsubscribe()}}))),this._pipeline.operator),this.spiderSource$.subscribe((e=>this.$EventHub.emit("Task:success",e)),(e=>this.$EventHub.emit("Task:error",e)),(()=>this.$EventHub.emit("Flow:complete"))),this.$EventHub.emit("Flow:stop")}pipeline(...e){const t=new Oc(e);if("free"!==this.status)throw new Error("在运行阶段是不能够进行操作的哦");this.$EventHub.emit("stateChange","preparing"),this._pipeline=t,this.#runningQueue.enQueue((()=>this._pipeline.preparePipeline()),(()=>{this.$EventHub.emit("Spider:clearFlow"),this._createLogicLine(),this.$EventHub.emit("stateChange","free")}))}createFlow(e,{fromBackup:t=!1}={}){return this.#runningQueue.enQueue((()=>{e.forEach((e=>{if(!this._pipeline)throw new Error("没有创建pipeline");const n=this.TaskManager.createTask(e,this._pipeline.UUID);t&&n.$store.$import(e),this.$EventHub.emit("Flow:input",n)}))}))}startFlow(){this.#runningQueue.enQueue((()=>{this.$EventHub.emit("Flow:start")}))}stopFlow(){this.$EventHub.emit("Flow:stop")}};class Pc extends class{constructor({tasks:e=!1,controlPanel:t=!1}={}){this.config={tasks:e,controlPanel:t},e&&this.#subscriber.push(dc.subscribe((e=>this._update(e)))),t&&this.#subscriber.push(vc.subscribe((e=>this._change(e))))}config={};#subscriber=[];$destroy(){this.#subscriber.forEach((e=>{e.unsubscribe()}))}}{constructor(e){super(Object.assign(e,{tasks:!0,controlPanel:!0}))}tasks=[];#uuidArray=[];_update(e){const t=this.#uuidArray.indexOf(e.uuid);-1===t?(this.#uuidArray.push(e.uuid),this.tasks.push(e)):this.tasks.splice(t,1,e)}_change({name:e,value:t=""}){}}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
class Sc extends Error{constructor(e){super(e),this.name="PluginError"}}class Ac extends Error{constructor(e){super(e),this.name="FlowError"}}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */class xc{constructor({forceRetry:e=!0,saveResult:t=!1,name:n=null,main:r,init:i=null,error:o=null,complete:a=null,options:s={},operator:u}){u&&(this.operator=u),Object.assign(this,{name:n,main:r,init:i,error:o,complete:a,options:s,saveResult:t,forceRetry:e})}initUUID(e){this.uuid=wc(this.main.toString()+e)}TaskStarter(e){return _a(e).pipe(oc((e=>_a(e).pipe(ja((e=>[e.$commit("start",this.uuid),e._originData])),oc((([e,t])=>{const n=this.main(e,t);return n instanceof Promise||n instanceof Jo?Na(n):_a(n)})),ja((t=>(e.$commit("success",t,this.uuid,this.saveResult),e)))))),Hu(((...t)=>{if(this.error instanceof Function){const n=this.error(e,...t);if(n)throw new Sc(n);return da}throw new Sc(t[0])})),uc((e=>this.complete&&this.complete(e))))}operator(e){return Xo(oc((e=>this.TaskStarter(e))))}}function Ec(e,t={}){if(e instanceof Function)return new xc(Object.assign(t,{main:e}));if(e instanceof Object)return new xc(e);throw new Sc("Plugin 必须是一个函数或者是 Plugin 描述对象")}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */const Tc=(e,t)=>{return Xo((n=n=>n.pipe(function(e,t){var n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Zu(e,t,n))}}(((t,n)=>{if(console.log("尝试次数",t,n),t>=e)throw new Ac("超出尝试次数",n);return t+1}),0),qu(((...e)=>{switch(typeof t){case"string":case"number":return Ka(parseInt(t,10));case"function":return Ka(t(...e));default:throw new Ac("您输入的 delay 错误")}}))),function(e){return e.lift(new tc(n,e))}));
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */var n};function Ic({url:e,options:t={}}){const{returnType:n="json"}=this.options;return console.log("- 爬取 ",e),fetch(e,t).then((e=>{if(!e.ok)throw Error(e.statusText);
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
return function(e,t){const n=e.headers.get("content-type")||"";return t&&"auto"!==t?t?e[t]():e.json():/text|html|rtf|xml/.test(n)?e.text():/json/.test(n)?e.json():/arrayBuffer/.test(n)?e.arrayBuffer():e.buffer?e.buffer():e.blob()}(e,n)})).then((t=>(console.log(`${e} 爬取成功`),t))).catch((e=>{throw e}))}function Cc(e){throw e}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
function kc(e,t){return e instanceof File?e:e instanceof Blob?(e.name=t,e):new File([JSON.stringify(e)],t)}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */const Dc={main:Promise.resolve(!0),add(e){this.main.then((()=>Nc(e)))}},Nc=function(e){const t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=e.name,t.click(),URL.revokeObjectURL(t.href),t.remove(),console.log("%c 下载完成","color:green")},Vc=(e,{DownloadFileName:t},n)=>{const r=kc(e,t||("string"==typeof url?n.url.replace(/[^\/]*?\//g,""):""));return Dc.add(r),null},Rc={script:e=>new Promise(((t,n)=>{const r=document.createElement("script");r.src=e,r.onload=()=>{console.log(`${e} 加载完成`),r.remove(),t()},r.onerror=e=>n(e),document.body.append(r)})),css:e=>new Promise(((t,n)=>{const r=document.createElement("style");r.rel="stylesheet",r.src=e,r.onload=()=>{console.log(`${e} 加载完成`),t()},r.onerror=e=>n(e),document.body.append(r)}))};
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
var Uc={zangodb:"https://cdn.jsdelivr.net/gh/erikolson186/zangodb/dist/zangodb.min.js",dexie:"https://cdn.jsdelivr.net/npm/dexie@3.0.3/dist/dexie.min.js",mockjs:"https://cdn.jsdelivr.net/npm/mockjs-esm/dist/mock.min.js",xlsx:"https://cdn.jsdelivr.net/npm/xlsx@0.17.0/dist/xlsx.full.min.js",lodash:"https://cdn.jsdelivr.net/npm/lodash@4.17.21/lodash.min.js",gsap:["https://cdn.jsdelivr.net/npm/gsap@3.6.1/dist/gsap.min.js","https://cdn.jsdelivr.net/npm/gsap@3.6.1/dist/ScrollTrigger.min.js"],animejs:"https://cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js",rxjs:"https://cdn.jsdelivr.net/npm/rxjs@7.1.0/dist/bundles/rxjs.umd.min.js",jszip:"https://cdn.jsdelivr.net/npm/jszip@3.6.0/dist/jszip.min.js","ajax-hook":"https://unpkg.com/ajax-hook@2.0.3/dist/ajaxhook.min.js",axios:"https://cdn.jsdelivr.net/npm/axios@0.21.1/dist/axios.min.js",react:["https://unpkg.com/react@16/umd/react.production.min.js","https://unpkg.com/react-dom@16/umd/react-dom.production.min.js"],vue:["https://cdn.jsdelivr.net/npm/vue@2.6.14/dist/vue.min.js","https://cdn.jsdelivr.net/npm/vuex@3.6.2/dist/vuex.min.js"]};
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */const Mc=Object.entries({npm:/^npm?/i,gh:/gh?|github/i,wp:/wordpress|wp/i});function Fc(e,{version:t="",store:n="npm",path:r=""}={}){return`https://cdn.jsdelivr.net/${Mc.reduce(((e,[t,r])=>r.test(n)?t:e),"npm")}/${e}${t?`@${t}`:""}${r?`/${r}`:""}`}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */function zc(e){return Object.prototype.toString.call(e).match(/(?<=\[object\s+)\S+?(?=\])/)[0]}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */const Lc=/(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/;const $c={Object({url:e="",name:t,way:n="npm",path:r="",version:i="",type:o="script"}){if(!e){const o=function({name:e,way:t,path:n,version:r}){return Uc.hasOwnProperty(e)?Uc[e]:Fc(e,{version:r,store:t,path:n})}({name:t,way:n,path:r,version:i});if("string"!=typeof o)return Hc(o);e=o}return Rc[o](e)},String(e){return this.Object({[Lc.test(e)?"url":"name"]:e})},Array:e=>Promise.all(e.map((e=>Hc(e))))};async function Hc(e){return $c[zc(e)](e)}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */let Bc;function Gc(){return Hc("xlsx").then((()=>{Bc=window.XLSX}))}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */function Kc(e){const t=Bc.utils.book_new();return Object.entries(e).forEach((([e,n])=>{const r=function(e){return e.forEach((e=>{Object.entries(e).forEach((([t,n])=>{n instanceof Object&&(e[t]=JSON.stringify(n))}))})),Bc.utils.json_to_sheet(e)}(n);Bc.utils.book_append_sheet(t,r,e)})),t}function qc(e,t,n){const{bookType:r="xlsx",bookSST:i=!0,type:o="array"}=n||{};return function(e,t,n){const r=Bc.write(e,n);return new File([r],`${t}.${n.bookType}`)}(Kc(e),t,{bookType:r,bookSST:i,type:o})}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
let Wc;function Yc(){return Hc("jszip").then((()=>{Wc=window.JSZip}))}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */let Qc=0;
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
class Xc extends pc{constructor(e,t="00000"){super(new Set(e),e?.[0]?._spiderUUID||t),this.#linkTask()}#linkTask(){this._originData.forEach((e=>{e._belongTo=this,e.$on("destroy",(()=>this.$removeLink(e)))}))}$commit(e,...t){const n=[];this._originData.forEach((r=>n.push(r.$commit(e,...t))));const r=this.$EventHub.emit(e,...t);return"start"===e&&this._output?r[0]:n}$destroy(){const e=[...this._originData];return this.$EventHub.emit("destroy"),e}$removeLink(e){this._originData.delete(e)}get[Symbol.toStringTag](){return"TaskGroup"}}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
var Zc=Object.freeze({__proto__:null,Request:function(e={}){return Ec({init(){},name:"Request",main:Ic,options:e,operator(){const{delay:e=200,buffer:t=3,retry:n=3,handleError:r=null}=this.options;return i=>i.pipe(function(e,{retry:t=3,buffer:n=3,delay:r=1e3,retryDelay:i=300,handleError:o=function(e,t){throw new Error(e,t)}}={}){return Xo(Ru(1e3,void 0,n),Ha((e=>e.length)),qu(((e,t)=>Ka(t*r))),Ma((e=>Na(e))),Ku((n=>_a(n).pipe(Ma((t=>e(t))),Tc(t,i),Hu(((...e)=>(o instanceof Function?o(...e):o)||da))))))}((e=>this.TaskStarter(e)),{delay:e,buffer:t,retry:n,handleError:r||Cc}))}})},Download:function(e={}){return Ec({name:"Download",main:Vc,options:e})},ExcelHelper:function(e,t={}){return Ec({name:"ExcelHelper",init:Gc,options:t,main(t){const{fileName:n="result",XLSXOptions:r={}}=this.options;return e instanceof Function&&(t=e(t)),qc(t,`${n}-${(new Date).getTime()}`,r)}})},ZipFile:function(e={}){return e.zipFileName||(e.zipFileName=(new Date).getTime()),Ec({init:Yc,name:"zipFile",main(e){const{zipFileName:t}=this.options;return async function(e,t){const n=new Wc;e.forEach((e=>n.file(e.name,e)));const r=await n.generateAsync({type:"blob"});return r.name=`${t}-${Qc++}.zip`,r}(e.map((e=>kc(e,t))),t)},options:e,operator(){const{chunk:e=3}=this.options;return t=>t.pipe(Ru(5e3,void 0,e),Ha((e=>e.length)),Ku((e=>this.TaskStarter(new Xc(e),this.uuid))))}})}});
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */var Jc=["webkitStorageInfo","0","1","cookieStore","crossOriginIsolated","onbeforexrselect","ontransitioncancel","ontransitionrun","ontransitionstart","originAgentCluster","showDirectoryPicker","showOpenFilePicker","showSaveFilePicker","trustedTypes","parent","opener","top","length","frames","closed","location","self","window","document","name","customElements","history","locationbar","menubar","personalbar","scrollbars","statusbar","toolbar","status","frameElement","navigator","origin","external","screen","innerWidth","innerHeight","scrollX","pageXOffset","scrollY","pageYOffset","visualViewport","screenX","screenY","outerWidth","outerHeight","devicePixelRatio","clientInformation","screenLeft","screenTop","defaultStatus","defaultstatus","styleMedia","onsearch","isSecureContext","onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel","onauxclick","ongotpointercapture","onlostpointercapture","onpointerdown","onpointermove","onpointerup","onpointercancel","onpointerover","onpointerout","onpointerenter","onpointerleave","onselectstart","onselectionchange","onanimationend","onanimationiteration","onanimationstart","ontransitionend","onafterprint","onbeforeprint","onbeforeunload","onhashchange","onlanguagechange","onmessage","onmessageerror","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onstorage","onunhandledrejection","onunload","performance","stop","open","alert","confirm","prompt","print","queueMicrotask","requestAnimationFrame","cancelAnimationFrame","captureEvents","releaseEvents","requestIdleCallback","cancelIdleCallback","getComputedStyle","matchMedia","moveTo","moveBy","resizeTo","resizeBy","scroll","scrollTo","scrollBy","getSelection","find","webkitRequestAnimationFrame","webkitCancelAnimationFrame","fetch","btoa","atob","setTimeout","clearTimeout","setInterval","clearInterval","createImageBitmap","close","focus","blur","postMessage","onappinstalled","onbeforeinstallprompt","crypto","indexedDB","sessionStorage","localStorage","chrome","onpointerrawupdate","speechSynthesis","webkitRequestFileSystem","webkitResolveLocalFileSystemURL","openDatabase","applicationCache","caches","ondevicemotion","ondeviceorientation","ondeviceorientationabsolute"];
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
const el={RE:"",StringFunction(e,t,n,r){return this.RE.test(`${n}`)&&e.push(r),e},Array(e,t,n){const r=tl(Object.entries(n),this.RE),i=r.reduce(((e,[t,n])=>(e[parseInt(t)]=n,e)),[]);return r.length&&e.push([t,i]),e},Function(e,t,n){const r=tl(Object.entries(n),this.RE);return r.length&&e.push([t,Object.assign(n,Object.fromEntries(r))]),e},Object(e,t,n){const r=tl(Object.entries(n),this.RE);return r.length&&e.push([t,Object.fromEntries(r)]),e}};function tl(e,t,n=!1){return e.reduce(((e,r)=>{const[i,o]=r;if(t.test(i))return[...e,r];el.RE=t;const a=(s=o,Object.prototype.toString.call(s).match(/(?<=\[object\s+)\S+?(?=\])/)[0]);
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
var s;return el.hasOwnProperty(a)?el[a](e,i,o,r):n?[e,r]:e}),[])}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */el.Number=el.StringFunction,el.String=el.StringFunction;
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
const nl=/(https?|ftp|file):\/\/[-A-Za-z0-9+&@#/%?=~_|!:,.;]+[-A-Za-z0-9+&@#/%=~_|]/;const rl={Object({url:e="",name:t,way:n="npm",path:r="",version:i="",type:o="script"}){if(!e){const o=function({name:e,way:t,path:n,version:r}){return Uc.hasOwnProperty(e)?Uc[e]:Fc(e,{version:r,store:t,path:n})}({name:t,way:n,path:r,version:i});if("string"!=typeof o)return il(o);e=o}return Rc[o](e)},String(e){return this.Object({[nl.test(e)?"url":"name"]:e})},Array:e=>Promise.all(e.map((e=>il(e))))};async function il(e){return rl[zc(e)](e)}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
const ol={excel:{url:"/fake/excel",type:"get",template:{"data|100":[{ID:"@increment()",name:"@cname()",description:"@csentence()",avatar:'@dataImage("64x64")',address:"@region()",province:"@province()"}]}}};
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */const al=pu((async function(e){window.Mock||(await il("mockjs"),console.warn("Mockjs 载入并代理 Ajax 中")),console.warn("mock 启动后台 ",e);const{url:t,type:n,template:r}=ol[e];return window.Mock.mock(t,n,r),!0})),sl=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","hash"],ul={strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*):?([^:@]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/};
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */function cl(e,t=!1){const n=ul[t?"strict":"loose"].exec(decodeURI(e)),r=sl.reduce(((e,t,r)=>(e[t]=n[r]||"",e)),{});var i;return r.queryParams=(i=r.query,String(i).split(/&|;/).reduce((function(e,t){try{t=decodeURIComponent(t.replace(/\+/g," "))}catch(e){}const[n,r]=t.split(/=/g);return e[n]=r,e}),{})),r.base=r.host?(r.protocol?r.protocol+"://"+r.host:r.host)+(r.port?":"+r.port:""):"",r}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */
var ll=Object.freeze({__proto__:null,$antiDebugger:function(){Function.prototype.$constructor||(Function.prototype.$constructor=Function.prototype.constructor,Function.prototype.constructor=function(...e){if(!e||"string"!=typeof e[0]||"debugger"!==e[0])return Function.prototype.$constructor.apply(this,e)})}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */,$copy:function(e,t=!1){t&&([document,...document.querySelectorAll("*")].forEach((e=>{e.oncontextmenu="",e.oncopy="",e.oncut="",e.onselectstart=!0;const t=window.getEventListeners(e);["keydown","copy","cut"].forEach((n=>{t.hasOwnProperty(n)&&t[n].forEach((t=>e.removeEventListener(n,t.listener)))}))})),console.log("copy 方式清理完成")),window.copy&&"function copy(value) { [Command Line API] }"===window.copy.toString()||delete window.copy,window.copy(e),console.log("copy 完成，请您查看您的剪贴版")},$GlobalVars:function(){const e=Iu(Object.keys(window),Jc);return Vu(window,e)},$search:function(e,t){var n;if(!ku(t)&&("string"==typeof(n=t)||!us(n)&&os(n)&&"[object String]"==is(n))&&(t=new RegExp(t)),e instanceof Array)return tl(Object.entries({i:e}),t)[0][1];if(e instanceof Object)return Object.fromEntries(tl(Object.entries(e),t));throw new Error("不是对象，不能搜索")},$load:il,$Mock:al,parseURL:function(e,t=!1){return cl(e,t)}});
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */class fl{constructor({forceRetry:e=!0,saveResult:t=!1,name:n=null,main:r,init:i=null,error:o=null,complete:a=null,options:s={},operator:u}){u&&(this.operator=u),Object.assign(this,{name:n,main:r,init:i,error:o,complete:a,options:s,saveResult:t,forceRetry:e})}initUUID(e){this.uuid=wc(this.main.toString()+e)}TaskStarter(e){return _a(e).pipe(oc((e=>_a(e).pipe(ja((e=>[e.$commit("start",this.uuid),e._originData])),oc((([e,t])=>{const n=this.main(e,t);return n instanceof Promise||n instanceof Jo?Na(n):_a(n)})),ja((t=>(e.$commit("success",t,this.uuid,this.saveResult),e)))))),Hu(((...t)=>{if(this.error instanceof Function){const n=this.error(e,...t);if(n)throw new Sc(n);return da}throw new Sc(t[0])})),uc((e=>this.complete&&this.complete(e))))}operator(e){return Xo(oc((e=>this.TaskStarter(e))))}}return Object.assign(class{constructor({logEvery:e=!1}={}){this.config={logEvery:e},this.views=new Pc(this.config)}crawl(...e){return jc.createFlow(e.flat()),this}pipeline(...e){return jc.pipeline(...e),this}start(){return jc.startFlow(),this}stop(){return jc.stopFlow(),this}},ll,{plugins:Zc,Plugin:function(e,t={}){if(e instanceof Function)return new fl(Object.assign(t,{main:e}));if(e instanceof Object)return new fl(e);throw new Sc("Plugin 必须是一个函数或者是 Plugin 描述对象")}
/**
   * @license
   * Copyright 2021 KonghaYao 江夏尧 <dongzhongzhidong@qq.com>
   * SPDX-License-Identifier: Apache-2.0
   */,Task:pc,TaskGroup:hc,version:"3.1.8",buildDate:new Date(1628300553915)})}));
