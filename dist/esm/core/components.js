/**
 * MIT License
 * 
 * Copyright (c) 2020 动中之动
 * 
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to deal
 * in the Software without restriction, including without limitation the rights
 * to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 * copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 * 
 * The above copyright notice and this permission notice shall be included in all
 * copies or substantial portions of the Software.
 * 
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 * OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
 * SOFTWARE.
 */

import{e as t,g as r,f as e,h as o,b as n,j as i,c as a,a as c,i as s,L as u,k as f,M as p,d as l,l as b}from"../isArrayLikeObject-2619b8f9.js";import{r as v,i as y,b as h,c as d,a as j}from"../_baseUnary-5db9b978.js";import{n as _}from"../_nodeUtil-77c15709.js";var g=Object.create,m=function(){function r(){}return function(e){if(!t(e))return{};if(g)return g(e);r.prototype=e;var o=new r;return r.prototype=void 0,o}}();var O=Object.prototype;function A(t){var r=t&&t.constructor;return t===("function"==typeof r&&r.prototype||O)}var w="object"==typeof exports&&exports&&!exports.nodeType&&exports,x=w&&"object"==typeof module&&module&&!module.nodeType&&module,U=x&&x.exports===w?v.Buffer:void 0,z=(U?U.isBuffer:void 0)||function(){return!1},B={};B["[object Float32Array]"]=B["[object Float64Array]"]=B["[object Int8Array]"]=B["[object Int16Array]"]=B["[object Int32Array]"]=B["[object Uint8Array]"]=B["[object Uint8ClampedArray]"]=B["[object Uint16Array]"]=B["[object Uint32Array]"]=!0,B["[object Arguments]"]=B["[object Array]"]=B["[object ArrayBuffer]"]=B["[object Boolean]"]=B["[object DataView]"]=B["[object Date]"]=B["[object Error]"]=B["[object Function]"]=B["[object Map]"]=B["[object Number]"]=B["[object Object]"]=B["[object RegExp]"]=B["[object Set]"]=B["[object String]"]=B["[object WeakMap]"]=!1;var T=_&&_.isTypedArray,k=T?d(T):function(t){return y(t)&&c(t.length)&&!!B[h(t)]},L=Object.prototype.hasOwnProperty;function S(t,r){var e=j(t),o=!e&&s(t),i=!e&&!o&&z(t),a=!e&&!o&&!i&&k(t),c=e||o||i||a,u=c?function(t,r){for(var e=-1,o=Array(t);++e<t;)o[e]=r(e);return o}(t.length,String):[],f=u.length;for(var p in t)!r&&!L.call(t,p)||c&&("length"==p||i&&("offset"==p||"parent"==p)||a&&("buffer"==p||"byteLength"==p||"byteOffset"==p)||n(p,f))||u.push(p);return u}var D=Object.prototype.hasOwnProperty;function F(r){if(!t(r))return function(t){var r=[];if(null!=t)for(var e in Object(t))r.push(e);return r}(r);var e=A(r),o=[];for(var n in r)("constructor"!=n||!e&&D.call(r,n))&&o.push(n);return o}function I(t){return o(t)?S(t,!0):F(t)}var P,M,E=(P=Object.getPrototypeOf,M=Object,function(t){return P(M(t))}),C=Function.prototype,N=Object.prototype,R=C.toString,V=N.hasOwnProperty,W=R.call(Object);function q(t){var r=this.__data__=new u(t);this.size=r.size}q.prototype.clear=function(){this.__data__=new u,this.size=0},q.prototype.delete=function(t){var r=this.__data__,e=r.delete(t);return this.size=r.size,e},q.prototype.get=function(t){return this.__data__.get(t)},q.prototype.has=function(t){return this.__data__.has(t)},q.prototype.set=function(t,r){var e=this.__data__;if(e instanceof u){var o=e.__data__;if(!f||o.length<199)return o.push([t,r]),this.size=++e.size,this;e=this.__data__=new p(o)}return e.set(t,r),this.size=e.size,this};var G="object"==typeof exports&&exports&&!exports.nodeType&&exports,H=G&&"object"==typeof module&&module&&!module.nodeType&&module,J=H&&H.exports===G?v.Buffer:void 0,K=J?J.allocUnsafe:void 0;var Q=v.Uint8Array;function X(t,r){var e,o,n=r?(e=t.buffer,o=new e.constructor(e.byteLength),new Q(o).set(new Q(e)),o):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var Y,Z=function(t,r,e){for(var o=-1,n=Object(t),i=e(t),a=i.length;a--;){var c=i[Y?a:++o];if(!1===r(n[c],c,n))break}return t};function $(t,e,o){(void 0!==o&&!i(t[e],o)||void 0===o&&!(e in t))&&r(t,e,o)}function tt(t,r){if(("constructor"!==r||"function"!=typeof t[r])&&"__proto__"!=r)return t[r]}function rt(t){return function(t,o,n,i){var a=!n;n||(n={});for(var c=-1,s=o.length;++c<s;){var u=o[c],f=i?i(n[u],t[u],u,n,t):void 0;void 0===f&&(f=t[u]),a?r(n,u,f):e(n,u,f)}return n}(t,I(t))}function et(r,e,o,n,i,a,c){var u=tt(r,o),f=tt(e,o),p=c.get(f);if(p)$(r,o,p);else{var v=a?a(u,f,o+"",r,e,c):void 0,d=void 0===v;if(d){var _=j(f),g=!_&&z(f),O=!_&&!g&&k(f);v=f,_||g||O?j(u)?v=u:l(u)?v=function(t,r){var e=-1,o=t.length;for(r||(r=Array(o));++e<o;)r[e]=t[e];return r}(u):g?(d=!1,v=function(t,r){if(r)return t.slice();var e=t.length,o=K?K(e):new t.constructor(e);return t.copy(o),o}(f,!0)):O?(d=!1,v=X(f,!0)):v=[]:function(t){if(!y(t)||"[object Object]"!=h(t))return!1;var r=E(t);if(null===r)return!0;var e=V.call(r,"constructor")&&r.constructor;return"function"==typeof e&&e instanceof e&&R.call(e)==W}(f)||s(f)?(v=u,s(u)?v=rt(u):t(u)&&!b(u)||(v=function(t){return"function"!=typeof t.constructor||A(t)?{}:m(E(t))}(f))):d=!1}d&&(c.set(f,v),i(v,f,n,a,c),c.delete(f)),$(r,o,v)}}function ot(r,e,o,n,i){r!==e&&Z(e,(function(a,c){if(i||(i=new q),t(a))et(r,e,c,o,ot,n,i);else{var s=n?n(tt(r,c),a,c+"",r,e,i):void 0;void 0===s&&(s=a),$(r,c,s)}}),I)}var nt,it=(nt=function(t,r,e){ot(t,r,e)},a((function(r,e){var a=-1,c=e.length,s=c>1?e[c-1]:void 0,u=c>2?e[2]:void 0;for(s=nt.length>3&&"function"==typeof s?(c--,s):void 0,u&&function(r,e,a){if(!t(a))return!1;var c=typeof e;return!!("number"==c?o(a)&&n(e,a.length):"string"==c&&e in a)&&i(a[e],r)}(e[0],e[1],u)&&(s=c<3?void 0:s,c=1),r=Object(r);++a<c;){var f=e[a];f&&nt(r,f,a,s)}return r})));class at{constructor(t){this.err=t,this.errTime=new Date}}const ct={data:()=>({url:{},options:{},result:null}),format:{String(t){this.data.url=t},Object(t){!0===t._isABackup&&it(this,t),it(this.data,t)}},commit:{start(){return this.data},processing(t){return this._result},complete(t){this._complete=!0,this._completeUUID=t},success(t){this._result=t},error(t){this._errorList.push(new at(t))}}};export default ct;
