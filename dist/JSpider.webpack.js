!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var o=function(e,t){return"object"==typeof e&&((t={...t,...e.options}).headers={...t.headers,...e.options.headers},e=e.url),new Promise((n,o)=>{fetch(e,t).then(e=>{let t=e.headers.get("content-type");return/text|xml/.test(t)?e.text():/json/.test(t)?e.json():e.blob()}).then(e=>n(e)).catch(e=>o(e))})};var r=function(e,t){return new Promise((n,o)=>{setTimeout(()=>{n(e)},t)})};var a=function(e,t={},n=3,a=0){let i=Math.ceil(e.length/n);return Array(i).fill(e=>(async(e,t)=>{let[n,r,a]=e,i=n.splice(0,t),c=await Promise.all(i.map(e=>o(e,r)));return console.log(t+" 个已完成"+(new Date).getTime()),a.push(c),[n,r,a]})(e,n)).reduce((e,t)=>e.then(t).then(e=>r(e,a)),Promise.resolve([e,t,[]])).then(e=>e.pop())};var i=async function(e){let{urls:t,time:n,options:r,type:i,limits:c}=e;switch(i){case"start":return console.log("%c 并发","color:green"),(await a(t,r,c,n)).flat();default:return console.log("%c 测试","color:green"),await Promise.all([0,1,2].map(e=>{if(t[e])return o(t[e],r)})).then(e=>e.filter(e=>e))}};let c={SET(e,t,n=1e3){var o=new Date;o.setTime(o.getTime()+24*n*60*60*1e3);let r=o.toUTCString();return document.cookie=`${e}=${t}; expires=${r}; path=/`,this.UPDATE(),this},DELETE(e){this.set(e,"",-1),this.UPDATE()},UPDATE(){document.cookie.split(";").forEach(e=>{let[t,n]=e.split("=");n=unescape(decodeURI(n||"{}"));try{this[t.trim()]=JSON.parse(n)}catch(e){this[t.trim()]=n}})}};c.UPDATE();var l=new Proxy(c,{get:(e,t)=>(e.UPDATE(),e[t]),set:(e,t,n)=>(e.UPDATE(),e.set(t,n,1e3))});var s=function(e){return new Promise(t=>{let n;/.js$/.test(e)?(n=document.createElement("script"),n.src=e):/.css$/.test(e)&&(n=document.createElement("link"),n.href=e,n.rel="stylesheet",n.type="text/css"),n.onload=()=>{console.log(e+"%c 载入成功","color:green"),t(!0)},document.body.appendChild(n)})};var u=async function(e){window.JSZip||(await s("https://cdn.jsdelivr.net/npm/jszip@3.5.0/dist/jszip.min.js"),console.log("%c JSZip加载成功","color:green"));let t=new JSZip;e.forEach(e=>{let n=e.name;t.file(n,e)});let n=await t.generateAsync({type:"blob"});return console.log("%c 压缩完成","color:green"),n};var p=function(e,t){return e.map((e,n)=>{let o=t[n];return e instanceof Blob?!o&&e.name||(e.name=o||n+".txt"):e=new File([JSON.stringify(e)||""],o||n+".txt"),e})};var d=function(e){return e.forEach(e=>{let t=document.createElement("a");t.href=URL.createObjectURL(e),t.download=e.name,t.click(),t.remove(),console.log("%c 完成","color:green")}),!0};const m={get:(e,t)=>e[t],set:(e,t,n)=>(e[t]=n,e)};function f(e,t,n){let o=[...e.Func].reduce((e,n)=>n.apply(t,[e]),n),r=e.apply(t,o||n);return e.afterFunc.reduce((e,n)=>n.call(t,e),r)}async function g(e,t,n){let o=e.Func.reduce((e,n)=>e.then(e=>n.apply(t,[e])),Promise.resolve(n));return[e,...e.afterFunc].reduce((e,n)=>e.then(e=>n.call(t,e)),Promise.resolve(o||n))}var h=function(e,t=!1){e.Func=[],e.afterFunc=[];let n=m;return n.apply=t?g:f,new Proxy(e,n)};const y={get:function(e,t){if("length"===t&&e instanceof Array)return e[t];return e.GETTER.hasOwnProperty(t)?e.GETTER[t].apply(this,[e[t]]):e.GETTER.hasOwnProperty("DEFAULT")?e.GETTER.DEFAULT.apply(this,[t,e[t]]):e[t]},set:function(e,t,n){if("length"===t&&e instanceof Array)return e[t]=n,!0;if(("GETTER"===t||"SETTER"===t)&&"object"!=typeof n)return console.log("%c 请对对象属性赋值","color:red"),!1;if(e.SETTER.hasOwnProperty(t)){let o=e.SETTER[t].apply(this,[e[t],n]);return void 0!==o&&(e[t]=b(o)),!0}if(e.SETTER.hasOwnProperty("DEFAULT")){let o=e.SETTER.DEFAULT.apply(this,[e[t],n]);return void 0!==o&&(e[t]=b(o),!0)}return e[t]=n,!0}},w=(e,t)=>t;function b(e){let t=Object.prototype.toString.call(e).match(/(?<=\[object\s+)\S+?(?=\])/)[0];if("Object"!==t&&"Array"!==t||!e)return e;{Object.entries(e).forEach(([t,n])=>{e[t]=b(n)}),e.GETTER={DEFAULT:w},e.SETTER={DEFAULT:w};let t=new Proxy(e,y);return console.log("%c 代理对象完成","color:orange"),t}}var v=["parent","opener","top","length","frames","closed","location","self","window","document","name","customElements","history","locationbar","menubar","personalbar","scrollbars","statusbar","toolbar","status","frameElement","navigator","origin","external","screen","innerWidth","innerHeight","scrollX","pageXOffset","scrollY","pageYOffset","visualViewport","screenX","screenY","outerWidth","outerHeight","devicePixelRatio","clientInformation","screenLeft","screenTop","defaultStatus","defaultstatus","styleMedia","onsearch","isSecureContext","onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel","onauxclick","ongotpointercapture","onlostpointercapture","onpointerdown","onpointermove","onpointerup","onpointercancel","onpointerover","onpointerout","onpointerenter","onpointerleave","onselectstart","onselectionchange","onanimationend","onanimationiteration","onanimationstart","ontransitionend","onafterprint","onbeforeprint","onbeforeunload","onhashchange","onlanguagechange","onmessage","onmessageerror","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onstorage","onunhandledrejection","onunload","performance","stop","open","alert","confirm","prompt","print","queueMicrotask","requestAnimationFrame","cancelAnimationFrame","captureEvents","releaseEvents","requestIdleCallback","cancelIdleCallback","getComputedStyle","matchMedia","moveTo","moveBy","resizeTo","resizeBy","scroll","scrollTo","scrollBy","getSelection","find","webkitRequestAnimationFrame","webkitCancelAnimationFrame","fetch","btoa","atob","setTimeout","clearTimeout","setInterval","clearInterval","createImageBitmap","close","focus","blur","postMessage","onappinstalled","onbeforeinstallprompt","crypto","indexedDB","webkitStorageInfo","sessionStorage","localStorage","chrome","onpointerrawupdate","speechSynthesis","webkitRequestFileSystem","webkitResolveLocalFileSystemURL","openDatabase","applicationCache","caches","ondevicemotion","ondeviceorientation","ondeviceorientationabsolute"];var E=function e(t,n,o=5){return o--?t.reduce((t,r)=>{let[a,i]=r;if(n.test(a))return[...t,r];switch(Object.prototype.toString.call(i).match(/(?<=\[object\s+)\S+?(?=\])/)[0]){case"String":case"Function":case"Number":return n.test(i)?[...t,r]:t;case"Array":var c=e(Object.entries(i),n,o).reduce((e,t)=>{let n=parseInt(t[0])-e.length;return[...Array(n)].forEach(()=>e.push("***")),[...e,t[1]]},[]);return c.length?[...t,[a,c]]:t;case"Object":var l=Object.fromEntries(e(Object.entries(i),n,o));return 0===Object.keys(l).length?t:[...t,[a,l]];default:return t}},[]):(console.log("%c 触及低端不再下探","color:green"),[])};const T={Ajax:i,Cookies:l,Copy:{unCopyClear:function(){[document,...document.querySelectorAll("*")].forEach(e=>{e.oncontextmenu="",e.onselectstart=!0,e.oncopy="",e.oncut="";let t=window.getEventListeners(e);t.hasOwnProperty("copy")&&t.copy.forEach(t=>e.removeEventListener("copy",t.listener))}),console.log("清理完成")},copy:function(e,t=!1){t&&clearUnCopy();let n=e instanceof HTMLElement?e.outerHTML:JSON.stringify(e),o=document.createElement("div");o.innerText=n,document.body.appendChild(o),o.style.userSelect="text",getSelection().selectAllChildren(o),document.execCommand("copy"),o.remove(),console.log("%c 复制已经完成","color:green")}},Downloader:async function(e,t=[],n=!1){if(console.log("download启动"),(e=p(e,t)).length<10&&!n)d(e);else{console.log(n?"强制压缩":"%c 文件多于 10 个,启动压缩","color:orange");let t=await u(e);t.name=(new Date).toLocaleString()+".zip",d([t])}console.log("%c 下载完成","color:green")},...{hook:h,watch:b},...{HTMLParser:async function(e,t){return(await Promise.all(e.reduce((e,t)=>{if(t instanceof Blob){let n=t.text();e.push(n)}else"string"==typeof t&&e.push(t);return e},[]))).map(e=>{try{let n=e.match(/(?<=\<body[\s\S]*?>)[\s\S]+(?=<\/body>)/)[0],o=document.createElement("div");o.innerHTML=n;let r=t(o);return console.log("%c 解析完成","color:green"),o.remove(),r}catch(t){return e}})},XMLParser:async function(e){return window.parser||await s("https://cdn.bootcdn.net/ajax/libs/fast-xml-parser/3.17.1/parser.min.js"),e.map(e=>parser.parse(e))},TurnToMarkdown:async function(e){return window.turndownService||(await s("https://cdn.jsdelivr.net/npm/turndown/dist/turndown.min.js"),window.turndownService=new TurndownService({headingStyle:"atx",hr:"- - -",bulletListMarker:"*",codeBlockStyle:"fenced",fence:"```",emDelimiter:"*",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"collapsed"}),turndownService.addRule("strikethrough",{filter:["br"],replacement:function(){return"<br>"}})),e.map(e=>turndownService.turndown(e))}},Script:s,...{search:function(e,t,n=5){if(n<2&&console.log("深度不够"),!t instanceof RegExp&&t instanceof String&&(t=new RegExp(t)),e instanceof Object)return Object.fromEntries(E(Object.entries(e),t,n));throw new Error("不是对象，不能搜索")},Globals:function(){let e=Object.entries(window).filter(e=>!v.includes(e[0]));return Object.fromEntries(e)}},...{searchWindow:function(e,t){return(0,JSpider.prototype.search)((0,JSpider.prototype.Globals)(),e,t)},XHRwatch:async function(e,t="get"){let n=JSpider.prototype.hook;XMLHttpRequest.prototype.open=n(XMLHttpRequest.prototype.open),XMLHttpRequest.prototype.send=n(XMLHttpRequest.prototype.send),XMLHttpRequest.prototype.open.Func.push(n=>{let[o,r]=n;if(console.log("XHR拦截",n),e.test(r)&&o.toLowerCase()===t){window.STOP=!0;let e=Object.fromEntries(r.split("?")[1].split("&").map(e=>e.split("=").map(e=>decodeURIComponent(e))));console.log(e)}return n}),XMLHttpRequest.prototype.send.Func.push(e=>(window.STOP&&(window.STOP=!1),e))}}};window.JSpider=class{},Object.assign(JSpider.prototype,T)}]);