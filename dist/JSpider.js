!function(e){function n(n){for(var t,r,a=n[0],i=n[1],c=0,s=[];c<a.length;c++)r=a[c],Object.prototype.hasOwnProperty.call(o,r)&&o[r]&&s.push(o[r][0]),o[r]=0;for(t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t]);for(l&&l(n);s.length;)s.shift()()}var t={},o={0:0};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}r.e=function(e){var n=[],t=o[e];if(0!==t)if(t)n.push(t[2]);else{var a=new Promise((function(n,r){t=o[e]=[n,r]}));n.push(t[2]=a);var i,c=document.createElement("script");c.charset="utf-8",c.timeout=120,r.nc&&c.setAttribute("nonce",r.nc),c.src=function(e){return r.p+""+e+".JSpider.js"}(e);var l=new Error;i=function(n){c.onerror=c.onload=null,clearTimeout(s);var t=o[e];if(0!==t){if(t){var r=n&&("load"===n.type?"missing":n.type),a=n&&n.target&&n.target.src;l.message="Loading chunk "+e+" failed.\n("+r+": "+a+")",l.name="ChunkLoadError",l.type=r,l.request=a,t[1](l)}o[e]=void 0}};var s=setTimeout((function(){i({type:"timeout",target:c})}),12e4);c.onerror=c.onload=i,document.head.appendChild(c)}return Promise.all(n)},r.m=e,r.c=t,r.d=function(e,n,t){r.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,n){if(1&n&&(e=r(e)),8&n)return e;if(4&n&&"object"==typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(r.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var o in e)r.d(t,o,function(n){return e[n]}.bind(null,o));return t},r.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(n,"a",n),n},r.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},r.p="",r.oe=function(e){throw console.error(e),e};var a=window.webpackJsonp=window.webpackJsonp||[],i=a.push.bind(a);a.push=n,a=a.slice();for(var c=0;c<a.length;c++)n(a[c]);var l=i;r(r.s=0)}([function(e,n,t){"use strict";t.r(n);var o=function(e,n){return"object"==typeof e&&((n={...n,...e.options}).headers={...n.headers,...e.options.headers},e=e.url),new Promise((t,o)=>{fetch(e,n).then(e=>e.blob()).then(e=>{/text|xml/.test(e.type)?t(e.text()):/json/.test(e.type)?t(JSON.parse(e.text())):t(e)}).catch(e=>o(e))})};var r=function(e,n){return new Promise((t,o)=>{setTimeout(()=>{t(e)},n)})};var a=function(e,n={},t=3,a=0){let i=Math.ceil(e.length/t);return Array(i).fill(e=>(async(e,n)=>{let[t,r,a]=e,i=t.splice(0,n),c=await Promise.all(i.map(e=>o(e,r)));return console.log(n+" 个已完成"+(new Date).getTime()),a.push(c),[t,r,a]})(e,t)).reduce((e,n)=>e.then(n).then(e=>r(e,a)),Promise.resolve([e,n,[]])).then(e=>e.pop())};var i=async function(e){let{urls:n,time:t,options:r,type:i,limits:c}=e;switch(i){case"start":return console.log("%c 并发","color:green"),(await a(n,r,c,t)).flat();default:return console.log("%c 测试","color:green"),await Promise.all([0,1,2].map(e=>{if(n[e])return o(n[e],r)})).then(e=>e.filter(e=>e))}};let c={set(e,n,t=1e3){this.update();var o=new Date;return o.setTime(o.getTime()+24*t*60*60*1e3),expires=o.toUTCString(),document.cookie=`${e}=${n}; expires=${expires}; path=/`,this[e]=n,this},delete(e){this.update(),this.set(e,"",-1)},update(){document.cookie.split(";").forEach(e=>{let[n,t]=e.split("=");t=unescape(decodeURI(t||"{}")),c[n.trim()]=JSON.parse(t)||t})}};c.update();var l=new Proxy(c,{get:(e,n)=>(e.update(),e[n]),set:(e,n,t)=>(e.update(),e.set(n,t,1e3))});var s=function(e){return new Promise(n=>{let t;/.js$/.test(e)?(t=document.createElement("script"),t.src=e):/.css$/.test(e)&&(t=document.createElement("link"),t.href=e,t.rel="stylesheet",t.type="text/css"),t.onload=()=>{console.log(e+"%c 载入成功","color:green"),n(!0)},document.body.appendChild(t)})};var u=async function(e){window.JSZip||(await s("https://cdn.jsdelivr.net/npm/jszip@3.5.0/dist/jszip.min.js"),console.log("%c JSZip加载成功","color:green"));let n=new JSZip;e.forEach(e=>{let t=e.name;n.file(t,e)});let t=await n.generateAsync({type:"blob"});return console.log("%c 压缩完成","color:green"),t};var p=function(e,n){return e.map((e,t)=>{let o=n[t];return e instanceof Blob?!o&&e.name||(e.name=o||t+".txt"):e=new File([JSON.stringify(e)||""],o||t+".txt"),e})};var d=function(e){return e.forEach(e=>{let n=document.createElement("a");n.href=URL.createObjectURL(e),n.download=e.name,n.click(),n.remove(),console.log("%c 完成","color:green")}),!0};const f={get:(e,n)=>e[n],set:(e,n,t)=>(e[n]=t,e)};function m(e,n,t){let o=[...e.Func].reduce((e,t)=>t.apply(n,[e]),t),r=e.apply(n,o);return e.afterFunc.reduce((e,t)=>t.call(n,e),r)}async function h(e,n,t){let o=e.Func.reduce((e,t)=>e.then(e=>t.apply(n,[e])),Promise.resolve(t));return[e,...e.afterFunc].reduce((e,t)=>e.then(e=>t.apply(n,e)),Promise.resolve(o))}var g=function(e,n=!1){e.Func=[],e.afterFunc=[];let t=f;return t.apply=n?h:m,new Proxy(e,t)};const y={get:function(e,n){if("length"===n&&e instanceof Array)return e[n];return e.GETTER.hasOwnProperty(n)?e.GETTER[n].apply(this,[e[n]]):e.GETTER.hasOwnProperty("DEFAULT")?e.GETTER.DEFAULT.apply(this,[n,e[n]]):e[n]},set:function(e,n,t){if("length"===n&&e instanceof Array)return e[n]=t,!0;if(("GETTER"===n||"SETTER"===n)&&"object"!=typeof t)return console.log("%c 请对对象属性赋值","color:red"),!1;if(e.SETTER.hasOwnProperty(n)){let o=e.SETTER[n].apply(this,[e[n],t]);return void 0!==o&&(e[n]=b(o)),!0}if(e.SETTER.hasOwnProperty("DEFAULT")){let o=e.SETTER.DEFAULT.apply(this,[e[n],t]);return void 0!==o&&(e[n]=b(o),!0)}return e[n]=t,!0}},w=(e,n)=>n;function b(e){let n=Object.prototype.toString.call(e).match(/(?<=\[object\s+)\S+?(?=\])/)[0];if("Object"!==n&&"Array"!==n||!e)return e;{Object.entries(e).forEach(([n,t])=>{e[n]=b(t)}),e.GETTER={DEFAULT:w},e.SETTER={DEFAULT:w};let n=new Proxy(e,y);return console.log("%c 代理对象完成","color:orange"),n}}var v=["parent","opener","top","length","frames","closed","location","self","window","document","name","customElements","history","locationbar","menubar","personalbar","scrollbars","statusbar","toolbar","status","frameElement","navigator","origin","external","screen","innerWidth","innerHeight","scrollX","pageXOffset","scrollY","pageYOffset","visualViewport","screenX","screenY","outerWidth","outerHeight","devicePixelRatio","clientInformation","screenLeft","screenTop","defaultStatus","defaultstatus","styleMedia","onsearch","isSecureContext","onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","onformdata","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmouseenter","onmouseleave","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onresize","onscroll","onseeked","onseeking","onselect","onstalled","onsubmit","onsuspend","ontimeupdate","ontoggle","onvolumechange","onwaiting","onwebkitanimationend","onwebkitanimationiteration","onwebkitanimationstart","onwebkittransitionend","onwheel","onauxclick","ongotpointercapture","onlostpointercapture","onpointerdown","onpointermove","onpointerup","onpointercancel","onpointerover","onpointerout","onpointerenter","onpointerleave","onselectstart","onselectionchange","onanimationend","onanimationiteration","onanimationstart","ontransitionend","onafterprint","onbeforeprint","onbeforeunload","onhashchange","onlanguagechange","onmessage","onmessageerror","onoffline","ononline","onpagehide","onpageshow","onpopstate","onrejectionhandled","onstorage","onunhandledrejection","onunload","performance","stop","open","alert","confirm","prompt","print","queueMicrotask","requestAnimationFrame","cancelAnimationFrame","captureEvents","releaseEvents","requestIdleCallback","cancelIdleCallback","getComputedStyle","matchMedia","moveTo","moveBy","resizeTo","resizeBy","scroll","scrollTo","scrollBy","getSelection","find","webkitRequestAnimationFrame","webkitCancelAnimationFrame","fetch","btoa","atob","setTimeout","clearTimeout","setInterval","clearInterval","createImageBitmap","close","focus","blur","postMessage","onappinstalled","onbeforeinstallprompt","crypto","indexedDB","webkitStorageInfo","sessionStorage","localStorage","chrome","onpointerrawupdate","speechSynthesis","webkitRequestFileSystem","webkitResolveLocalFileSystemURL","openDatabase","applicationCache","caches","ondevicemotion","ondeviceorientation","ondeviceorientationabsolute"];var E=function e(n,t,o=5){return o--?n.reduce((n,r)=>{let[a,i]=r;if(t.test(a))return[...n,r];switch(Object.prototype.toString.call(i).match(/(?<=\[object\s+)\S+?(?=\])/)[0]){case"String":case"Function":case"Number":return t.test(i)?[...n,r]:n;case"Array":var c=e(Object.entries(i),t,o).reduce((e,n)=>{let t=parseInt(n[0])-e.length;return[...Array(t)].forEach(()=>e.push("***")),[...e,n[1]]},[]);return c.length?[...n,[a,c]]:n;case"Object":var l=Object.fromEntries(e(Object.entries(i),t,o));return 0===Object.keys(l).length?n:[...n,[a,l]];default:return n}},[]):(console.log("%c 触及低端不再下探","color:green"),[])};const S={Ajax:i,Cookies:l,Copy:{unCopyClear:function(){[document,...document.querySelectorAll("*")].forEach(e=>{e.oncontextmenu="",e.onselectstart=!0,e.oncopy="",e.oncut="";let n=window.getEventListeners(e);n.hasOwnProperty("copy")&&n.copy.forEach(n=>e.removeEventListener("copy",n.listener))}),console.log("清理完成")},copy:function(e,n=!1){n&&clearUnCopy();let t=e instanceof HTMLElement?e.outerHTML:JSON.stringify(e),o=document.createElement("div");o.innerText=t,document.body.appendChild(o),o.style.userSelect="text",getSelection().selectAllChildren(o),document.execCommand("copy"),o.remove(),console.log("%c 复制已经完成","color:green")}},Downloader:async function(e,n=[],t=!1){if(console.log("download启动"),(e=p(e,n)).length<10&&!t)d(e);else{console.log(t?"强制压缩":"%c 文件多于 10 个,启动压缩","color:orange");let n=await u(e);n.name=(new Date).toLocaleString()+".zip",d([n])}console.log("%c 下载完成","color:green")},Extend:async()=>{await t.e(1).then(t.bind(null,1)).then(e=>{Object.assign(JSpider.prototype,e.default),console.log(`%c ${Object.keys(e.default).join(" ")} 载入完成`,"color:green")}).catch(e=>{console.error(e)})},...{hook:g,watch:b},...{HTMLParser:async function(e,n){return(await Promise.all(e.reduce((e,n)=>{if(n instanceof Blob){let t=n.text();e.push(t)}else"string"==typeof n&&e.push(n);return e},[]))).map(e=>{try{let t=e.match(/(?<=\<body[\s\S]*?>)[\s\S]+(?=<\/body>)/)[0],o=document.createElement("div");o.innerHTML=t;let r=n(o);return console.log("%c 解析完成","color:green"),o.remove(),r}catch(n){return e}})},XMLParser:async function(e){return window.parser||await s("https://cdn.bootcdn.net/ajax/libs/fast-xml-parser/3.17.1/parser.min.js"),e.map(e=>parser.parse(e))},TurnToMarkdown:async function(e){return window.turndownService||(await s("https://cdn.jsdelivr.net/npm/turndown/dist/turndown.min.js"),window.turndownService=new TurndownService({headingStyle:"atx",hr:"- - -",bulletListMarker:"*",codeBlockStyle:"fenced",fence:"```",emDelimiter:"*",strongDelimiter:"**",linkStyle:"inlined",linkReferenceStyle:"collapsed"}),turndownService.addRule("strikethrough",{filter:["br"],replacement:function(){return"<br>"}})),e.map(e=>turndownService.turndown(e))}},Script:s,...{search:function(e,n,t=5){if(t<2&&console.log("深度不够"),!n instanceof RegExp&&n instanceof String&&(n=new RegExp(n)),e instanceof Object)return Object.fromEntries(E(Object.entries(e),n,t));throw new Error("不是对象，不能搜索")},Globals:function(){let e=Object.entries(window).filter(e=>!v.includes(e[0]));return Object.fromEntries(e)}}};class T{}Object.assign(T.prototype,S);n.default=T}]);